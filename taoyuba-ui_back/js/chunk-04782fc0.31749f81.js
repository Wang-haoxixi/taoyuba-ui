(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04782fc0"],{"2b77":function(e,t,r){},"2f9e":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("ac6a"),r("28a5"),r("a481");var n=r("b5c6");function a(e){var t=e.url,r=e.method,a=void 0===r?"post":r,i=e.data,l=void 0===i?{}:i,c=e.title,s=void 0===c?"":c;return new Promise((function(e){return Object(n["a"])({url:t,method:a,headers:{responseType:"arraybuffer"},data:l,responseType:"blob"}).then((function(t){o({title:s,response:t}).then((function(){e()}))}))}))}function o(e){var t=e.title,r=void 0===t?"":t,n=e.response,a=i(n.headers["content-disposition"].replace(/"/g,""));return new Promise((function(e){var t=n.headers,o=new Blob([n.data],{type:t["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,r);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(o),i.download=r?"".concat(r,".").concat(a.suffix):a.filename,document.body.appendChild(i),i.style.display="none",i.click()}e()}))}function i(e){var t={},r=e.split(";");return r.forEach((function(e){var r=e.replace(/^\s+|\s+$/g,""),n=r.split("=");n[1]?t[n[0]]=n[1]:t[n[0]]=n[0]})),t.suffix=t.filename.split(".")[1],t}},"38ac":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"iep-page-form"},[r("basic-container",[r("page-header",{attrs:{title:e.getTitle,backOption:e.backOption}}),r("el-form",{ref:"form",attrs:{disabled:1===e.type,model:e.form,rules:e.rules,"label-width":"150px",size:"small"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"渔船名：",prop:"shipName"}},[r("el-input",{attrs:{maxlength:"20",placeholder:"请输入渔船名"},model:{value:e.form.shipName,callback:function(t){e.$set(e.form,"shipName",t)},expression:"form.shipName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"渔船编号：",prop:"shipNo"}},[r("el-input",{attrs:{maxlength:"16"},on:{blur:e.cheackNo},model:{value:e.form.shipNo,callback:function(t){e.$set(e.form,"shipNo",t)},expression:"form.shipNo"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"持证人/公司名称  ：",prop:"shipowner"}},[r("el-input",{attrs:{maxlength:"20"},model:{value:e.form.shipowner,callback:function(t){e.$set(e.form,"shipowner",t)},expression:"form.shipowner"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"身份证/企业代码：",prop:"shipownerIdcard"}},[(e.form.shipownerIdcard,[r("el-input",{attrs:{maxlength:"18"},model:{value:e.form.shipownerIdcard,callback:function(t){e.$set(e.form,"shipownerIdcard",t)},expression:"form.shipownerIdcard"}})])],2)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"邮政编码：",prop:"zipcode"}},[r("el-input",{attrs:{maxlength:"6"},model:{value:e.form.zipcode,callback:function(t){e.$set(e.form,"zipcode",t)},expression:"form.zipcode"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"手机号码：",prop:"mobile"}},[r("el-input",{attrs:{maxlength:"11"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系地址：",prop:"address"}},[r("el-input",{attrs:{maxlength:"100"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"渔船股份性质：",prop:"shipShare"}},[r("el-select",{on:{change:e.shipShareChange},model:{value:e.form.shipShare,callback:function(t){e.$set(e.form,"shipShare",t)},expression:"form.shipShare"}},e._l(e.$store.getters.dictGroup.tyb_contract_ship_attr,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e.isPartnerSearch?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"股东检索：",prop:"crewName"}},[r("el-select",{ref:"searchSelect",staticStyle:{width:"380px!important"},attrs:{placeholder:"请输入股东身份证号",filterable:"",remote:"",maxlength:"20",loading:e.loading,clearable:"","remote-method":e.getCrewNameList},on:{change:e.crewNameChange},nativeOn:{keyup:function(t){return e.selectMax.apply(null,arguments)}},model:{value:e.crewName,callback:function(t){e.crewName=t},expression:"crewName"}},e._l(e.crewNames,(function(e){return r("el-option",{key:e.index,attrs:{label:e.realName+" "+e.idcard,value:e}})})),1)],1)],1)],1):e._e(),e.isPartner?r("div",e._l(e.partnerList,(function(t){return r("el-row",{key:t.index},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"股东姓名：",prop:"shareName"}},[r("el-input",{attrs:{maxlength:"30",disabled:!0},model:{value:t.realName,callback:function(r){e.$set(t,"realName",r)},expression:"item.realName"}})],1)],1),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"股东身份证：",prop:"shareId"}},[r("el-input",{attrs:{maxlength:"30",disabled:!0},model:{value:t.idcard,callback:function(r){e.$set(t,"idcard",r)},expression:"item.idcard"}})],1)],1),r("el-col",{attrs:{span:1}},[r("el-button",{attrs:{size:"mini",plain:""},on:{click:function(r){return e.handleDel(t.idcard)}}},[e._v("删除")])],1)],1)})),1):e._e(),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"渔船所有权登记证：",prop:"licensesOwnerShip"}},[r("el-input",{attrs:{maxlength:"30"},model:{value:e.form.licensesOwnerShip,callback:function(t){e.$set(e.form,"licensesOwnerShip",t)},expression:"form.licensesOwnerShip"}})],1)],1),r("el-col",{attrs:{span:12}},[r("iep-form-item",{staticClass:"form-half",attrs:{prop:"licensesOwnerExpireDate","label-name":"所有权证书有效期"}},[r("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.licensesOwnerExpireDate,callback:function(t){e.$set(e.form,"licensesOwnerExpireDate",t)},expression:"form.licensesOwnerExpireDate"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"捕捞许可证编号：",prop:"licensesFishingNo"}},[r("el-input",{attrs:{maxlength:"50"},model:{value:e.form.licensesFishingNo,callback:function(t){e.$set(e.form,"licensesFishingNo",t)},expression:"form.licensesFishingNo"}})],1)],1),r("el-col",{attrs:{span:12}},[r("iep-form-item",{staticClass:"form-half",attrs:{prop:"licensesFishingExpireDate","label-name":"捕捞许可证有效期"}},[r("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.licensesFishingExpireDate,callback:function(t){e.$set(e.form,"licensesFishingExpireDate",t)},expression:"form.licensesFishingExpireDate"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"国籍证书编号：",prop:"licensesNationalNo"}},[r("el-input",{attrs:{maxlength:"50"},model:{value:e.form.licensesNationalNo,callback:function(t){e.$set(e.form,"licensesNationalNo",t)},expression:"form.licensesNationalNo"}})],1)],1),r("el-col",{attrs:{span:12}},[r("iep-form-item",{staticClass:"form-half",attrs:{prop:"licensesNationalExpireDate","label-name":"国籍证有效期"}},[r("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.licensesNationalExpireDate,callback:function(t){e.$set(e.form,"licensesNationalExpireDate",t)},expression:"form.licensesNationalExpireDate"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船舶检验证书编号：",prop:"licensesInspectionNo"}},[r("el-input",{attrs:{maxlength:"50"},model:{value:e.form.licensesInspectionNo,callback:function(t){e.$set(e.form,"licensesInspectionNo",t)},expression:"form.licensesInspectionNo"}})],1)],1),r("el-col",{attrs:{span:12}},[r("iep-form-item",{staticClass:"form-half",attrs:{prop:"licensesInspectionExpireDate","label-name":"船舶检验证有效期"}},[r("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.licensesInspectionExpireDate,callback:function(t){e.$set(e.form,"licensesInspectionExpireDate",t)},expression:"form.licensesInspectionExpireDate"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"主机总功率(kw)：",prop:"engineTotalPower"}},[r("el-input",{attrs:{oninput:"if(value>9999.99)value=9999.99",type:"number"},model:{value:e.form.engineTotalPower,callback:function(t){e.$set(e.form,"engineTotalPower",t)},expression:"form.engineTotalPower"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"主机功率(kw)：",prop:"mainEnginePower"}},[r("el-input",{attrs:{oninput:"if(value>9999.99)value=9999.99",type:"number"},model:{value:e.form.mainEnginePower,callback:function(t){e.$set(e.form,"mainEnginePower",t)},expression:"form.mainEnginePower"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"双控功率(kw)：",prop:"dualPower"}},[r("el-input",{attrs:{oninput:"if(value>9999.99)value=9999.99",type:"number"},model:{value:e.form.dualPower,callback:function(t){e.$set(e.form,"dualPower",t)},expression:"form.dualPower"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"主机型号：",prop:"mainEngineModel"}},[r("el-input",{attrs:{maxlength:"50"},model:{value:e.form.mainEngineModel,callback:function(t){e.$set(e.form,"mainEngineModel",t)},expression:"form.mainEngineModel"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"总吨位：",prop:"grossTonnage"}},[r("el-input",{attrs:{maxlength:"3",oninput:"if(value>999)value=999",type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))"},model:{value:e.form.grossTonnage,callback:function(t){e.$set(e.form,"grossTonnage",t)},expression:"form.grossTonnage"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船长（m）：",prop:"hullLength"}},[r("el-input",{attrs:{oninput:"if(value>999.99)value=999.99",type:"number"},model:{value:e.form.hullLength,callback:function(t){e.$set(e.form,"hullLength",t)},expression:"form.hullLength"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船体材料：",prop:"hullMaterial"}},[r("el-select",{model:{value:e.form.hullMaterial,callback:function(t){e.$set(e.form,"hullMaterial",t)},expression:"form.hullMaterial"}},e._l(e.$store.getters.dictGroup.tyb_ship_material,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船籍港：",prop:"portRegister"}},[r("el-select",{model:{value:e.form.portRegister,callback:function(t){e.$set(e.form,"portRegister",t)},expression:"form.portRegister"}},e._l(e.$store.getters.dictGroup.tyb_ship_port,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"渔具名称：",prop:"fishingGear"}},[r("el-select",{model:{value:e.form.fishingGear,callback:function(t){e.$set(e.form,"fishingGear",t)},expression:"form.fishingGear"}},e._l(e.$store.getters.dictGroup.tyb_fishing_gear,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"建造完工日期：",prop:"buildDate"}},[r("iep-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.buildDate,callback:function(t){e.$set(e.form,"buildDate",t)},expression:"form.buildDate"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"作业类型：",prop:"activityType"}},[r("el-select",{model:{value:e.form.activityType,callback:function(t){e.$set(e.form,"activityType",t)},expression:"form.activityType"}},e._l(e.$store.getters.dictGroup.tyb_resume_worktype,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"许可作业方式：",prop:"workMode"}},[r("el-select",{model:{value:e.form.workMode,callback:function(t){e.$set(e.form,"workMode",t)},expression:"form.workMode"}},e._l(e.$store.getters.dictGroup.tyb_work_mode,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"实际作业方式：",prop:"workMode"}},[r("el-select",{model:{value:e.form.workMode2,callback:function(t){e.$set(e.form,"workMode2",t)},expression:"form.workMode2"}},e._l(e.$store.getters.dictGroup.tyb_work_mode,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"主捕种类：",prop:"fishType"}},[r("el-input",{attrs:{maxlength:"100"},model:{value:e.form.fishType,callback:function(t){e.$set(e.form,"fishType",t)},expression:"form.fishType"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"型宽：",prop:"mouldedBreadth"}},[r("el-input",{attrs:{oninput:"if(value>999.99)value=999.99",type:"number"},model:{value:e.form.mouldedBreadth,callback:function(t){e.$set(e.form,"mouldedBreadth",t)},expression:"form.mouldedBreadth"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"型深：",prop:"mouldedDepth"}},[r("el-input",{attrs:{oninput:"if(value>999.99)value=999.99",type:"number"},model:{value:e.form.mouldedDepth,callback:function(t){e.$set(e.form,"mouldedDepth",t)},expression:"form.mouldedDepth"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"净吨位：",prop:"netTonnage"}},[r("el-input",{attrs:{oninput:"if(value>999)value=999",type:"number",onKeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))"},model:{value:e.form.netTonnage,callback:function(t){e.$set(e.form,"netTonnage",t)},expression:"form.netTonnage"}})],1)],1)],1),1!==e.type?r("el-form-item",{attrs:{label:""}},[r("operation-wrapper",[r("iep-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1):e._e()],1)],1)],1)},a=[],o=(r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("7f7f"),r("6b54"),r("6762"),r("2fdb"),r("ac6a"),r("ade36")),i=r("8b00"),l=r("da1c"),c=r("daa6"),s=r("7ded"),u=r("23d6"),d=r("5612"),p=r("b1f6");function m(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function f(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b={data:function(){var e=this;return{backOption:{isBack:!0,backPath:null,backFunction:function(){e.onGoBack()}},rules:i["l"],form:Object(i["i"])(),regions:{province:[],city:[],district:[],town:[],village:[]},regionChosen:{province:"",city:"",district:"",town:"",village:""},init:!1,shipNameList:[],userId:"",shipnameInfo:"",isState:!0,options:[],props:{value:"areaCode",label:"name",children:"childList"},arr:[],manager:!1,villageName:"",crewName:"",crewNames:[],partnerList:[],loading:!1,isPartner:!1,isPartnerSearch:!1,myPartner:[],editShareholder:{shipId:"",tybShipShareholderList:""}}},computed:{type:function(){return this.$route.query.see?1:this.$route.query.edit?2:3},shipId:function(){return this.$route.query.see?this.$route.query.see:this.$route.query.edit?this.$route.query.edit:0},getTitle:function(){var e="";return this.$route.query.see&&this.form.villageName&&(e="-所属基层："+this.form.villageName),"".concat(this.$route.query.see?"查看":this.$route.query.edit?"编辑":"新增","渔船信息").concat(e)}},created:function(){var e=this;this.getshipNameList(),(this.$route.query.see||this.$route.query.edit)&&this.shipId?this.getShipDetail():Object(u["c"])(33e10).then((function(t){e.options=t.data.data,e.options.forEach((function(t){e.$set(t,"childList",[])}))}))},mounted:function(){},methods:{selectMax:function(){var e=this.$refs.searchSelect.$children[0].$refs.input;e.setAttribute("maxlength",18)},cheackNo:function(){var e=this;16==this.form.shipNo.length?Object(o["u"])(this.form.shipNo).then((function(t){t.data.data&&t.data.data.shipId!=e.$route.query.edit&&(e.form.shipNo="",e.$message.error("渔船编号已存在"))})):this.$message.error("请输入16位渔船编号!")},getCrewNameList:function(e){var t=this;this.loading=!0,this.crewNames=[],18==e.length?Object(d["f"])(e).then((function(e){e.data.data?t.crewNames.push(e.data.data):(t.crewNames=[],t.$message.error(e.data.msg))})):this.crewNames=[],this.loading=!1},crewNameChange:function(e){var t=!1;if(e&&(this.crewName=e.idcard,this.partnerList.length&&this.partnerList.forEach((function(r){e.idcard!=r.idcard||(t=!0)})),!t)){var r={};r.address=e.address,r.idcard=e.idcard,r.phone=e.phone,r.positionId=e.positionId,r.realName=e.realName,this.$route.query.edit||this.$route.query.see?r.shipId=this.$route.query.edit:r.shipId="",this.partnerList.push(r)}},handleDel:function(e){this.partnerList=this.partnerList.filter((function(t){if(t.idcard!==e)return t}))},shipShareChange:function(e){1==e?(this.isPartner=!0,this.isPartnerSearch=!0):(this.isPartner=!1,this.isPartnerSearch=!1)},handleItemChange:function(e){var t=this;Object(u["c"])(e[e.length-1]).then((function(r){var n=r.data.data;t.getNode(t.options,e[e.length-1],n)}))},getNode:function(e,t,r){var n=this;e.forEach((function(e){e.areaCode==t?(e.childList=r,e.level<3&&e.childList.forEach((function(e){void 0===e.childList&&n.$set(e,"childList",[])}))):e.childList&&0!==e.childList.length&&n.getNode(e.childList,t,r)}))},getShipDetail:function(){var e=this;this.$route.query.see&&(this.isPartner=!0),Object(p["b"])(this.shipId).then((function(t){var r=t.data;e.partnerList=r.data})),Object(o["v"])(this.shipId).then((function(t){var r=t.data;r.data.villageId?Object(c["b"])(r.data.villageId).then((function(t){e.villageName=t.data.data.villageName})).then((function(){e.form=r.data,e.form.villageName=e.villageName,e.$route.query.edit&&1==e.form.shipShare&&(e.isPartner=!0,e.isPartnerSearch=!0)})):e.form=r.data}),(function(t){e.$message.error(t.message)}))},getarr:function(e){this.arr.push(e.areaCode),e.child&&this.getarr(e.child)},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){var r;t&&(e.$route.query.add?1==e.form.shipShare&&0==e.partnerList.length?e.$message.error("请至少添加一个股东信息"):16==e.form.shipNo.length?Object(o["h"])(e.form).then((function(t){var n=t.data;r=n.data.shipId,0===n.code&&e.$message.success("添加成功！")}),(function(t){e.$message.error(t.message)})).then((function(){2==e.form.shipShare&&(e.partnerList=[]),e.partnerList&&r&&(e.partnerLis=e.partnerList.map((function(e){e.shipId=r})),Object(p["a"])(e.partnerList).then((function(t){t.data.data||e.$message.error("股东信息添加失败")}))),e.onGoBack()})):e.$message.error("请输入16位渔船编号！"):e.$route.query.edit&&(1==e.form.shipShare&&0==e.partnerList.length?e.$message.error("请至少添加一个股东信息"):16==e.form.shipNo.length?Object(o["J"])(e.form).then((function(t){var r=t.data;0===r.code&&(e.$message.success("修改成功！"),e.onGoBack())}),(function(t){e.$message.error(t.message)})).then((function(){2==e.form.shipShare&&(e.partnerList=[]),e.editShareholder.shipId=e.$route.query.edit;var t=e.partnerList.map((function(e){return""!==e.id&&(e.id=""),e}));e.editShareholder.tybShipShareholderList=t,Object(p["c"])(e.editShareholder).then((function(t){t.data.data||e.$message.error("股东信息修改失败")}))})):e.$message.error("请输入16位渔船编号！")))}))},onGoBack:function(){this.$router.history.go(-1)},getshipNameList:function(){var e=this;Object(s["c"])().then((function(t){e.userId=t.data.data.sysUser.userId,t.data.data.roles.includes(112)&&(e.form.villageId=e.userId),t.data.data.roles.includes(111)?e.manager=!1:e.manager=!0,"4113"!=e.userId&&"4114"!=e.userId&&"4115"!=e.userId||(e.manager=!1),Object(l["e"])(e.userId).then((function(t){e.shipNameList=t.data.data.map((function(e){return{label:e.shipname,value:e.id}}))}))}))},showManager:function(){var e,t=m(this.shipNameList);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.shipNo||(this.manager=!1)}}catch(n){t.e(n)}finally{t.f()}},shipNameChange:function(e){var t=this;Object(l["c"])(e).then((function(e){t.shipnameInfo=e.data.data.shipname,Object(o["o"])(t.shipnameInfo).then((function(e){!1===e.data.data?(t.form={},t.form.shipName=t.shipnameInfo,t.isState=!1):(t.form=e.data.data,t.isState=!0)}))}))}},watch:{}},g=b,y=(r("a4dc"),r("2877")),v=Object(y["a"])(g,n,a,!1,null,"227cd581",null);t["default"]=v.exports},4917:function(e,t,r){"use strict";var n=r("cb7c"),a=r("9def"),o=r("0390"),i=r("5f1b");r("214f")("match",1,(function(e,t,r,l){return[function(r){var n=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=l(r,e,this);if(t.done)return t.value;var c=n(e),s=String(this);if(!c.global)return i(c,s);var u=c.unicode;c.lastIndex=0;var d,p=[],m=0;while(null!==(d=i(c,s))){var f=String(d[0]);p[m]=f,""===f&&(c.lastIndex=o(s,a(c.lastIndex),u)),m++}return 0===m?null:p}]}))},5612:function(e,t,r){"use strict";r.d(t,"i",(function(){return i})),r.d(t,"j",(function(){return l})),r.d(t,"l",(function(){return c})),r.d(t,"m",(function(){return s})),r.d(t,"r",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"t",(function(){return p})),r.d(t,"u",(function(){return m})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return h})),r.d(t,"g",(function(){return b})),r.d(t,"v",(function(){return g})),r.d(t,"f",(function(){return y})),r.d(t,"z",(function(){return v})),r.d(t,"k",(function(){return w})),r.d(t,"n",(function(){return O})),r.d(t,"h",(function(){return N})),r.d(t,"p",(function(){return j})),r.d(t,"x",(function(){return x})),r.d(t,"y",(function(){return k})),r.d(t,"w",(function(){return I})),r.d(t,"b",(function(){return $})),r.d(t,"q",(function(){return S})),r.d(t,"a",(function(){return E})),r.d(t,"s",(function(){return M})),r.d(t,"o",(function(){return L}));var n=r("b5c6"),a=r("2f9e"),o="/tmlms/crew";function i(e){return Object(n["a"])({url:"".concat(o,"/Page"),method:"get",params:e})}function l(e){return Object(n["a"])({url:"".concat(o,"/findByShipId?shipId=").concat(e),method:"get",params:e})}function c(e){return Object(n["a"])({url:"".concat(o,"/getHistoryByShipId?shipId=").concat(e.shipId),method:"get",params:e})}function s(e){return Object(n["a"])({url:"".concat(o,"/pageWithShip"),method:"get",params:e})}function u(e){return Object(n["a"])({url:"".concat(o,"/shipLogPage"),method:"get",params:e})}function d(e){return Object(n["a"])({url:"".concat(o,"/checkMoreRelations"),method:"post",data:e})}function p(e,t){return Object(n["a"])({url:"".concat(o,"/create?type=").concat(t),method:"post",data:e})}function m(e,t){return Object(n["a"])({url:"".concat(o,"/batchCreate?type=").concat(t),method:"post",data:e,timeout:3e5})}function f(e){return Object(n["a"])({url:"".concat(o,"/delete?idcard=").concat(e),method:"post"})}function h(e,t){return Object(n["a"])({url:"".concat(o,"/deleteRelation?idcard=").concat(e,"&&shipId=").concat(t),method:"post"})}function b(e,t){return Object(n["a"])({url:"".concat(o,"/edit?type=").concat(t),method:"post",data:e})}function g(e,t){return Object(n["a"])({url:"".concat(o,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}function y(e){return Object(n["a"])({url:"".concat(o,"/getCrewByidcard?idcard=").concat(e),method:"get"})}function v(e){return Object(n["a"])({url:"admin/file/upload/avatar",method:"post",data:e})}function w(e){return Object(n["a"])({url:"".concat(o,"/idcardcheck?idcard=").concat(e),method:"get"})}function O(e){return Object(n["a"])({url:"".concat(o,"/idcardcheck?idcard=").concat(e),method:"get"})}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"船员信息";return Object(a["a"])({url:"tmlms/tybmlmsExcelExport/downloadCrew",data:e,title:t})}function j(e){return Object(n["a"])({url:"".concat(o,"/badPage"),method:"get",params:e})}function x(e){return Object(n["a"])({url:"".concat(o,"/badUpdateBatch"),method:"post",data:e})}function k(e){return Object(n["a"])({url:"".concat(o,"/uploadBaseImage"),method:"post",data:e})}function I(e){return Object(n["a"])({url:"".concat(o,"/updateCertByIdcard"),method:"post",params:e})}function $(e){return Object(n["a"])({url:"".concat(o,"/changeShip"),method:"post",data:e})}function S(e){return Object(n["a"])({url:"".concat(o,"/getShipRelationByIdcard"),method:"get",params:e})}function E(e){return Object(n["a"])({url:"/tmlms/tybship/pageForChange",method:"get",params:e})}function M(e){return Object(n["a"])({url:"/tmlms/importTask/lookTask",method:"get",params:{taksId:e}})}function L(e){return Object(n["a"])({url:"/tmlms/crew_cert/newPage",method:"get",params:e})}},"8b00":function(e,t,r){"use strict";r.d(t,"e",(function(){return w})),r.d(t,"d",(function(){return O})),r.d(t,"h",(function(){return l})),r.d(t,"f",(function(){return a})),r.d(t,"l",(function(){return b})),r.d(t,"i",(function(){return m})),r.d(t,"j",(function(){return g})),r.d(t,"o",(function(){return v})),r.d(t,"g",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"k",(function(){return s})),r.d(t,"n",(function(){return c})),r.d(t,"m",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return p}));r("4917"),r("3b2b");var n=r("0e0b"),a=[{prop:"shipName",label:"渔船名"},{prop:"shipNo",label:"渔船编号"},{prop:"shipowner",label:"持证人"},{prop:"shipownerIdcard",label:"持证人身份证"},{prop:"hullLength",label:"船长(m)"}],o=[{prop:"realName",label:"姓名"},{prop:"idcard",label:"身份证号码"},{prop:"phone",label:"联系电话"},{prop:"positionId",label:"现任职位",dictName:"tyb_resume_position",type:"dictGroup"},{prop:"workStatus",label:"用工状态"}],i=[{prop:"idcard",label:"身份证号码"},{prop:"workStatus",label:"用工状态"},{prop:"phone",label:"手机号码"},{prop:"certName",label:"职务证书"},{prop:"flag",label:"来源"},{prop:"provinceIdName",label:"籍贯"},{prop:"signStatus",label:"是否培训",type:"dict"}],l={signStatus:{0:"否",1:"是"}},c=[{prop:"employeeName",label:"姓名"},{prop:"employeeIdcard",label:"身份证号码"},{prop:"employeePhone",label:"联系电话"},{prop:"employeePosition",label:"职位",dictName:"tyb_resume_position",type:"dictGroup"},{prop:"provinceIdName",label:"籍贯"}],s=[{prop:"shipName",label:"船名号"},{prop:"realname",label:"姓名"}],u=[{prop:"realName",label:"姓名"},{prop:"idcard",label:"身份证"},{prop:"positionId",label:"职位",dictName:"tyb_resume_position",type:"dictGroup"},{prop:"phone",label:"电话"},{prop:"address",label:"地址"}],d=[{prop:"realName",label:"姓名",width:"180"},{prop:"idcard",label:"身份证",width:"230"},{prop:"certNames",label:"职务证书"},{prop:"shipNames",label:"已登记的渔船"},{prop:"leftTime",label:"最近上船时间",width:"210"}],p=[{prop:"realName",label:"姓名"},{prop:"idcard",label:"身份证"},{prop:"shipId",label:"船名"},{prop:"flag",label:"上下船类型"},{prop:"sourceType",label:"来源"},{prop:"leftTime",label:"最近上船时间"}],m=function(){return{activityType:"",address:"",buildDate:"",createTime:"",dualPower:"",engineTotalPower:"",fishType:"",fishingGear:"",grossTonnage:"",hullLength:"",hullMaterial:"",licensesFishingExpireDate:"",licensesInspectionExpireDate:"",licensesNationalExpireDate:"",licensesOwnerExpireDate:"",licensesDateExpire:"",licensesDateIssue:"",licensesFishingNo:"",licensesInspectionNo:"",licensesNationalNo:"",licensesOwnerShip:"",mainEngineModel:"",mainEnginePower:"",mobile:"",mouldedBreadth:"",mouldedDepth:"",netTonnage:"",portRegister:"",shipId:"",shipName:"",shipNo:"",shipShare:"",shipowner:"",shipownerIdcard:"",updateTime:"",userId:"",workMode:"",workMode2:"",zipcode:"",regionId:""}};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new RegExp("^\\d{0,"+t+"}$");if(0===r)return n.test(e);var a=new RegExp("^\\d{0,"+t+"}\\.\\d{0,"+r+"}$");return n.test(e)||a.test(e)}function h(e,t,r){""===t?r(new Error):f(t,e.length,e.decimal)?r():r(new Error)}var b={regionId:[{required:!0,message:"该选项必填！",trigger:"blur"}],address:[{required:!0,message:"该选项必填！",trigger:"blur"}],createTime:[{required:!0,message:"该选项必填！",trigger:"blur"}],licensesFishingNo:[{required:!0,message:"该选项必填！",trigger:"blur"}],licensesOwnerShip:[{required:!0,message:"该选项必填！",trigger:"blur"}],mobile:[{required:!0,validator:h,trigger:"blur",length:11,decimal:0,message:"请输入正确的手机号码！"}],shipId:[{required:!0,message:"该选项必填！",trigger:"blur"}],shipName:[{required:!0,message:"该选项必填！",trigger:"blur"}],shipNo:[{required:!0,message:"该选项必填！",trigger:"blur"}],shipShare:[{required:!0,message:"该选项必填！",trigger:"change"}],shipowner:[{required:!0,message:"该选项必填！",trigger:"blur"}],shipownerIdcard:[{required:!0,trigger:"blur",max:18,min:18,decimal:0,message:"请输入正确的身份证/企业代码！"}],updateTime:[{required:!0,message:"该选项必填！",trigger:"blur"}]},g=function(){return{shipName:"",shipNo:"",shipowner:"",shipownerIdcard:""}},y=function(){return{shipName:"",shipNo:"",shipowner:"",shipownerIdcard:""}},v=function(e){var t=Object(n["g"])(y(),e);return t.shipName=e.shipName?e.shipName:null,t.shipNo=e.shipNo?e.shipNo:null,t.shipowner=e.shipowner?e.shipowner:null,t.shipownerIdcard=e.shipownerIdcard?e.shipownerIdcard:null,t};function w(e){return!e.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)}function O(e){return!e.match(/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/)}},a4dc:function(e,t,r){"use strict";r("2b77")},ade36:function(e,t,r){"use strict";r.d(t,"w",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"r",(function(){return c})),r.d(t,"d",(function(){return s})),r.d(t,"t",(function(){return u})),r.d(t,"v",(function(){return d})),r.d(t,"h",(function(){return p})),r.d(t,"J",(function(){return m})),r.d(t,"i",(function(){return f})),r.d(t,"s",(function(){return h})),r.d(t,"x",(function(){return b})),r.d(t,"y",(function(){return g})),r.d(t,"o",(function(){return y})),r.d(t,"u",(function(){return v})),r.d(t,"z",(function(){return w})),r.d(t,"k",(function(){return O})),r.d(t,"m",(function(){return N})),r.d(t,"l",(function(){return j})),r.d(t,"n",(function(){return x})),r.d(t,"j",(function(){return k})),r.d(t,"G",(function(){return I})),r.d(t,"H",(function(){return $})),r.d(t,"b",(function(){return S})),r.d(t,"D",(function(){return E})),r.d(t,"I",(function(){return M})),r.d(t,"C",(function(){return L})),r.d(t,"q",(function(){return _})),r.d(t,"A",(function(){return T})),r.d(t,"c",(function(){return P})),r.d(t,"B",(function(){return C})),r.d(t,"f",(function(){return D})),r.d(t,"g",(function(){return q})),r.d(t,"E",(function(){return B})),r.d(t,"a",(function(){return R})),r.d(t,"K",(function(){return G})),r.d(t,"p",(function(){return F})),r.d(t,"F",(function(){return z}));var n=r("b5c6"),a=r("2f9e"),o="/tybship/tybship";function i(e){return Object(n["a"])({url:"".concat(o,"/otherpage"),method:"get",params:e})}function l(e,t){return Object(n["a"])({url:"".concat(o,"/updateVillage?shipId=").concat(e,"&&villageId=").concat(t),method:"post"})}function c(){return Object(n["a"])({url:"/admin/org/page",method:"get"})}function s(e,t){return Object(n["a"])({url:"".concat(o,"/updateOrgId?shipId=").concat(e,"&&orgId=").concat(t),method:"post"})}function u(e){return Object(n["a"])({url:"".concat(o,"/").concat(e),method:"get",params:e})}function d(e){return Object(n["a"])({url:"".concat(o,"/").concat(e),method:"get"})}function p(e){return Object(n["a"])({url:"".concat(o,"/save"),method:"post",data:e})}function m(e){return Object(n["a"])({url:"".concat(o,"/update"),method:"post",data:e})}function f(e){return Object(n["a"])({url:"".concat(o,"/del/").concat(e),method:"post"})}function h(e){return Object(n["a"])({url:"".concat(o,"/mypage"),method:"get",params:e})}function b(e){return Object(n["a"])({url:"".concat(o,"/findship/").concat(e),method:"get"})}function g(e){return Object(n["a"])({url:"".concat(o,"/findshipWithOutOrg/").concat(e),method:"get"})}function y(e){return Object(n["a"])({url:"/tmlms/tybship/findmyship/".concat(e),method:"get"})}function v(e){return Object(n["a"])({url:"".concat(o,"/searchByshipNo"),method:"get",params:{shipNo:e}})}function w(e){return Object(n["a"])({url:"".concat(o,"/newpageV2"),method:"get",params:e})}function O(e){return Object(a["a"])({url:"tybship/tybshipExcelExport/downShipInfo",data:e,title:"渔船信息"})}function N(e){return Object(a["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrew",data:e,title:"开航登记表-"+e.shipName})}function j(e){return Object(a["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewRecord",data:e,title:"实名登记备案表-"+e.shipName})}function x(e){return Object(a["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewTwoOld ",data:e,title:"船员登记表-"+e.shipName})}function k(e){return Object(a["a"])({url:"tmlms/tybmlmsExcelExport/downContractModel",data:e,title:e.shipName})}function I(e){return Object(n["a"])({url:"tmlms/tyb_order/page",method:"get",params:e})}function $(e){return Object(n["a"])({url:"tmlms/tyb_order/getById",method:"get",params:e})}function S(e){return Object(n["a"])({url:"tmlms/tyb_order/agree",method:"post",data:e})}function E(e){return Object(n["a"])({url:"tmlms/tyb_order/reject",method:"post",data:e})}function M(e){return Object(n["a"])({url:"/tmlms/tybPortRecord/page",method:"get",params:e})}function L(e){return Object(n["a"])({url:"/tmlms/tybPortRecord/lastRecord",method:"get",params:e})}function _(e){return Object(n["a"])({url:"/tmlms/tybPortRecord/getCrewByRecordId",method:"get",params:e})}function T(e){return Object(n["a"])({url:"/tybship/tybship/info/".concat(e),method:"get"})}function P(e){return Object(n["a"])({url:"/tmlms/crew_cert/certStandard/".concat(e),method:"get"})}function C(e){return Object(n["a"])({url:"/tmlms/investigationReport/pageByShipName?shipName=".concat(e),method:"get"})}function D(e){return Object(n["a"])({url:"/tmlms/crew/countContractByShipId?shipId=".concat(e),method:"get"})}function q(e){return Object(n["a"])({url:"/tmlms/tybPortRecord/page",method:"get",params:e})}function B(e){return Object(n["a"])({url:"/tmlms/tybTroubleshootReport/pageByShipNo",method:"get",params:e})}function R(e){return Object(n["a"])({url:"/tmlms/tyb_order/pageByShipName",method:"get",params:e})}function G(e){return Object(n["a"])({url:"/tmlms/verification/page",method:"get",params:e})}function F(e){return console.log(e),Object(n["a"])({url:"/tmlms/tyb_order/getById?id=".concat(e.id),method:"get"})}function z(e){return Object(n["a"])({url:"/tmlms/tybmlmsExcelExport/downVerification",method:"post",headers:{"Content-Type":"application/json"},responseType:"arraybuffer",data:e}).then((function(e){var t=new Blob([e.data],{type:"application/vnd.ms-excel"}),r=document.createElement("a");r.href=window.URL.createObjectURL(t),r.download="实船鉴证.xls",r.click()}))}},b1f6:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return l}));var n=r("b5c6"),a="/tmlms/tybshipshareholder";function o(e){return Object(n["a"])({url:"".concat(a,"/savebatch"),method:"post",data:e})}function i(e){return Object(n["a"])({url:"".concat(a,"/updatebatch"),method:"post",data:e})}function l(e){return Object(n["a"])({url:"".concat(a,"/getHolders/").concat(e),method:"get",params:e})}},da1c:function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return s}));var n=r("b5c6"),a="/tmlms/tybvillageshipinfo";function o(e){return Object(n["a"])({url:"".concat(a,"/getbyuser/").concat(e),method:"get"})}function i(e){return Object(n["a"])({url:"".concat(a,"/batchship"),method:"post",data:e})}function l(e,t){return Object(n["a"])({url:"".concat(a,"/batchedit?userId=").concat(t),method:"post",data:e})}function c(e){return Object(n["a"])({url:"".concat(a,"/").concat(e),method:"get"})}function s(e){return Object(n["a"])({url:"".concat(a,"/getbyShipowner"),method:"get",params:{shipowner:e}})}},daa6:function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return i})),r.d(t,"i",(function(){return l})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return u})),r.d(t,"k",(function(){return d})),r.d(t,"h",(function(){return p})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return f})),r.d(t,"j",(function(){return h}));var n=r("b5c6"),a="/tmlms/village";function o(e){return Object(n["a"])({url:"".concat(a,"/page"),method:"get",params:e})}function i(){return Object(n["a"])({url:"".concat(a,"/getVillageByOrg"),method:"get"})}function l(e,t){return Object(n["a"])({url:"".concat(a,"/create?type=").concat(t),method:"post",data:e})}function c(e){return Object(n["a"])({url:"".concat(a,"/delete?userId=").concat(e),method:"post"})}function s(e,t){return Object(n["a"])({url:"".concat(a,"/edit?type=").concat(t),method:"post",data:e})}function u(e){return Object(n["a"])({url:"".concat(a,"/detail?userId=").concat(e),method:"get"})}function d(e,t){return Object(n["a"])({url:"".concat(a,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}function p(e){return Object(n["a"])({url:"".concat(a,"/page/villageshipowner"),method:"get",params:e})}function m(e){return Object(n["a"])({url:"".concat(a,"/getByVillagename"),method:"get",params:e})}function f(e){return Object(n["a"])({url:"/tmlms/relationship/countRecordWithShip",method:"get",params:e})}function h(e){return Object(n["a"])({url:"/tmlms/trainMeet/createTime?id=".concat(e.id,"&type=").concat(e.type),method:"post"})}}}]);