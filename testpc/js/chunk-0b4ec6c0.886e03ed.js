(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b4ec6c0"],{"1cf0":function(t,e,r){"use strict";r.d(e,"d",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return s})),r.d(e,"e",(function(){return c})),r.d(e,"b",(function(){return l}));var a=r("b5c6"),o="/tybship/tybshipmanager";function n(t){return Object(a["a"])({url:"/tmlms/tybshiphaver/otherpage",method:"get",params:t})}function i(t,e){return Object(a["a"])({url:"/tmlms/tybshiphaver/getShiphaver?shipName=".concat(t,"&bindType=").concat(e),method:"get"})}function s(t){return Object(a["a"])({url:"".concat(o,"/save"),method:"post",data:t})}function c(t){return Object(a["a"])({url:"".concat(o,"/update"),method:"post",data:t})}function l(t){return Object(a["a"])({url:"".concat(o,"/del/").concat(t),method:"post"})}},"2f9e":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("ac6a"),r("28a5"),r("a481");var a=r("b5c6");function o(t){var e=t.url,r=t.method,o=void 0===r?"post":r,i=t.data,s=void 0===i?{}:i,c=t.title,l=void 0===c?"":c;return new Promise((function(t){return Object(a["a"])({url:e,method:o,headers:{responseType:"arraybuffer"},data:s,responseType:"blob"}).then((function(e){n({title:l,response:e}).then((function(){t()}))}))}))}function n(t){var e=t.title,r=void 0===e?"":e,a=t.response,o=i(a.headers["content-disposition"].replace(/"/g,""));return new Promise((function(t){var e=a.headers,n=new Blob([a.data],{type:e["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,r);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=r?"".concat(r,".").concat(o.suffix):o.filename,document.body.appendChild(i),i.style.display="none",i.click()}t()}))}function i(t){var e={},r=t.split(";");return r.forEach((function(t){var r=t.replace(/^\s+|\s+$/g,""),a=r.split("=");a[1]?e[a[0]]=a[1]:e[a[0]]=a[0]})),e.suffix=e.filename.split(".")[1],e}},6246:function(t,e,r){"use strict";r("db90")},"6b86":function(t,e,r){"use strict";r("93fb")},"79db5":function(t,e,r){"use strict";r("dfbe")},"8ee4":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contract"},[r("basic-container",{attrs:{id:"pdfDom"}},[r("page-header",{attrs:{title:t.title}}),r("el-form",{ref:"form",staticClass:"form",attrs:{model:t.formData,size:"small","label-width":"120px",rules:t.rules}},[r("el-container",[r("el-aside",{staticClass:"side"},[r("div",{staticClass:"tex"},[t._v("持证人信息")])]),r("el-container",[r("el-header",{staticClass:"head"}),r("el-main",{staticClass:"mai"},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"持证人姓名：",prop:"shipownerName"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"6",disabled:t.shipowner},model:{value:t.formData.shipownerName,callback:function(e){t.$set(t.formData,"shipownerName",e)},expression:"formData.shipownerName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"身份证号：",prop:"shipownerIdcard"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"18",disabled:t.shipowner},model:{value:t.formData.shipownerIdcard,callback:function(e){t.$set(t.formData,"shipownerIdcard",e)},expression:"formData.shipownerIdcard"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船名：",prop:"shipName"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"20",disabled:t.shipowner},model:{value:t.formData.shipName,callback:function(e){t.$set(t.formData,"shipName",e)},expression:"formData.shipName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船舶登记号：",prop:"shipLicenses"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"20",disabled:t.shipowner},model:{value:t.formData.shipLicenses,callback:function(e){t.$set(t.formData,"shipLicenses",e)},expression:"formData.shipLicenses"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系电话：",prop:"shipownerPhone"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"11"},on:{blur:t.changeInfor},model:{value:t.formData.shipownerPhone,callback:function(e){t.$set(t.formData,"shipownerPhone",e)},expression:"formData.shipownerPhone"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"家庭地址：",prop:"shipownerAddr"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"20"},on:{blur:t.changeInfor},model:{value:t.formData.shipownerAddr,callback:function(e){t.$set(t.formData,"shipownerAddr",e)},expression:"formData.shipownerAddr"}})],1)],1)],1)],1)],1)],1),r("el-container",[r("el-aside",{staticClass:"sidea"},[r("div",{staticClass:"tex"},[t._v("甲方（雇主）")])]),r("el-container",[r("el-header",{staticClass:"head"}),r("el-main",{staticClass:"mai"},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"姓名：",prop:"employerName"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"6",disabled:t.employer},model:{value:t.formData.employerName,callback:function(e){t.$set(t.formData,"employerName",e)},expression:"formData.employerName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"身份证号：",prop:"employerIdcard"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"18",disabled:t.employer},model:{value:t.formData.employerIdcard,callback:function(e){t.$set(t.formData,"employerIdcard",e)},expression:"formData.employerIdcard"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"签约人身份性质：",prop:"employerProp"}},[r("el-radio-group",{on:{change:t.employerPropChange},model:{value:t.formData.employerProp,callback:function(e){t.$set(t.formData,"employerProp",e)},expression:"formData.employerProp"}},[r("el-radio",{attrs:{label:1}},[t._v("船舶持证人")]),r("el-radio",{attrs:{label:2}},[t._v("船舶承租人")]),r("el-radio",{attrs:{label:3}},[t._v("船长或授权代理人")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船名及船舶登记号："}},[r("div",[!t.formData.shipName||t.formData.shipName instanceof Object?t._e():r("div",{staticStyle:{"font-size":"10px"}},[t._v("船名："+t._s(t.formData.shipName))]),t.formData.shipName.shipName?r("div",{staticStyle:{"font-size":"10px"}},[t._v("船名："+t._s(t.formData.shipName.shipName))]):t._e(),t.formData.shipName||t.formData.shipName.shipName?t._e():r("div",{staticStyle:{"font-size":"10px"}},[t._v("船名：")]),r("div",{staticStyle:{"font-size":"10px"}},[t._v("船舶登记号："+t._s(t.formData.shipLicenses))])])])],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系电话：",prop:"employerPhone"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"11",disabled:t.employer},model:{value:t.formData.employerPhone,callback:function(e){t.$set(t.formData,"employerPhone",e)},expression:"formData.employerPhone"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船舶是否共有：",prop:"shipJoint"}},[r("el-radio-group",{model:{value:t.formData.shipJoint,callback:function(e){t.$set(t.formData,"shipJoint",e)},expression:"formData.shipJoint"}},[r("el-radio",{attrs:{label:1}},[t._v("是，"),r("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"人数（数字）",size:"mini",type:"number"},model:{value:t.formData.shipJointYes,callback:function(e){t.$set(t.formData,"shipJointYes",e)},expression:"formData.shipJointYes"}}),t._v("共有（权证附后）")],1),r("el-radio",{attrs:{label:0}},[t._v("否，"+t._s(t.formData.shipownerName)+" 独有")])],1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"地址：",prop:"employerAddr"}},[r("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"20",disabled:t.employer},model:{value:t.formData.employerAddr,callback:function(e){t.$set(t.formData,"employerAddr",e)},expression:"formData.employerAddr"}})],1)],1)],1)],1)],1)],1)],1),r("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},["edit"==t.$route.query.operate?r("iep-button",{staticStyle:{"margin-right":"20px"},attrs:{disabeld:!1,type:"primary"},on:{click:t.handleUpload}},[t._v("更新")]):t._e(),r("iep-button",{staticStyle:{"margin-right":"20px"},attrs:{disabeld:!1,type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")]),r("iep-button",{attrs:{disabeld:!1},on:{click:t.handleBack}},[t._v("返回")])],1)],1)],1)},o=[],n=r("4360"),i=r("1cf0"),s=r("ade36"),c=r("b5c6"),l="/tmlms/tybContractModel";function m(t){return Object(c["a"])({url:"".concat(l,"/save"),method:"post",data:t})}function d(t){return Object(c["a"])({url:"".concat(l,"/update"),method:"post",data:t})}function p(t){return Object(c["a"])({url:"".concat(l,"/getByShipName?shipName=").concat(t),method:"get",params:t})}function u(t){return Object(c["a"])({url:"/tmlms/tybContractModel/updateWithShip",method:"post",data:t})}var h={props:{record:{},type:{}},data:function(){return{formData:{shipownerName:"",shipownerIdcard:"",shipName:"",shipLicenses:"",shipownerPhone:"",shipownerAddr:"",employerName:"",employerIdcard:"",employerProp:1,employerPhone:"",shipJoint:0,otherContent:"",shipJointYes:"",shipJointNo:"",employerAddr:""},rules:{shipownerName:[{required:!0,message:"请输入持证人姓名",trigger:"blur"}],shipownerIdcard:[{required:!0,message:"请输入持证人身份证号",trigger:"blur"}],shipName:[{required:!0,message:"请输入持证人船名",trigger:"blur"}],shipLicenses:[{required:!0,message:"请输入持证人船舶登记号",trigger:"blur"}],shipownerPhone:[{required:!0,message:"请输入持证人联系电话",trigger:"blur"}],shipownerAddr:[{required:!0,message:"请输入持证人家庭地址",trigger:"blur"}],employerName:[{required:!0,message:"请输入甲方（雇主)姓名",trigger:"blur"}],employerIdcard:[{required:!0,message:"请输入甲方（雇主)身份证号",trigger:"blur"}],employerProp:[{required:!0,message:"请输入签约人身份性质",trigger:"blur"}],employerPhone:[{required:!0,message:"请输入甲方（雇主)联系电话",trigger:"blur"}],employerAddr:[{required:!0,message:"请输入甲方（雇主)地址",trigger:"blur"}]},headers:{Authorization:"Bearer "+n["a"].getters.access_token},isLicenses:!1,isContract:!1,shipowner:!1,employee:!1,checkEmployeeIdcard:!1,employer:!1,title:""}},created:function(){this.getShipDetail(),this.getTitle()},methods:{changeInfor:function(){1==this.formData.employerProp&&(this.formData.employerPhone=this.formData.shipownerPhone,this.formData.employerAddr=this.formData.shipownerAddr)},getTitle:function(){this.title=this.$route.params.shipName+"渔船生成合同模板"},getShipDetail:function(){var t=this;"add"==this.$route.query.operate&&Object(s["o"])(this.$route.params.shipName).then((function(e){var r=e.data.data;t.formData.shipownerName=r.shipowner,t.formData.shipownerIdcard=r.shipownerIdcard,t.formData.shipName=r.shipName,t.formData.shipLicenses=r.licensesOwnerShip,t.formData.shipownerPhone=r.mobile,t.formData.shipownerAddr=r.address,t.shipowner=!0,t.formData.employerName=t.formData.shipownerName,t.formData.employerIdcard=t.formData.shipownerIdcard,t.formData.employerPhone=t.formData.shipownerPhone,t.formData.employerAddr=t.formData.shipownerAddr,t.employer=!0})),"edit"==this.$route.query.operate&&p(this.$route.params.shipName).then((function(e){t.formData=e.data.data,t.shipowner=!0,1==t.formData.employerProp&&(t.employer=!0)}))},handleBack:function(){this.$router.go(-1)},employerPropChange:function(t){var e=this;1===t?(this.formData.employerName=this.formData.shipownerName,this.formData.employerIdcard=this.formData.shipownerIdcard,this.formData.employerPhone=this.formData.shipownerPhone,this.formData.employerAddr=this.formData.shipownerAddr,this.employer=!0):2===t?(this.formData.employerName="",this.formData.employerIdcard="",this.formData.employerPhone="",this.formData.employerAddr="",Object(i["c"])(this.formData.shipName,2).then((function(t){t.data.data&&(e.formData.employerName=t.data.data.realname,e.formData.employerIdcard=t.data.data.idcard,e.formData.employerPhone=t.data.data.phone,e.formData.employerAddr=t.data.data.address)})),this.employer=!1):3===t&&(this.formData.employerName="",this.formData.employerIdcard="",this.formData.employerPhone="",this.formData.employerAddr="",this.employer=!1)},handleUpload:function(){var t=this;u({shipName:this.formData.shipName,contractModelId:this.formData.contractModelId}).then((function(e){console.log(e),t.getShipDetail()}))},handleSubmit:function(){var t=this;this.formData.shipJointNo=this.formData.shipownerName,this.formData.shipName.shipName&&(this.formData.shipName=this.formData.shipName.shipName),this.$refs["form"].validate((function(e){e?t.$confirm("请确认当前合同信息是否正确，提交后将无法修改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(t.formData),"add"==t.$route.query.operate?m(t.formData).then((function(e){console.log(e),t.$message.success("合同模板已生成"),t.$router.go(-1)})):"edit"==t.$route.query.operate&&d(t.formData).then((function(){t.$message.success("合同模板修改成功"),t.$router.go(-1)}))})):t.$message.error("请确认已经填写了所有必填信息！")}))}}},f=h,b=(r("79db5"),r("6b86"),r("6246"),r("2877")),y=Object(b["a"])(f,a,o,!1,null,"761f3141",null);e["default"]=y.exports},"93fb":function(t,e,r){},ade36:function(t,e,r){"use strict";r.d(e,"w",(function(){return i})),r.d(e,"e",(function(){return s})),r.d(e,"r",(function(){return c})),r.d(e,"d",(function(){return l})),r.d(e,"t",(function(){return m})),r.d(e,"v",(function(){return d})),r.d(e,"h",(function(){return p})),r.d(e,"J",(function(){return u})),r.d(e,"i",(function(){return h})),r.d(e,"s",(function(){return f})),r.d(e,"x",(function(){return b})),r.d(e,"y",(function(){return y})),r.d(e,"o",(function(){return g})),r.d(e,"u",(function(){return w})),r.d(e,"z",(function(){return D})),r.d(e,"k",(function(){return v})),r.d(e,"m",(function(){return N})),r.d(e,"l",(function(){return x})),r.d(e,"n",(function(){return O})),r.d(e,"j",(function(){return j})),r.d(e,"G",(function(){return I})),r.d(e,"H",(function(){return P})),r.d(e,"b",(function(){return S})),r.d(e,"D",(function(){return _})),r.d(e,"I",(function(){return $})),r.d(e,"C",(function(){return k})),r.d(e,"q",(function(){return C})),r.d(e,"A",(function(){return A})),r.d(e,"c",(function(){return B})),r.d(e,"B",(function(){return E})),r.d(e,"f",(function(){return q})),r.d(e,"g",(function(){return J})),r.d(e,"E",(function(){return L})),r.d(e,"a",(function(){return R})),r.d(e,"K",(function(){return T})),r.d(e,"p",(function(){return z})),r.d(e,"F",(function(){return U}));var a=r("b5c6"),o=r("2f9e"),n="/tybship/tybship";function i(t){return Object(a["a"])({url:"".concat(n,"/otherpage"),method:"get",params:t})}function s(t,e){return Object(a["a"])({url:"".concat(n,"/updateVillage?shipId=").concat(t,"&&villageId=").concat(e),method:"post"})}function c(){return Object(a["a"])({url:"/admin/org/page",method:"get"})}function l(t,e){return Object(a["a"])({url:"".concat(n,"/updateOrgId?shipId=").concat(t,"&&orgId=").concat(e),method:"post"})}function m(t){return Object(a["a"])({url:"".concat(n,"/").concat(t),method:"get",params:t})}function d(t){return Object(a["a"])({url:"".concat(n,"/").concat(t),method:"get"})}function p(t){return Object(a["a"])({url:"".concat(n,"/save"),method:"post",data:t})}function u(t){return Object(a["a"])({url:"".concat(n,"/update"),method:"post",data:t})}function h(t){return Object(a["a"])({url:"".concat(n,"/del/").concat(t),method:"post"})}function f(t){return Object(a["a"])({url:"".concat(n,"/mypage"),method:"get",params:t})}function b(t){return Object(a["a"])({url:"".concat(n,"/findship/").concat(t),method:"get"})}function y(t){return Object(a["a"])({url:"".concat(n,"/findshipWithOutOrg/").concat(t),method:"get"})}function g(t){return Object(a["a"])({url:"".concat(n,"/findmyship/").concat(t),method:"get"})}function w(t){return Object(a["a"])({url:"".concat(n,"/searchByshipNo"),method:"get",params:{shipNo:t}})}function D(t){return Object(a["a"])({url:"".concat(n,"/newpage"),method:"get",params:t})}function v(t){return Object(o["a"])({url:"tybship/tybshipExcelExport/downShipInfo",data:t,title:"渔船信息"})}function N(t){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrew",data:t,title:"开航登记表-"+t.shipName})}function x(t){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewRecord",data:t,title:"实名登记备案表-"+t.shipName})}function O(t){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewTwoOld ",data:t,title:"船员登记表-"+t.shipName})}function j(t){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downContractModel",data:t,title:t.shipName})}function I(t){return Object(a["a"])({url:"tmlms/tyb_order/page",method:"get",params:t})}function P(t){return Object(a["a"])({url:"tmlms/tyb_order/getById",method:"get",params:t})}function S(t){return Object(a["a"])({url:"tmlms/tyb_order/agree",method:"post",data:t})}function _(t){return Object(a["a"])({url:"tmlms/tyb_order/reject",method:"post",data:t})}function $(t){return Object(a["a"])({url:"/tmlms/tybPortRecord/page",method:"get",params:t})}function k(t){return Object(a["a"])({url:"/tmlms/tybPortRecord/lastRecord",method:"get",params:t})}function C(t){return Object(a["a"])({url:"/tmlms/tybPortRecord/getCrewByRecordId",method:"get",params:t})}function A(t){return Object(a["a"])({url:"/tybship/tybship/info/".concat(t),method:"get"})}function B(t){return Object(a["a"])({url:"/tmlms/crew_cert/certStandard/".concat(t),method:"get"})}function E(t){return Object(a["a"])({url:"/tmlms/investigationReport/pageByShipName?shipName=".concat(t),method:"get"})}function q(t){return Object(a["a"])({url:"/tmlms/crew/countContractByShipId?shipId=".concat(t),method:"get"})}function J(t){return Object(a["a"])({url:"/tmlms/tybPortRecord/page",method:"get",params:t})}function L(t){return Object(a["a"])({url:"/tmlms/tybTroubleshootReport/pageByShipNo",method:"get",params:t})}function R(t){return Object(a["a"])({url:"/tmlms/tyb_order/pageByShipName",method:"get",params:t})}function T(t){return Object(a["a"])({url:"/tmlms/verification/page",method:"get",params:t})}function z(t){return console.log(t),Object(a["a"])({url:"/tmlms/tyb_order/getById?id=".concat(t.id),method:"get"})}function U(t){return Object(a["a"])({url:"/tmlms/tybmlmsExcelExport/downVerification",method:"post",headers:{"Content-Type":"application/json"},responseType:"arraybuffer",data:t}).then((function(t){var e=new Blob([t.data],{type:"application/vnd.ms-excel"}),r=document.createElement("a");r.href=window.URL.createObjectURL(e),r.download="实船鉴证.xls",r.click()}))}},db90:function(t,e,r){},dfbe:function(t,e,r){}}]);