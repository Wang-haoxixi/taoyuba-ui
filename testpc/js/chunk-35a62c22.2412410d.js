(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35a62c22"],{"0521":function(e,t,a){"use strict";a.d(t,"f",function(){return r}),a.d(t,"g",function(){return o}),a.d(t,"a",function(){return i}),a.d(t,"j",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"e",function(){return u}),a.d(t,"i",function(){return c}),a.d(t,"b",function(){return m}),a.d(t,"k",function(){return d}),a.d(t,"c",function(){return p}),a.d(t,"h",function(){return f});var n=a("b5c6");function r(e){return Object(n["a"])({url:"tmlms/exam_examination/oldPage",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/tmlms/exam_examination/".concat(e),method:"get",data:e})}function i(e){return Object(n["a"])({url:"tmlms/exam_examination/save",method:"post",data:e})}function s(e){return Object(n["a"])({url:"tmlms/exam_examination/update",method:"post",data:e})}function l(e){return Object(n["a"])({url:"tmlms/exam_question/kinds",method:"get",data:e})}function u(e){return Object(n["a"])({url:"tmlms/exam_question/levels?kind=".concat(e),method:"get",data:e})}function c(e){return Object(n["a"])({url:"tmlms/exam_question/page",method:"get",params:e})}function m(e){return Object(n["a"])({url:"tmlms/exam_question/batch_save",method:"post",data:e})}function d(e){return Object(n["a"])({url:"tmlms/exam_question/update",method:"post",data:e})}function p(e){return Object(n["a"])({url:"tmlms/exam_question/delete?id=".concat(e),method:"post",data:e})}function f(e){return Object(n["a"])({url:"tmlms/exam_question/".concat(e),method:"get",data:e})}},"0bad":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"iep-page-form"},[a("basic-container",[a("page-header",{attrs:{title:e.methodName+"试题",backOption:e.backOption}}),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"单题输入",name:"first"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"题型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择",size:"medium"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.index,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"考试分类",prop:"kind"}},[a("el-select",{attrs:{placeholder:"请选择",size:"medium"},on:{change:e.getLevel},model:{value:e.form.kind,callback:function(t){e.$set(e.form,"kind",t)},expression:"form.kind"}},e._l(e.kindList,function(e){return a("el-option",{key:e.kind,attrs:{label:e.kind,value:e.kind}})}),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职务等级",prop:"level"}},[a("el-select",{attrs:{placeholder:"请选择",size:"medium"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},e._l(e.levelList,function(e){return a("el-option",{key:e.level,attrs:{value:e.level}})}),1)],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"题目：",prop:"title"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),a("el-row",[e._l(e.testOptions,function(t,n){return a("div",{key:n},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"选项"+e.testOptions[n].key}},[a("el-input",{attrs:{size:"medium"},model:{value:e.testOptions[n].value,callback:function(t){e.$set(e.testOptions[n],"value",t)},expression:"testOptions[index].value"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"medium"},on:{click:function(a){return e.deleteItem(t,n)}}},[e._v("删除")])],1)],1)],1)}),a("el-row",[a("el-form-item",["GAPFILLING"!=e.form.type&&"ESSAYQUESTION"!=e.form.type?a("el-button",{on:{click:e.addItem}},[e._v("添加选项")]):e._e()],1)],1),a("el-form-item",{attrs:{label:"答案：",prop:"answer"}},[a("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.form.answer,callback:function(t){e.$set(e.form,"answer",t)},expression:"form.answer"}})],1)],2),a("el-form-item",{attrs:{label:""}},[a("operation-wrapper",[a("iep-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("form")}}},[e._v("保存")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"批量导入",name:"second"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:"/api/tmlms/word/import","on-error":e.handleError,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.handleImport,multiple:"",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("批量导入题目")])],1)],1)],1)],1)],1)},r=[],o=(a("7f7f"),a("0521")),i=a("b0e4"),s=a("4360"),l={data:function(){return{backOption:{isBack:!0,backPath:this.$route.query.redirect},rules:i["b"],testFrom:{examQuestionList:[]},testOptions:[],form:{title:"",kind:"",level:"",options:"",answer:"",tag:"1",type:"RADIO"},typeList:[{label:"单选题",value:"RADIO"},{label:"判断题",value:"CHECKED"},{label:"复选题",value:"CHECKBOX"},{label:"填空题",value:"GAPFILLING"},{label:"简答题",value:"ESSAYQUESTION"}],activeName:"second",init:!1,headers:{Authorization:"Bearer "+s["a"].getters.access_token},isShow:!1,methodName:"",trainList:"",isTrain:!1,kindList:[],levelList:[],fileList:[]}},computed:{},mounted:function(){this.methodName=this.$route.query.edit?"编辑":"发布"},created:function(){this.$route.query.edit&&(this.activeName="first",this.getDetail()),this.getKindLevel()},methods:{addItem:function(){var e;this.testOptions.length?(e=this.testOptions[this.testOptions.length-1].key,this.testOptions.push({key:String.fromCharCode(e.charCodeAt()+1),value:""})):(e="A",this.testOptions.push({key:String.fromCharCode(e.charCodeAt()),value:""}))},handleError:function(e){var t=JSON.parse(e.message);this.$message({showClose:!0,message:t.msg,type:"error",duration:6e3})},deleteItem:function(e,t){this.testOptions.splice(t,1)},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return console.log(t),this.$confirm("确定移除 ".concat(e.name,"？"))},handleImport:function(e){var t=this;this.$confirm("上传成功，是否继续上传","提示",{confirmButtonText:"否",cancelButtonText:"是",type:"warning"}).then(function(){t.$router.go(-1)}),console.log("handleImport",e)},getKindLevel:function(){var e=this;Object(o["d"])().then(function(t){e.kindList=t.data.data})},getDetail:function(){var e=this;Object(o["h"])(this.$route.query.edit).then(function(t){e.getLevel(t.data.data.kind),e.form=t.data.data,e.testOptions=JSON.parse(e.form.options)})},getLevel:function(e){var t=this;this.form.level="",Object(o["e"])(e).then(function(e){t.levelList=e.data.data})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(t.form.options=JSON.stringify(t.testOptions),!e)return!1;t.$route.query.edit?Object(o["k"])(t.form).then(function(e){e.data.data?(t.$message({message:"".concat(t.methodName,"成功"),type:"success"}),t.$router.go(-1)):t.$message({message:"".concat(t.methodName,"失败"),type:"error"})}).catch(function(e){t.$message({message:e,type:"error"})}):(t.testFrom.examQuestionList=[],t.testFrom.examQuestionList.push(t.form),Object(o["b"])(t.testFrom).then(function(e){e.data.data?(t.$message({message:"".concat(t.methodName,"成功"),type:"success"}),t.$router.go(-1)):t.$message({message:"".concat(t.methodName,"失败"),type:"error"})})),console.log("aaa")})}},watch:{}},u=l,c=(a("a1bb"),a("0c7c")),m=Object(c["a"])(u,n,r,!1,null,null,null);t["default"]=m.exports},4281:function(e,t,a){},a1bb:function(e,t,a){"use strict";var n=a("4281"),r=a.n(n);r.a},b0e4:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n=[{label:"试题名称",prop:"title",width:"400"},{label:"试题分类",prop:"kind"},{label:"职务等级",prop:"level"},{label:"创建者",prop:"createByName"},{label:"创建时间",prop:"createTime"}],r={title:[{required:!0,message:"必填",trigger:"blur"}],kind:[{required:!0,message:"必填"}],type:[{required:!0,message:"必填",trigger:"blur"}],answer:[{required:!0,message:"必填",trigger:"change"}]}}}]);