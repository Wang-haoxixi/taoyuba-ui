(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6515f5a1"],{"2f9e":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("ac6a"),a("28a5"),a("a481");var n=a("b5c6");function r(t){var e=t.url,a=t.method,r=void 0===a?"post":a,o=t.data,i=void 0===o?{}:o,u=t.title,s=void 0===u?"":u;return new Promise((function(t){return Object(n["a"])({url:e,method:r,headers:{responseType:"arraybuffer"},data:i,responseType:"blob"}).then((function(e){c({title:s,response:e}).then((function(){t()}))}))}))}function c(t){var e=t.title,a=void 0===e?"":e,n=t.response,r=o(n.headers["content-disposition"].replace(/"/g,""));return new Promise((function(t){var e=n.headers,c=new Blob([n.data],{type:e["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(c,a);else{var o=document.createElement("a");o.href=window.URL.createObjectURL(c),o.download=a?"".concat(a,".").concat(r.suffix):r.filename,document.body.appendChild(o),o.style.display="none",o.click()}t()}))}function o(t){var e={},a=t.split(";");return a.forEach((function(t){var a=t.replace(/^\s+|\s+$/g,""),n=a.split("=");n[1]?e[n[0]]=n[1]:e[n[0]]=n[0]})),e.suffix=e.filename.split(".")[1],e}},"54b3":function(t,e,a){},5612:function(t,e,a){"use strict";a.d(e,"i",(function(){return o})),a.d(e,"j",(function(){return i})),a.d(e,"l",(function(){return u})),a.d(e,"m",(function(){return s})),a.d(e,"r",(function(){return d})),a.d(e,"c",(function(){return l})),a.d(e,"t",(function(){return p})),a.d(e,"u",(function(){return f})),a.d(e,"d",(function(){return m})),a.d(e,"e",(function(){return h})),a.d(e,"g",(function(){return b})),a.d(e,"v",(function(){return g})),a.d(e,"f",(function(){return v})),a.d(e,"z",(function(){return O})),a.d(e,"k",(function(){return w})),a.d(e,"n",(function(){return j})),a.d(e,"h",(function(){return y})),a.d(e,"p",(function(){return x})),a.d(e,"x",(function(){return k})),a.d(e,"y",(function(){return P})),a.d(e,"w",(function(){return S})),a.d(e,"b",(function(){return D})),a.d(e,"q",(function(){return B})),a.d(e,"a",(function(){return I})),a.d(e,"s",(function(){return N})),a.d(e,"o",(function(){return $}));var n=a("b5c6"),r=a("2f9e"),c="/tmlms/crew";function o(t){return Object(n["a"])({url:"".concat(c,"/Page"),method:"get",params:t})}function i(t){return Object(n["a"])({url:"".concat(c,"/findByShipId?shipId=").concat(t),method:"get",params:t})}function u(t){return Object(n["a"])({url:"".concat(c,"/getHistoryByShipId?shipId=").concat(t.shipId),method:"get",params:t})}function s(t){return Object(n["a"])({url:"".concat(c,"/pageWithShip"),method:"get",params:t})}function d(t){return Object(n["a"])({url:"".concat(c,"/shipLogPage"),method:"get",params:t})}function l(t){return Object(n["a"])({url:"".concat(c,"/checkMoreRelations"),method:"post",data:t})}function p(t,e){return Object(n["a"])({url:"".concat(c,"/create?type=").concat(e),method:"post",data:t})}function f(t,e){return Object(n["a"])({url:"".concat(c,"/batchCreate?type=").concat(e),method:"post",data:t,timeout:3e5})}function m(t){return Object(n["a"])({url:"".concat(c,"/delete?idcard=").concat(t),method:"post"})}function h(t,e){return Object(n["a"])({url:"".concat(c,"/deleteRelation?idcard=").concat(t,"&&shipId=").concat(e),method:"post"})}function b(t,e){return Object(n["a"])({url:"".concat(c,"/edit?type=").concat(e),method:"post",data:t})}function g(t,e){return Object(n["a"])({url:"".concat(c,"/review?status=").concat(t,"&userId=").concat(e),method:"post"})}function v(t){return Object(n["a"])({url:"".concat(c,"/getCrewByidcard?idcard=").concat(t),method:"get"})}function O(t){return Object(n["a"])({url:"admin/file/upload/avatar",method:"post",data:t})}function w(t){return Object(n["a"])({url:"".concat(c,"/idcardcheck?idcard=").concat(t),method:"get"})}function j(t){return Object(n["a"])({url:"".concat(c,"/idcardcheck?idcard=").concat(t),method:"get"})}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"船员信息";return Object(r["a"])({url:"tmlms/tybmlmsExcelExport/downloadCrew",data:t,title:e})}function x(t){return Object(n["a"])({url:"".concat(c,"/badPage"),method:"get",params:t})}function k(t){return Object(n["a"])({url:"".concat(c,"/badUpdateBatch"),method:"post",data:t})}function P(t){return Object(n["a"])({url:"".concat(c,"/uploadBaseImage"),method:"post",data:t})}function S(t){return Object(n["a"])({url:"".concat(c,"/updateCertByIdcard"),method:"post",params:t})}function D(t){return Object(n["a"])({url:"".concat(c,"/changeShip"),method:"post",data:t})}function B(t){return Object(n["a"])({url:"".concat(c,"/getShipRelationByIdcard"),method:"get",params:t})}function I(t){return Object(n["a"])({url:"/tmlms/tybship/pageForChange",method:"get",params:t})}function N(t){return Object(n["a"])({url:"/tmlms/importTask/lookTask",method:"get",params:{taksId:t}})}function $(t){return Object(n["a"])({url:"/tmlms/crew_cert/newPage",method:"get",params:t})}},"5bb4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract-box"},[a("basic-container",[a("page-header",{attrs:{title:"上船人员管理"}}),a("div",{staticClass:"shipowner_title"},[a("div",{staticStyle:{float:"right"}},[a("span",{staticStyle:{width:"120px"}},[a("el-input",{attrs:{placeholder:"船名号",size:"small",clearable:""},model:{value:t.params.shipName,callback:function(e){t.$set(t.params,"shipName",e)},expression:"params.shipName"}})],1),a("span",{staticStyle:{width:"120px"}},[a("el-input",{attrs:{placeholder:"身份证号",size:"small",clearable:""},model:{value:t.params.idcard,callback:function(e){t.$set(t.params,"idcard",e)},expression:"params.idcard"}})],1),a("span",{staticStyle:{width:"120px"}},[a("el-input",{attrs:{placeholder:"姓名",size:"small",clearable:""},model:{value:t.params.realName,callback:function(e){t.$set(t.params,"realName",e)},expression:"params.realName"}})],1),a("span",{staticStyle:{width:"150px"}},[a("el-select",{attrs:{placeholder:"请选择合同状态",size:"small"},model:{value:t.params.status,callback:function(e){t.$set(t.params,"status",e)},expression:"params.status"}},t._l(t.status,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-button",{attrs:{size:"small"},on:{click:t.getParamData}},[t._v("搜索")])],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.crewregisterList,stripe:""}},[t._l(t.options.columns,(function(e,n){return a("el-table-column",{key:n,attrs:{prop:e.value,label:e.text,width:e.css},scopedSlots:t._u([{key:"default",fn:function(n){return["dictGroup"===e.type?[a("div",[t._v(t._s(t.dictJS(e,n)))])]:"province"===e.type?[a("div",[t._v(t._s(t.provincesName(e,n)))])]:[a("iep-table-detail",{attrs:{value:n.row[e.value]}})]]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.manager?a("el-button",{attrs:{type:"text",icon:"el-icon-view",size:"mini"},on:{click:function(a){return t.handleView(e.row.idcard)}}},[t._v("查看\n            ")]):t._e()]}}])})],2),a("div",{staticStyle:{"text-align":"center",margin:"20px 0"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",total:t.total,"page-size":t.params.size},on:{"current-change":t.currentChange}})],1)],1)],1)},r=[],c=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=(a("96cf"),a("1da1")),i=(a("7f7f"),a("5612")),u=a("f112"),s=a("7ded"),d=a("c533b"),l=a("4151"),p=a.n(l),f=a("2f62");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={data:function(){return{crewregisterList:[],provinces:[],total:10,params:{current:1,size:10,idcard:"",realName:"",phone:"",status:""},exportParams:{idcard:"",realName:"",status:"",phone:"",remark:"",startDate:"",endDate:""},options:{expandAll:!1,columns:[{text:"船名号",value:"shipName"},{text:"身份证号码",value:"idcard"},{text:"姓名",value:"realName"},{text:"合同状态",value:"status"}]},status:[{label:"未关联合同",value:" "},{label:"已签合同",value:1}],manager:!1,showSwith:!1,userData:{roles:[]}}},methods:{provincesName:function(t,e){return e.row[t.value]?p()(this.provinces,"value")[e.row[t.value]].label:"暂无"},dictJS:function(t,e){return e.row[t.value]?"0"===e.row[t.value]?"暂无":p()(this.dictGroup[t.dictName],"value")[e.row[t.value]].label:"暂无"},currentChange:function(t){this.params.current=t,this.getData()},addShipowner:function(){this.$router.push({name:"detailBoatMan"})},handleView:function(t){this.$router.push({path:"/crewRegister/detail/".concat(t),query:{see:t}})},handleEdit:function(t){this.$router.push({name:"detailBoatMan",query:{edit:t}})},getProvince:function(){var t=this;Object(d["d"])(0).then((function(e){var a=e.data;t.provinces=a.data.map((function(t){return{label:t.name,value:t.areaCode}}))}))},getData:function(){var t=this;Object(u["b"])(this.params).then((function(e){t.crewregisterList=e.data.data.records,t.crewregisterList.map((function(t){1==t.status&&(t.status="已签约")}))}))},getParamData:function(){this.params.current=1,this.getData()},handleDel:function(t){var e=this;this.$confirm("此操作将永久删除该船员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["d"])(t).then((function(t){e.$message({type:"success",message:t.data.msg}),e.getData()})).catch((function(t){e.$message.error(t.data.msg)}))})).catch((function(){}))},getStatus:function(t,e){var a=this,n="";n=t?2:3,Object(i["v"])(n,e).then((function(t){a.$message({type:"success",message:t.data.msg}),a.getData()}))},isManager:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["c"])().then((function(t){return t.data.data}));case 2:this.userData=t.sent,-1===this.userData.roles.indexOf(111)&&-1===this.userData.roles.indexOf(1)&&-1===this.userData.roles.indexOf(112)||(this.manager=!0);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),isAdminPath:function(){1==this.$route.path.indexOf("admin")?this.showSwith=!0:this.showSwith=!1},exportInfo:function(){var t=this;Object(i["h"])(this.exportParams).catch((function(e){t.$message({type:"warning",message:e})}))}},computed:h({},Object(f["c"])(["dictGroup"])),created:function(){this.getData(),this.isManager(),this.getProvince(),this.isAdminPath()},filters:{typeFilter:function(t){var e={1:"审核中",2:"审核通过",3:"审核失败"};return e[t]}},watch:{"params.idcard":function(t){this.exportParams.idcard=t},"params.realName":function(t){this.exportParams.realName=t},"params.phone":function(t){this.exportParams.phone=t},"params.remark":function(t){this.exportParams.remark=t},"params.workStatus":function(t){this.exportParams.workStatus=t}}},g=b,v=(a("f23f"),a("2877")),O=Object(v["a"])(g,n,r,!1,null,"abc0f06a",null);e["default"]=O.exports},c533b:function(t,e,a){"use strict";a.d(e,"i",(function(){return i})),a.d(e,"f",(function(){return u})),a.d(e,"d",(function(){return s})),a.d(e,"g",(function(){return d})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return p})),a.d(e,"e",(function(){return f})),a.d(e,"j",(function(){return m})),a.d(e,"h",(function(){return h})),a.d(e,"b",(function(){return b}));var n=a("b5c6"),r="tmlms/crew",c="admin/region",o="admin/dict";function i(t){return Object(n["a"])({url:"".concat(c,"/getinfo/")+t,method:"get"})}function u(t){return Object(n["a"])({url:"".concat(o,"/type/")+t,method:"get"})}function s(t){return Object(n["a"])({url:"".concat(c,"/area"),method:"get",params:{parentCode:t}})}function d(t){return Object(n["a"])({url:"".concat(r,"/Page"),method:"get",params:t})}function l(t){return Object(n["a"])({url:"".concat(r,"/delete"),method:"post",params:{userId:t}})}function p(t){return Object(n["a"])({url:"".concat(r,"/create"),method:"post",data:t,params:{type:1}})}function f(t){return Object(n["a"])({url:"".concat(r,"/getCrewByUserId"),method:"get",params:{userId:t}})}function m(t){return Object(n["a"])({url:"".concat(r,"/edit"),method:"post",params:{type:1},data:t})}function h(t){return Object(n["a"])({url:"/tybship/tybregion/parent/".concat(t),method:"get"})}function b(t,e,a){return Object(n["a"])({url:"".concat(r,"/upWork?idcard=").concat(e,"&workStatus=").concat(a),method:"post",data:t})}},f112:function(t,e,a){"use strict";a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return o}));var n=a("b5c6"),r="/tmlms/crewRegiste";function c(t){return Object(n["a"])({url:"".concat(r,"/page"),method:"get",params:t})}function o(t){return Object(n["a"])({url:"".concat(r,"/details/").concat(t),method:"get",params:t})}},f23f:function(t,e,a){"use strict";a("54b3")}}]);