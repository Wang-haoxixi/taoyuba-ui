(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c47c1b88"],{4917:function(e,t,a){"use strict";var r=a("cb7c"),n=a("9def"),s=a("0390"),o=a("5f1b");a("214f")("match",1,function(e,t,a,c){return[function(a){var r=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=c(a,e,this);if(t.done)return t.value;var u=r(e),i=String(this);if(!u.global)return o(u,i);var d=u.unicode;u.lastIndex=0;var l,f=[],g=0;while(null!==(l=o(u,i))){var m=String(l[0]);f[g]=m,""===m&&(u.lastIndex=s(i,n(u.lastIndex),d)),g++}return 0===g?null:f}]})},6939:function(e,t,a){"use strict";a.d(t,"d",function(){return s}),a.d(t,"e",function(){return o}),a.d(t,"a",function(){return c}),a.d(t,"b",function(){return u}),a.d(t,"c",function(){return i}),a.d(t,"f",function(){return d});var r=a("b5c6"),n="/tmlms/agent";function s(e){return Object(r["a"])({url:"".concat(n,"/getPage"),method:"get",params:e})}function o(e,t){return Object(r["a"])({url:"".concat(n,"/create?type=").concat(t),method:"post",data:e})}function c(e){return Object(r["a"])({url:"".concat(n,"/remove?userId=").concat(e),method:"post"})}function u(e){return Object(r["a"])({url:"".concat(n,"/detail?userId=").concat(e),method:"get"})}function i(e,t){return Object(r["a"])({url:"".concat(n,"/edit?type=").concat(t),method:"post",data:e})}function d(e,t){return Object(r["a"])({url:"".concat(n,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}},9066:function(e,t,a){},a784:function(e,t,a){"use strict";var r=a("9066"),n=a.n(r);n.a},d9da:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-add"},[a("basic-container",[e.$route.query.userId?e._e():a("h1",[e._v(e._s(e.$route.query.see?"查看":e.$route.query.edit?"编辑":"新增")+"中介信息")]),e.$route.query.userId?a("h1",[e._v("完善个人信息")]):e._e(),a("el-form",{ref:"form",attrs:{model:e.agent,"label-width":"150px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中介名称:",prop:"agentName"}},[e.$route.query.see?a("div",[e._v(e._s(e.agent.agentName))]):a("el-input",{attrs:{placeholder:""},model:{value:e.agent.agentName,callback:function(t){e.$set(e.agent,"agentName",t)},expression:"agent.agentName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人:",prop:"contactName"}},[e.$route.query.see?a("div",[e._v(e._s(e.agent.contactName))]):a("el-input",{attrs:{placeholder:"",disabled:e.haveInfo.realName},model:{value:e.agent.contactName,callback:function(t){e.$set(e.agent,"contactName",t)},expression:"agent.contactName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[e.$route.query.see?a("div",[e._v(e._s(e.agent.phone))]):a("el-input",{attrs:{placeholder:"",disabled:e.haveInfo.phone},model:{value:e.agent.phone,callback:function(t){e.$set(e.agent,"phone",t)},expression:"agent.phone"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[e.$route.query.see?a("div",[e._v(e._s(e.agent.address))]):a("el-input",{attrs:{placeholder:""},model:{value:e.agent.address,callback:function(t){e.$set(e.agent,"address",t)},expression:"agent.address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"营业执照:",prop:"businessLicense"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:e.$route.query.see,action:"/api/admin/file/upload/avatar","show-file-list":!1,headers:e.headers,"on-success":e.handleAvatarSuccess}},[e.agent.businessLicense?a("img",{staticClass:"avatar",attrs:{src:e.agent.businessLicense}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[e.$route.query.see?e._e():a("el-button",{on:{click:e.save}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)],1)},n=[],s=(a("4917"),a("6939")),o=a("e420"),c=a("4360"),u={mixins:[o["a"]],data:function(){var e=function(e,t,a){""===t?a(new Error("请输入联系电话")):t.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)?a():a(new Error("请输入正确的手机号码!"))};return{haveInfo:{contactName:!1,phone:!1},agent:{businessLicense:"",phone:"",contactName:""},headers:{Authorization:"Bearer "+c["a"].getters.access_token},rules:{agentName:[{required:!0,message:"请输入名称",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],address:[{required:!0,message:"请输入联系地址",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e,trigger:"blur"}]},options:[],props:{value:"areaCode",label:"name",children:"children"}}},methods:{save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;var a=1;if(e.$route.query.edit){var r=JSON.parse(JSON.stringify(e.agent));e.$route.query.userId&&(a=2,r.userId=e.$route.query.userId),Object(s["c"])(r,a).then(function(t){e.$message({message:t.data.msg,type:"success"}),e.$router.go(-1)}).catch(function(t){e.$message.error(t.message)})}else{var n=JSON.parse(JSON.stringify(e.agent));e.$route.query.userId&&(a=2,n.userId=e.$route.query.userId),Object(s["e"])(n,a).then(function(t){e.$message({message:t.data.msg,type:"success"}),e.$router.go(-1)}).catch(function(t){e.$message.error(t.message)})}})},handleAvatarSuccess:function(e){this.agent.businessLicense=e.data.url,console.log(this.agent.businessLicense)}},computed:{},created:function(){var e=this;(this.$route.query.edit||this.$route.query.see)&&Object(s["b"])(this.$route.query.edit||this.$route.query.see).then(function(t){e.agent=t.data.data}),this.getInformation("agent",["phone","contactName"])}},i=u,d=(a("a784"),a("0c7c")),l=Object(d["a"])(i,r,n,!1,null,null,null);t["default"]=l.exports},e420:function(e,t,a){"use strict";a("7f7f");var r=a("7ded");t["a"]={data:function(){return{haveInfo:{}}},methods:{getInformation:function(e,t){var a=this;Object(r["c"])().then(function(r){-1===r.data.data.roles.indexOf(1)&&-1===r.data.data.roles.indexOf(111)&&(r.data.data.sysUser.phone&&(a.$set(a.haveInfo,"phone",!0),a[e][t[0]]=r.data.data.sysUser.phone),r.data.data.sysUser.realName&&(a.$set(a.haveInfo,"realName",!0),a[e][t[1]]=r.data.data.sysUser.realName),r.data.data.sysUser.idCard&&[t[2]]&&(a.$set(a.haveInfo,"idcard",!0),a[e].idcard=r.data.data.sysUser.idCard))})}}}}}]);