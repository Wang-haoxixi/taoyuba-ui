(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dfe7c514"],{"1e7a":function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"f",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return c}));var n=r("b5c6"),a="/tmlms/dept";function i(e){return Object(n["a"])({url:"".concat(a,"/page"),method:"get",params:e})}function o(e,t){return Object(n["a"])({url:"".concat(a,"/create?type=").concat(t),method:"post",data:e})}function s(e){return Object(n["a"])({url:"".concat(a,"/delete?userId=").concat(e),method:"post"})}function u(e,t){return Object(n["a"])({url:"".concat(a,"/edit?type=").concat(t),method:"post",data:e})}function l(e){return Object(n["a"])({url:"".concat(a,"/detail?userId=").concat(e),method:"get"})}function c(e){return Object(n["a"])({url:"".concat(a,"/editSort"),method:"post",data:e})}},4917:function(e,t,r){"use strict";var n=r("cb7c"),a=r("9def"),i=r("0390"),o=r("5f1b");r("214f")("match",1,(function(e,t,r,s){return[function(r){var n=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=s(r,e,this);if(t.done)return t.value;var u=n(e),l=String(this);if(!u.global)return o(u,l);var c=u.unicode;u.lastIndex=0;var d,p=[],m=0;while(null!==(d=o(u,l))){var g=String(d[0]);p[m]=g,""===g&&(u.lastIndex=i(l,a(u.lastIndex),c)),m++}return 0===m?null:p}]}))},"4e21":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"training_detail"},[e.show?r("basic-container",[r("div",{staticStyle:{display:"flex"}},[e.$route.query.userId?e._e():r("h1",{staticStyle:{flex:"1"}},[e._v(e._s(e.$route.query.see?"查看":e.$route.query.edit?"编辑":"新增")+"机构信息")]),e.$route.query.userId?r("h1",{staticStyle:{flex:"1"}},[e._v("完善个人信息")]):e._e(),r("el-button",{staticStyle:{width:"60px",height:"35px"},attrs:{size:"mini"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),r("el-form",{ref:"form",staticStyle:{"margin-top":"30px"},attrs:{model:e.training,"label-width":"150px",rules:e.rules}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"机构名称:",prop:"deptName"}},[e.$route.query.see?r("div",[e._v(e._s(e.training.deptName))]):r("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:e.training.deptName,callback:function(t){e.$set(e.training,"deptName",t)},expression:"training.deptName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系人:",prop:"contactName"}},[e.$route.query.see?r("div",[e._v(e._s(e.training.deptName))]):r("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:e.training.contactName,callback:function(t){e.$set(e.training,"contactName",t)},expression:"training.contactName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[e.$route.query.see?r("div",[e._v(e._s(e.training.deptName))]):r("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:e.training.phone,callback:function(t){e.$set(e.training,"phone",t)},expression:"training.phone"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"座机号码:",prop:"landlinePhone"}},[e.$route.query.see?r("div",[e._v(e._s(e.training.deptName))]):r("el-input",{attrs:{placeholder:"",size:"mini"},model:{value:e.training.landlinePhone,callback:function(t){e.$set(e.training,"landlinePhone",t)},expression:"training.landlinePhone"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"培训范围:",prop:"trainGroup"}},[r("el-checkbox-group",{on:{change:e.handleChange},model:{value:e.trainGroup,callback:function(t){e.trainGroup=t},expression:"trainGroup"}},e._l(e.trainServices,(function(t){return r("el-checkbox-button",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"amap-page-container is-required",attrs:{label:"机构地址:",prop:"address"}},[r("el-amap-search-box",{staticClass:"search-box training",staticStyle:{width:"450px",height:"30px","margin-top":"10px"},attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),r("el-amap",{staticClass:"amap-demo",attrs:{vid:"amapDemo",center:e.mapCenter,zoom:15,plugin:e.plugin}},[r("el-amap-marker",{attrs:{position:e.marker}})],1)],1)],1)],1)],1),r("div",{staticStyle:{"margin-left":"150px"}},[e.$route.query.see?e._e():r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.save}},[e._v("提交")])],1)],1):e._e()],1)},a=[],i=(r("28a5"),r("4917"),r("1e7a")),o=r("8f9b"),s={data:function(){var e=function(e,t,r){""===t?r(new Error("请输入手机号码")):t.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)?r():r(new Error("请输入正确的手机号码!"))};return{show:!1,training:{trainScope:""},trainGroup:[],rules:{deptName:[{required:!0,message:"请输入机构名称",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e,trigger:"blur"}],landlinePhone:[{required:!0,message:"请输入座机电话",trigger:"blur"}]},options:[],marker:[121.59996,31.197646],searchOption:{city:"全国",citylimit:!1},mapCenter:[121.59996,31.197646],plugin:[],trainServices:["各类各级渔业职务船员培训","GMDSS无线电操作员培训、电机员培训","外海二级及以下渔业职务船员岗位适任培训","国内一级及以下渔业职务船员培训","普通船员培训","机驾长培训"]}},methods:{save:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;var r=1;if(e.$route.query.edit){var n=JSON.parse(JSON.stringify(e.training));if(n.lat=e.marker[1],n.lng=e.marker[0],n.address=document.getElementsByClassName("search-box-wrapper")[0].childNodes[0].value,!n.address)return e.$message.error("地址不能为空!"),!1;if(0===e.trainGroup.length)return e.$message.error("请选择至少一个培训范围!"),!1;n.trainScope=e.trainGroup.join(","),e.$route.query.userId&&(r=2,n.userId=e.$route.query.userId),Object(i["d"])(n,r).then((function(t){e.$message({message:t.data.msg,type:"success"}),e.$router.go(-1)})).catch((function(t){e.$message.error(t.message)}))}else{var a=JSON.parse(JSON.stringify(e.training));if(a.lat=e.marker[1],a.lng=e.marker[0],a.address=document.getElementsByClassName("search-box-wrapper")[0].childNodes[0].value,!a.address)return e.$message.error("地址不能为空!"),!1;if(0===e.trainGroup.length)return e.$message.error("请选择至少一个培训范围!"),!1;a.trainScope=e.trainGroup.join(","),e.$route.query.userId&&(r=2,a.userId=e.$route.query.userId),Object(i["f"])(a,r).then((function(t){e.$message({message:t.data.msg,type:"success"}),e.$router.go(-1)})).catch((function(t){e.$message.error(t.message)}))}}))},onSearchResult:function(e){this.mapCenter=[e[0].lng,e[0].lat],this.marker=[e[0].lng,e[0].lat]},handleChange:function(e){this.training.trainScope=e.join(",")}},computed:{},created:function(){var e=this;o["lazyAMapApiLoaderInstance"].load().then((function(){setTimeout((function(){e.show=!0,(e.$route.query.edit||e.$route.query.see||e.$route.query.userId)&&Object(i["b"])(e.$route.query.edit||e.$route.query.see||e.$route.query.userId).then((function(t){e.training=t.data.data,e.training.trainScope&&(e.trainGroup=e.training.trainScope.split(",")),document.getElementsByClassName("search-box-wrapper")[0].childNodes[0].value=e.training.address,e.mapCenter=[e.training.lng,e.training.lat],e.marker=[e.training.lng,e.training.lat],e.show=!0}))}),100)}))}},u=s,l=(r("966a"),r("2877")),c=Object(l["a"])(u,n,a,!1,null,null,null);t["default"]=c.exports},"696e":function(e,t,r){},"966a":function(e,t,r){"use strict";r("696e")}}]);