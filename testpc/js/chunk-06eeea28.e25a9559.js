(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06eeea28"],{3552:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return c});r("7f7f");var n=r("0e0b"),i=[{prop:"typeName",label:"类型"},{prop:"time",label:"时间",width:200}],a=function(){return{id:0,name:"",time:"",sender:{id:0,name:""},receivers:{unions:[],orgs:[],users:[]},content:"",type:"",isMark:""}},o=function(){return{id:0,name:"",time:"",receivers:{unionIds:[],orgIds:[],userIds:[]},content:"",type:"",isMark:""}},s=function(e){var t=Object(n["g"])(o(),e);return t.title=e.name,t.text=e.content,t.receivers.unionIds=e.receivers.unions.map(function(e){return e.id}),t.receivers.orgIds=e.receivers.orgs.map(function(e){return e.id}),t.receivers.userIds=e.receivers.users.map(function(e){return e.id}),t},c=function(e){var t=Object(n["g"])(o(),e);return t.title=e.name,t.text=e.content,t.receivers.unions=e.receivers.unions||[],t.receivers.orgs=e.receivers.orgs||[],t.receivers.users=e.receivers.users||[],t}},"3a45":function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return s}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return u});var n=r("b5c6"),i="/ims/announcement";function a(e){return Object(n["a"])({url:"".concat(i,"/page"),method:"get",params:e})}function o(e){return Object(n["a"])({url:"".concat(i,"/").concat(e),method:"get"})}function s(e){return Object(n["a"])({url:"".concat(i,"/create"),method:"post",data:e})}function c(e){return Object(n["a"])({url:"".concat(i,"/update"),method:"post",data:e})}function u(e){return Object(n["a"])({url:"".concat(i,"/read_or_set/batch"),method:"post",data:e,params:{type:8}})}},7739:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"iep-page-form"},[r("basic-container",[r("page-header",{attrs:{title:e.methodName+"公告",backOption:e.backOption}}),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px",size:"small"}},[r("iep-form-item",{attrs:{prop:"name","label-name":"主题",tip:"主题请务必包含关于+事由+通知类型，如关于学习内网2.0相关功能操作的通知。"}},[r("el-input",{attrs:{disabled:e.disabled},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("iep-form-item",{attrs:{prop:"type","label-name":"类型",tip:"日常公告：关于学习、传达会议精神/要求、放假等日常的通知；<br/>公司制度：制度规范类征集意见或实施等公布的通知；<br/>培训通知：关于培训而发布的通知；<br/>人事调动：关于人事任免而发布的通知；<br/>其他通知：除上述提到的以外的通知。"}},[r("iep-dict-select",{attrs:{disabled:e.disabled,"dict-name":"ims_notify_type"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),r("iep-form-item",{attrs:{prop:"content","label-name":"内容",tip:"1、包含称呼、通知缘由、事项、要求和发文单位等内容；<br/>2、分段陈述，默认字体与字号，带格式的文字粘贴请使用“格式清除”工具；"}},[r("iep-froala-editor",{model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),r("iep-form-item",{attrs:{prop:"receivers","label-name":"发布范围",tip:"为该通知接收对象，一般以某个组织或群体为单位。"}},[r("iep-contact-multiple",{attrs:{disabled:e.disabled},model:{value:e.form.receivers,callback:function(t){e.$set(e.form,"receivers",t)},expression:"form.receivers"}})],1),r("el-form-item",{attrs:{label:""}},[r("operation-wrapper",[r("iep-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.methodName))])],1)],1)],1)],1)],1)},i=[],a=r("3a45"),o=r("3552"),s={data:function(){return{id:+this.$route.params.id,backOption:{isBack:!0},form:Object(o["d"])(),rules:{name:[{required:!0,message:"请输入主题",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:2e6,message:"内容必须超过 3 个字符，但不得超过 2000000 个字符",trigger:"blur"}],receivers:[{required:!0,message:"请选择发布范围",trigger:"blur"}]}}},computed:{disabled:function(){return!!this.id},formRequestFn:function(){return this.id?a["d"]:a["c"]},methodName:function(){return this.id?"修改":"发布"}},created:function(){var e=this;this.id&&Object(a["a"])(this.id).then(function(t){var r=t.data;e.form=Object(o["c"])(r.data)})},methods:{handlePublish:function(){this.handleSubmit(!0)},handleSubmit:function(e){var t=this;this.$refs["form"].validate(function(r){if(r){var n=!0===e;t.formRequestFn(Object(o["b"])(t.form),n).then(function(e){var r=e.data;r.data?(t.$message({message:"通知公告".concat(t.methodName,"成功"),type:"success"}),t.$router.history.go(-1)):t.$message(r.msg)})}})}}},c=s,u=r("0c7c"),m=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=m.exports}}]);