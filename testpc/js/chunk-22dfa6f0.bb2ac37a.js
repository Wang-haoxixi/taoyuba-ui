(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22dfa6f0"],{"266e":function(e,t,r){"use strict";r.d(t,"g",function(){return n}),r.d(t,"d",function(){return i}),r.d(t,"e",function(){return s}),r.d(t,"h",function(){return c}),r.d(t,"a",function(){return _}),r.d(t,"n",function(){return l}),r.d(t,"f",function(){return u}),r.d(t,"m",function(){return d}),r.d(t,"b",function(){return m}),r.d(t,"j",function(){return p}),r.d(t,"c",function(){return f}),r.d(t,"i",function(){return h}),r.d(t,"l",function(){return b}),r.d(t,"k",function(){return g}),r.d(t,"o",function(){return v}),r.d(t,"p",function(){return y});var a=r("b5c6"),o="/tmlms/tybcontract";function n(e){return Object(a["a"])({url:"".concat(o,"/page"),method:"get",params:e})}function i(e){return Object(a["a"])({url:"".concat(o,"/del/").concat(e),method:"post"})}function s(e){return Object(a["a"])({url:"".concat(o,"/shipcrew/").concat(e),method:"get"})}function c(e){return Object(a["a"])({url:"/admin/dict/type/".concat(e),method:"get"})}function _(e){return Object(a["a"])({url:"".concat(o,"/save"),method:"post",data:e})}function l(e){return Object(a["a"])({url:"".concat(o,"/update"),method:"post",data:e})}function u(e){return Object(a["a"])({url:"".concat(o,"/").concat(e),method:"get"})}function d(e){return Object(a["a"])({url:"".concat(o,"/review"),method:"post",params:e})}function m(e){return Object(a["a"])({url:"".concat(o,"/cancel"),method:"post",data:e})}function p(e){return Object(a["a"])({url:"".concat(o,"/checkIdcard"),method:"get",params:{employeeIdcard:e}})}function f(e){return Object(a["a"])({url:"".concat(o,"/complant"),method:"post",params:e})}function h(e){return Object(a["a"])({url:"".concat(o,"/villagePage"),method:"get",params:e})}function b(e){return Object(a["a"])({url:"".concat(o,"/refuse"),method:"post",params:{contractId:e}})}function g(e,t){return Object(a["a"])({url:"".concat(o,"/recall"),method:"post",params:{contractId:e,status:t}})}function v(e,t){return Object(a["a"])({url:"".concat(o,"/updateImage"),method:"post",params:{contractId:e,contractImage:t}})}function y(e,t){return Object(a["a"])({url:"".concat(o,"/createImages"),method:"post",params:{contractId:e,addPhoto:t}})}},"2f11":function(e,t,r){},"2f9e":function(e,t,r){"use strict";r.d(t,"a",function(){return o});r("ac6a"),r("28a5"),r("a481");var a=r("b5c6");function o(e){var t=e.url,r=e.method,o=void 0===r?"post":r,i=e.data,s=void 0===i?{}:i,c=e.title,_=void 0===c?"":c;return console.log(t),new Promise(function(e){return Object(a["a"])({url:t,method:o,headers:{responseType:"arraybuffer"},data:s,responseType:"blob"}).then(function(t){n({title:_,response:t}).then(function(){e()})})})}function n(e){var t=e.title,r=void 0===t?"":t,a=e.response,o=i(a.headers["content-disposition"].replace(/"/g,""));return new Promise(function(e){var t=a.headers,n=new Blob([a.data],{type:t["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,r);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=r?"".concat(r,".").concat(o.suffix):o.filename,document.body.appendChild(i),i.style.display="none",i.click()}e()})}function i(e){var t={},r=e.split(";");return r.forEach(function(e){var r=e.replace(/^\s+|\s+$/g,""),a=r.split("=");a[1]?t[a[0]]=a[1]:t[a[0]]=a[0]}),t.suffix=t.filename.split(".")[1],t}},"3b5e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"agent-add"},[r("basic-container",[e.$route.query.see?r("div",{staticClass:"tyb-tabs-wrapper clearfix"},[r("div",{staticClass:"tyb-tabs"},[r("div",{staticClass:"item",class:1===e.current?"active":"",on:{click:function(t){return e.onTabs(1)}}},[e._v("船员信息")]),r("div",{staticClass:"item",class:2===e.current?"active":"",on:{click:function(t){return e.onTabs(2)}}},[e._v("合同信息")]),r("div",{staticClass:"item",class:3===e.current?"active":"",on:{click:function(t){return e.onTabs(3)}}},[e._v("上下船记录")])])]):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:1===e.current,expression:"current === 1"}]},[e.$route.query.userId?e._e():r("h1",[e._v(e._s(e.$route.query.see?"查看":e.$route.query.edit?"编辑":"新增")+"船员信息")]),e.$route.query.userId?r("h1",[e._v("完善个人信息")]):e._e(),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.$route.query.shipCrew?e.shipCrewRules:e.rules,"label-width":"150px",size:"small",disabled:1===e.type}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"个人姓名：",prop:"realName"}},[r("el-input",{model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-radio",{attrs:{label:1},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("男")]),r("el-radio",{attrs:{label:2},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("女")])],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"身份证号码：",prop:"idcard"}},[r("el-input",{attrs:{disabled:!!e.$route.query.edit},on:{blur:e.getidcardList},model:{value:e.form.idcard,callback:function(t){e.$set(e.form,"idcard","string"===typeof t?t.trim():t)},expression:"form.idcard"}})],1)],1),r("el-col",{attrs:{span:12}},[r("iep-form-item",{staticClass:"form-half",attrs:{prop:"birthday","label-name":"出生日期"}},[r("iep-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"籍贯地区：",prop:"districtId"}},[r("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"省级地区"},on:{change:function(t){return e.choseProvince(e.form.provinceId)}},model:{value:e.form.provinceId,callback:function(t){e.$set(e.form,"provinceId",t)},expression:"form.provinceId"}},e._l(e.province,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"provinceId"}})}),1),r("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"市级地区"},on:{change:function(t){return e.choseCity(e.form.cityId)}},model:{value:e.form.cityId,callback:function(t){e.$set(e.form,"cityId",t)},expression:"form.cityId"}},e._l(e.city,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"cityId"}})}),1),r("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"区级地区"},model:{value:e.form.districtId,callback:function(t){e.$set(e.form,"districtId",t)},expression:"form.districtId"}},e._l(e.district,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"districtId"}})}),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"民族",prop:"nation"}},[r("el-select",{attrs:{placeholder:"请输入民族"},model:{value:e.form.nation,callback:function(t){e.$set(e.form,"nation",t)},expression:"form.nation"}},e._l(e.nationals,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"家庭地址：",prop:"address"}},[r("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"家庭联系人：",prop:"contactName"}},[r("el-input",{model:{value:e.form.contactName,callback:function(t){e.$set(e.form,"contactName",t)},expression:"form.contactName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"家庭联系电话",prop:"contactPhone"}},[r("el-input",{model:{value:e.form.contactPhone,callback:function(t){e.$set(e.form,"contactPhone",t)},expression:"form.contactPhone"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"现任职位：",prop:"positionId"}},[r("el-select",{attrs:{placeholder:"现任职位"},model:{value:e.form.positionId,callback:function(t){e.$set(e.form,"positionId",t)},expression:"form.positionId"}},e._l(e.position,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e.$route.query.edit&&32==e.userInfo.orgId?e._e():r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用工状态：",prop:"workStatus"}},[r("el-radio-group",{model:{value:e.form.workStatus,callback:function(t){e.$set(e.form,"workStatus",t)},expression:"form.workStatus"}},[r("el-radio",{attrs:{label:9}},[e._v("待求职")]),r("el-radio",{attrs:{label:0}},[e._v("未用工")]),r("el-radio",{attrs:{label:3}},[e._v("上船，未签合同")])],1)],1)],1)],1),r("el-row"),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"现住地址：",prop:"preAddress"}},[r("el-input",{model:{value:e.form.preAddress,callback:function(t){e.$set(e.form,"preAddress",t)},expression:"form.preAddress"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"作业方式：",prop:"workRequire"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_resume_worktype"},model:{value:e.form.workRequire,callback:function(t){e.$set(e.form,"workRequire",t)},expression:"form.workRequire"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"文化程度：",prop:"eduDegree"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_education_degree"},model:{value:e.form.eduDegree,callback:function(t){e.$set(e.form,"eduDegree",t)},expression:"form.eduDegree"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"工作经验：",prop:"workExprience"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_work_exprience"},model:{value:e.form.workExprience,callback:function(t){e.$set(e.form,"workExprience",t)},expression:"form.workExprience"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"特长：",prop:"speciality"}},[r("el-input",{model:{value:e.form.speciality,callback:function(t){e.$set(e.form,"speciality",t)},expression:"form.speciality"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"身份证正面照片：",prop:"photoFront"}},[r("el-upload",{class:{disabled:e.hideUpload},attrs:{action:"/api/admin/file/upload/avatar","list-type":"picture-card",headers:e.headers,"on-change":e.uploadChangeFront,"before-remove":e.beforeCardfrontRemove,"on-success":e.handleAvatarSuccessFront,"file-list":e.frontList,limit:1,"on-preview":e.previewFront,"on-remove":e.handleAvatarDelFront}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.imgVisible,"append-to-body":""},on:{"update:visible":function(t){e.imgVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"身份证反面照片：",prop:"photoReverse"}},[r("el-upload",{class:{disabled:e.hideUploadReverse},attrs:{action:"/api/admin/file/upload/avatar","list-type":"picture-card",headers:e.headers,"on-change":e.uploadChangeReverse,"before-remove":e.beforeCardreverseRemove,"on-success":e.handleAvatarSuccessReverse,"file-list":e.reverseList,limit:1,"on-preview":e.previewReverse,"on-remove":e.handleAvatarDelReverse}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.imgVisibleReverse,"append-to-body":""},on:{"update:visible":function(t){e.imgVisibleReverse=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrlReverse,alt:""}})])],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[e.manager||e.roles.includes(112)?r("el-form-item",{attrs:{label:"身份证头像：",prop:"idcardPhoto"}},[e.form.idcardPhoto?r("img",{attrs:{src:e.form.idcardPhoto}}):r("i",{staticClass:"el-icon-picture-outline"})]):e._e()],1),r("el-col",{attrs:{span:12}},[e.manager?r("el-form-item",{attrs:{label:"人脸照：",prop:"facePhoto"}},[e.form.facePhoto?r("img",{staticStyle:{width:"350px",height:"200px"},attrs:{src:e.form.facePhoto}}):r("i",{staticClass:"el-icon-picture-outline"})]):e._e()],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证件照：",prop:"certPhoto"}},[r("el-upload",{class:{disabled:e.hideUploadCert},attrs:{action:"/api/admin/file/upload/avatar","list-type":"picture-card",headers:e.headers,"on-change":e.uploadChangeCert,"before-remove":e.beforeCertRemove,"on-success":e.handleAvatarSuccessCert,"file-list":e.CertList,"on-preview":e.previewCert,"on-remove":e.handleAvatarDelCert}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:e.imgVisibleCert,"append-to-body":""},on:{"update:visible":function(t){e.imgVisibleCert=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrlCert,alt:""}})])],1)],1)],1),e.$route.query.userId?e._e():r("iep-form-item",{staticClass:"form-half",attrs:{prop:"remark","label-name":"备注信息",tip:"请输入备注信息"}},[r("iep-input-area",{model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),r("h1",{staticStyle:{"font-size":"18px"}},[e._v("船员职务证书: ")]),e._l(e.form.certList,function(t,a){return r("div",{key:a},[r("el-form",{attrs:{"label-width":"150px",size:"small",disabled:1===e.type}},[r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"证书编码：",prop:"certNo"}},[r("el-input",{model:{value:t.certNo,callback:function(r){e.$set(t,"certNo","string"===typeof r?r.trim():r)},expression:"item.certNo"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"证书类型：",prop:"certType"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_type"},model:{value:t.certType,callback:function(r){e.$set(t,"certType",r)},expression:"item.certType"}})],1)],1),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"证书等级：",prop:"certLevel"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_level"},model:{value:t.certLevel,callback:function(r){e.$set(t,"certLevel",r)},expression:"item.certLevel"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"证书职务：",prop:"certTitle"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_title"},model:{value:t.certTitle,callback:function(r){e.$set(t,"certTitle",r)},expression:"item.certTitle"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"证书起始日期：",prop:"certDateIssue"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.certDateIssue,callback:function(r){e.$set(t,"certDateIssue",r)},expression:"item.certDateIssue"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"证书结束日期：",prop:"certDateExpire"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.certDateExpire,callback:function(r){e.$set(t,"certDateExpire",r)},expression:"item.certDateExpire"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"扫描件：",prop:"certFile"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccessFile,limit:1,headers:e.headers,accept:"image/*"}},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.fileUpload(a)}}},[e._v("点击上传")]),t.certFile?r("img",{staticClass:"certAvatar",attrs:{src:t.certFile}}):r("i",{staticClass:"el-icon-picture-outline"})],1)],1)],1),r("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[e.isShowDeleteBtn(t)?r("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.remove(a)}}},[e._v("删除")]):e._e()],1)],1)],1)],1)}),r("div",{staticStyle:{"text-align":"center"}},[r("iep-button",{staticStyle:{width:"86%","margin-top":"5px","margin-bottom":"8px"},attrs:{icon:"el-icon-plus",plain:""},on:{click:e.newMember}},[e._v("新增")])],1)],2),r("div",{staticStyle:{"text-align":"center"}},[e.$route.query.see?e._e():r("el-button",{on:{click:e.save}},[e._v("提交")]),e.$route.query.shipCrew?[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])]:e.$route.query.from?[r("el-button",{on:{click:function(t){return e.onBackByFrom()}}},[e._v("返回")])]:[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],e.manager&&!e.$route.query.see?r("el-button",{on:{click:e.collect}},[e._v("数据读取")]):e._e()],2)],1),r("page-contract",{directives:[{name:"show",rawName:"v-show",value:2===e.current,expression:"current === 2"}],ref:"pageContract"}),r("page-ship-record",{directives:[{name:"show",rawName:"v-show",value:3===e.current,expression:"current === 3"}],ref:"pageShipRecord"})],1)],1)},o=[],n=r("8d78"),i=n["a"],s=(r("66bd"),r("0c7c")),c=Object(s["a"])(i,a,o,!1,null,null,null);t["default"]=c.exports},4525:function(e,t,r){"use strict";r.d(t,"h",function(){return n}),r.d(t,"i",function(){return i}),r.d(t,"b",function(){return s}),r.d(t,"d",function(){return c}),r.d(t,"f",function(){return _}),r.d(t,"e",function(){return l}),r.d(t,"c",function(){return u}),r.d(t,"g",function(){return d}),r.d(t,"a",function(){return m});var a=r("b5c6"),o="tmlms/crew_cert";function n(e){return Object(a["a"])({url:"".concat(o,"/create"),method:"post",data:e})}function i(e){return Object(a["a"])({url:"".concat(o,"/edit"),method:"post",data:e})}function s(e){return Object(a["a"])({url:"".concat(o,"/remove"),method:"post",params:{certId:e}})}function c(e){return Object(a["a"])({url:"".concat(o,"/detail"),method:"get",params:{certId:e}})}function _(e){return Object(a["a"])({url:"".concat(o,"/myCerts"),method:"get",params:{userId:e}})}function l(e,t){return Object(a["a"])({url:"".concat(o,"/getPage"),method:"get",params:e,data:t})}function u(e){return Object(a["a"])({url:"".concat(o,"/")+e,method:"post",data:e})}function d(e){return Object(a["a"])({url:"".concat(o,"/mycertlist"),method:"get",params:{idcard:e}})}function m(e){return Object(a["a"])({url:"".concat(o,"/certStandard/")+e,method:"get"})}},5612:function(e,t,r){"use strict";r.d(t,"h",function(){return i}),r.d(t,"b",function(){return s}),r.d(t,"i",function(){return c}),r.d(t,"k",function(){return _}),r.d(t,"n",function(){return l}),r.d(t,"a",function(){return u}),r.d(t,"o",function(){return d}),r.d(t,"p",function(){return m}),r.d(t,"c",function(){return p}),r.d(t,"d",function(){return f}),r.d(t,"f",function(){return h}),r.d(t,"q",function(){return b}),r.d(t,"e",function(){return g}),r.d(t,"u",function(){return v}),r.d(t,"j",function(){return y}),r.d(t,"l",function(){return E}),r.d(t,"g",function(){return O}),r.d(t,"m",function(){return C}),r.d(t,"s",function(){return P}),r.d(t,"t",function(){return I}),r.d(t,"r",function(){return w});var a=r("b5c6"),o=r("2f9e"),n="/tmlms/crew";function i(e){return Object(a["a"])({url:"".concat(n,"/Page"),method:"get",params:e})}function s(e){return Object(a["a"])({url:"".concat(n,"/countWithShip?shipId=").concat(e),method:"get",params:e})}function c(e){return Object(a["a"])({url:"".concat(n,"/findByShipId?shipId=").concat(e),method:"get",params:e})}function _(e){return Object(a["a"])({url:"".concat(n,"/pageWithShip"),method:"get",params:e})}function l(e){return Object(a["a"])({url:"".concat(n,"/shipLogPage"),method:"get",params:e})}function u(e){return Object(a["a"])({url:"".concat(n,"/checkMoreRelations"),method:"post",data:e})}function d(e,t){return Object(a["a"])({url:"".concat(n,"/create?type=").concat(t),method:"post",data:e})}function m(e,t){return Object(a["a"])({url:"".concat(n,"/batchCreate?type=").concat(t),method:"post",data:e,timeout:3e5})}function p(e){return Object(a["a"])({url:"".concat(n,"/delete?idcard=").concat(e),method:"post"})}function f(e,t){return Object(a["a"])({url:"".concat(n,"/deleteRelation?idcard=").concat(e,"&&shipId=").concat(t),method:"post"})}function h(e,t){return Object(a["a"])({url:"".concat(n,"/edit?type=").concat(t),method:"post",data:e})}function b(e,t){return Object(a["a"])({url:"".concat(n,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}function g(e){return Object(a["a"])({url:"".concat(n,"/getCrewByidcard?idcard=").concat(e),method:"get"})}function v(e){return Object(a["a"])({url:"admin/file/upload/avatar",method:"post",data:e})}function y(e){return Object(a["a"])({url:"".concat(n,"/idcardcheck?idcard=").concat(e),method:"get"})}function E(e){return Object(a["a"])({url:"".concat(n,"/idcardcheck?idcard=").concat(e),method:"get"})}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"船员信息";return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downloadCrew",data:e,title:t})}function C(e){return Object(a["a"])({url:"".concat(n,"/badPage"),method:"get",params:e})}function P(e){return Object(a["a"])({url:"".concat(n,"/badUpdateBatch"),method:"post",data:e})}function I(e){return Object(a["a"])({url:"".concat(n,"/uploadBaseImage"),method:"post",data:e})}function w(e){return Object(a["a"])({url:"".concat(n,"/updateCertByIdcard"),method:"post",params:e})}},"66bd":function(e,t,r){"use strict";var a=r("2f11"),o=r.n(a);o.a},"7f53":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ship-record-container"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""}},[r("el-table-column",{attrs:{prop:"shipName",label:"船名号"}}),r("el-table-column",{attrs:{prop:"idcard",label:"身份证号码"}}),r("el-table-column",{attrs:{prop:"realName",label:"姓名"}}),r("el-table-column",{attrs:{prop:"flag",label:"上下船"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.getFlagName(t.row.flag)))])]}}])}),r("el-table-column",{attrs:{prop:"certNames",label:"职务证书"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.getCertNames(t.row.certs)))])]}}])}),r("el-table-column",{attrs:{prop:"sourceType",label:"来源"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.getSourceTypeName(t.row.sourceType)))])]}}])}),r("el-table-column",{attrs:{prop:"leftTime",label:"登记时间"}})],1),r("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[r("el-pagination",{attrs:{background:"","current-page":e.page.current,layout:"total, prev, pager, next","page-size":e.page.size,total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)}}})],1),r("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)},o=[],n=(r("ac6a"),r("cebc")),i=r("c439"),s=r("2f62"),c={sourceType:[{label:"合同",value:1},{label:"设备",value:2},{label:"微信",value:3}],flag:[{label:"上船",value:1},{label:"下船",value:2}]},_={data:function(){return{data:[],total:0,idcard:"",page:{size:10,current:1}}},computed:Object(n["a"])({},Object(s["c"])(["dictGroup"])),methods:{getMapByVal:function(e,t){var r="";return e.forEach(function(e){if(e.value===t)return r=e.label,!1}),r},getCertNames:function(e){var t=this,r=this.dictGroup["tyb_crew_cert_title"],a=[];return Array.isArray(e)&&e.forEach(function(e){var o=t.getMapByVal(r,e.certTitle);o&&a.push(o)}),a.join(",")},getFlagName:function(e){return this.getMapByVal(c.flag,e)},getSourceTypeName:function(e){return this.getMapByVal(c.sourceType,e)},getList:function(e){var t=this;e&&(this.idcard=e,Object(i["a"])({size:this.page.size,current:this.page.current,idcard:this.idcard}).then(function(e){var r=e.data;0===r.code&&(t.data=r.data.records,t.total=r.data.total)}))},handleCurrentChange:function(e){this.page.current=e,this.getList(this.idcard)}}},l=_,u=r("0c7c"),d=Object(u["a"])(l,a,o,!1,null,null,null);t["default"]=d.exports},"8d78":function(module,__webpack_exports__,__webpack_require__){"use strict";var E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("cebc"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_2__),E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("7618"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("34ef"),core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4917"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_8__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9__),E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("3b8d"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_12__),_api_post_admin__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("c533b"),_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("5612"),_api_hrms_databuspayload__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("b440"),_views_hrms_ComponentsNew_options__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("e9bd"),_api_login__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("7ded"),_api_post_cert__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("4525"),_mixins_information__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("e420"),vue_socket_io__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("5132"),vue_socket_io__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(vue_socket_io__WEBPACK_IMPORTED_MODULE_20__),vue__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("2b0e"),_store__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("4360"),lodash_debounce__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("b047"),lodash_debounce__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_23__),vuex__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("2f62"),_pageContract__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("be127"),_pageShipRecord__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("7f53");vue__WEBPACK_IMPORTED_MODULE_21__["default"].use(new vue_socket_io__WEBPACK_IMPORTED_MODULE_20___default.a({debug:!1,connection:"http://localhost:5000"})),__webpack_exports__["a"]={mixins:[_mixins_information__WEBPACK_IMPORTED_MODULE_19__["a"]],components:{pageContract:_pageContract__WEBPACK_IMPORTED_MODULE_25__["default"],pageShipRecord:_pageShipRecord__WEBPACK_IMPORTED_MODULE_26__["default"]},data:function(){this.getidcardList=lodash_debounce__WEBPACK_IMPORTED_MODULE_23___default()(this.getidcardList,800);var e=function(e,t,r){""===t?r(new Error("请输入联系电话")):/(^1[3456789]d{9}$)|(^((\d{2,4})|(\d{2,4}-))?\d{7,8}$)/.test(t)?r():r(new Error("请输入正确的手机号码!"))},t=function(e,t,r){""===t?r(new Error("请输入身份证号码")):/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t)?r():r(new Error("请输入正确的身份证号码!"))};return{current:1,certificateColumns:_views_hrms_ComponentsNew_options__WEBPACK_IMPORTED_MODULE_16__["a"],imgVisible:!1,dialogImageUrl:"",imgVisibleReverse:!1,dialogImageUrlReverse:"",imgVisibleCert:!1,dialogImageUrlCert:"",frontList:[],reverseList:[],CertList:[],hideUpload:!1,hideUploadReverse:!1,hideUploadCert:!1,limitCount:1,form:{address:"",idcard:"",realName:"",birthday:"",nation:"",gender:1,isTrain:0,districtId:"",remark:"",positionId:"",nationality:"中国",speciality:"",photoFront:"",photoReverse:"",idcardPhoto:"",facePhoto:"",cityId:"",contactPhone:"",contactName:"",phone:"",applyType:"",workStatus:9,maritalStatus:0,salary:"",preAddress:"",eduDegree:"",workExprience:"",certPhoto:""},agent:{businessLicense:""},position:[],province:[],city:[],district:[],nationals:[{id:1,name:"汉族"},{id:2,name:"蒙古族"},{id:3,name:"回族"},{id:4,name:"藏族"},{id:5,name:"维吾尔族"},{id:6,name:"苗族"},{id:7,name:"彝族"},{id:8,name:"壮族"},{id:9,name:"布依族"},{id:10,name:"朝鲜族"},{id:11,name:"满族"},{id:12,name:"侗族"},{id:13,name:"瑶族"},{id:14,name:"白族"},{id:15,name:"土家族"},{id:16,name:"哈尼族"},{id:17,name:"哈萨克族"},{id:18,name:"傣族"},{id:19,name:"黎族"},{id:20,name:"傈僳族"},{id:21,name:"佤族"},{id:22,name:"畲族"},{id:23,name:"高山族"},{id:24,name:"拉祜族"},{id:25,name:"水族"},{id:26,name:"东乡族"},{id:27,name:"纳西族"},{id:28,name:"景颇族"},{id:29,name:"柯尔克孜族"},{id:30,name:"土族"},{id:31,name:"达翰尔族"},{id:32,name:"么佬族"},{id:33,name:"羌族"},{id:34,name:"布朗族"},{id:35,name:"撒拉族"},{id:36,name:"毛南族"},{id:37,name:"仡佬族"},{id:38,name:"锡伯族"},{id:39,name:"阿昌族"},{id:40,name:"普米族"},{id:41,name:"塔吉克族"},{id:42,name:"怒族"},{id:43,name:"乌孜别克族"},{id:44,name:"俄罗斯族"},{id:45,name:"鄂温克族"},{id:46,name:"德昂族"},{id:47,name:"保安族"},{id:48,name:"裕固族"},{id:49,name:"京族"},{id:50,name:"塔塔尔族"},{id:51,name:"独龙族"},{id:52,name:"鄂伦春族"},{id:53,name:"赫哲族"},{id:54,name:"门巴族"},{id:55,name:"珞巴族"},{id:56,name:"基诺族"}],rules:{realName:[{required:!0,message:"请填写个人姓名",trigger:"blur"}],contactName:[{required:!0,message:"请填联系人",trigger:"blur"}],gender:[{required:!0,message:"请填写性别",trigger:"blur"}],idcard:[{required:!0,message:"请填写身份证信息",trigger:"blur"},{validator:t,trigger:"blur"}],birthday:[{required:!0,message:"请填写生日信息",trigger:"blur"}],nationality:[{required:!0,message:"请填写国籍",trigger:"blur"}],contactPhone:[{required:!0,message:"请填写联系电话",trigger:"blur"},{validator:e,trigger:"blur"}],positionId:[{required:!0,message:"请填写职位",trigger:"blur"}],applyType:[{required:!0,message:"请填写申请类别",trigger:"blur"}],address:[{required:!0,message:"请填写地址",trigger:"blur"}],phone:[{required:!0,message:"请填写联系电话",trigger:"blur"},{validator:e,trigger:"blur"}]},shipCrewRules:{},options:[],applyTypes:[{id:1,name:"以旧换新"},{id:2,name:"普通船员"},{id:3,name:"职务船员"},{id:4,name:"证书换发"},{id:5,name:"证书补发"},{id:6,name:"其他"}],dataLoad:[],sn:"",manager:!1,headers:{Authorization:"Bearer "+_store__WEBPACK_IMPORTED_MODULE_22__["a"].getters.access_token},isIdcard:!1,idx:"",loading:!1,idcards:[],isShipCrew:!1}},methods:{init:function(e){this.$refs.pageContract.getList(e),this.$refs.pageShipRecord.getList(e)},onTabs:function(e){this.current=e},onBackByFrom:function(){var e=this.$route.query.from;if(e){var t=e+"?",r=this.$route.query;for(var a in r)"from"!==a&&(t+="".concat(a,"=").concat(r[a],"&"));this.$router.push(t)}},setBirthTimeFormat:function(e){return e+" 00:00:00"},removeBirthTimeFormat:function(e){return e.split(" ")[0]},isShowDeleteBtn:function(e){if(this.$route.query.edit){var t=!0,r=["certNo","certType","certLevel","certTitle","certDateIssue","certDateExpire","certFile"];for(var a in e)r.includes(a)&&e[a]&&(t=!1);return this.manager||t}return!this.$route.query.see&&(this.manager||!this.$route.query.edit)},validateCertificate:function(e){return e.certNo?e.certType?e.certLevel?e.certTitle?e.certDateIssue?!!e.certDateExpire||(this.$message({showClose:!0,message:"证书结束日期不能为空",type:"warning"}),!1):(this.$message({showClose:!0,message:"证书起始日期不能为空",type:"warning"}),!1):(this.$message({showClose:!0,message:"证书职务不能为空",type:"warning"}),!1):(this.$message({showClose:!0,message:"证书等级不能为空",type:"warning"}),!1):(this.$message({showClose:!0,message:"证书类型不能为空",type:"warning"}),!1):(this.$message({showClose:!0,message:"证书编码不能为空",type:"warning"}),!1)},save:function(){var e=Object(E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.form.idcardPhoto.length>200)){e.next=3;break}return e.next=3,this.getIdcardFile();case 3:if(!(this.form.facePhoto.length>200)){e.next=6;break}return e.next=6,this.getFaceFile();case 6:this.$refs["form"].validate(function(e){if(!e)return!1;if(/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t.form.idcard)){if(t.form.certList&&t.form.certList.length>0)for(var r=0,a=t.form.certList.length;r<a;r++)if(!t.validateCertificate(t.form.certList[r]))return!1;var o=t.form,n=1;if(t.form.birthday=t.removeBirthTimeFormat(t.form.birthday),t.$route.query.edit){var i=o;t.$route.query.userId&&(n=2,i.userId=t.$route.query.userId),t.$route.query.shipCrew&&(n=3),t.$route.query.shipId?(n=3,i.shipId=t.$route.query.shipId,Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["o"])(i,n).then(function(){t.$message.success("船员添加成功!"),t.$router.go(-2)})):Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["f"])(i,n).then(function(e){t.$message({message:e.data.msg,type:"success"});var r=t.$route.query.from;if(r){var a=r+"?",o=t.$route.query;for(var n in o)"from"!==n&&(a+="".concat(n,"=").concat(o[n],"&"));return console.log("to",a),void t.$router.push(a)}t.$route.query.userId?t.$router.go(-1):t.$route.query.shipCrew?t.$router.go(-1):(t.$route.query.idcard,t.$router.go(-1))}).catch(function(e){t.$message.error(e.message)})}else{var s=JSON.parse(JSON.stringify(o));t.$route.query.userId&&(n=2,s.userId=t.$route.query.userId),!0===t.isIdcard?Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["f"])(s,n).then(function(e){t.$message({message:e.data.msg,type:"success"}),t.$route.query.userId?t.$router.go(-1):t.$router.push({name:"crewboatMan"})}).catch(function(e){t.$message.error(e.message)}):Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["o"])(s,n).then(function(e){t.$message({message:e.data.msg,type:"success"}),t.$route.query.userId?t.$router.go(-1):t.$router.push({name:"crewboatMan"})}).catch(function(e){t.$message.error(e.message)})}}else t.$message({message:"身份证号码不正确",type:"warning"})});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),choseProvince:function(e){var t=this;this.form.cityId="",this.form.districtId="",this.form.villageId="",this.district=[],Object(_api_post_admin__WEBPACK_IMPORTED_MODULE_13__["d"])(e).then(function(e){var r=e.data;t.city=r.data})},setData:function(e){this.form.certList=e},choseCity:function(e){var t=this;Object(_api_post_admin__WEBPACK_IMPORTED_MODULE_13__["d"])(e).then(function(e){var r=e.data;t.district=r.data})},handleSave:function(){},collect:function(){var e=this;this.sn="",Object(_api_hrms_databuspayload__WEBPACK_IMPORTED_MODULE_15__["a"])({sn:this.sn}).then(function(t){Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["j"])(t.data.data.identityNumber).then(function(r){!0!==r.data.data?(e.choseProvince(r.data.data.provinceId),e.choseCity(r.data.data.cityId),e.form=r.data.data,e.$set(e.form,"idcardPhoto","data:image/png;base64,"+t.data.data.photo),e.$set(e.form,"facePhoto","data:image/png;base64,"+t.data.data.picture),e.$set(e.form,"certList",[]),e.isIdcard=!0,Object(_api_post_cert__WEBPACK_IMPORTED_MODULE_18__["g"])(t.data.data.identityNumber).then(function(t){t.data.data.forEach(function(t){if(e.form.certList.push(t),e.form.certList){var r=0;e.form.certList.forEach(function(e){e.id=r,r++})}})})):0===t.data.code&&(e.form.address=t.data.data.address,e.form.idcard=t.data.data.identityNumber,e.form.realName=t.data.data.name,e.form.nation=t.data.data.nation,e.$set(e.form,"idcardPhoto","data:image/png;base64,"+t.data.data.photo),e.$set(e.form,"facePhoto","data:image/png;base64,"+t.data.data.picture))})}).catch(function(t){e.$message.error(t.message)})},handleAvatarSuccessFront:function(e,t){console.log(t),console.log("frontList"),console.log(this.frontList),this.form.photoFront=e.data.url},handleAvatarDelFront:function(e){this.form.photoFront="",this.hideUpload=e.length>=this.limitCount},beforeCardfrontRemove:function(){return this.$confirm("确定删除身份证正面照片吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},uploadChangeFront:function(e){this.hideUpload=e.length>=this.limitCount},previewFront:function(e){this.dialogImageUrl=e.url,this.imgVisible=!0},handleAvatarSuccessReverse:function(e,t){console.log(t),this.form.photoReverse=e.data.url},handleAvatarDelReverse:function(e){this.form.photoReverse="",this.hideUploadReverse=e.length>=this.limitCount},beforeCardreverseRemove:function(){return this.$confirm("确定删除身份证反面照片吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},uploadChangeReverse:function(e){this.hideUploadReverse=e.length>=this.limitCount},previewReverse:function(e){this.dialogImageUrlReverse=e.url,this.imgVisibleReverse=!0},handleAvatarSuccessCert:function(e,t){console.log(t),this.form.certPhoto=e.data.url},handleAvatarDelCert:function(e){this.form.certPhoto="",this.hideUploadCert=e.length>=this.limitCount},beforeCertRemove:function(){return this.$confirm("确定删除证件照片吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},uploadChangeCert:function(e){this.hideUploadCert=e.length>=this.limitCount},previewCert:function(e){this.dialogImageUrlCert=e.url,this.imgVisibleCert=!0},getIdcardFile:function(){var e=Object(E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function e(){var t,r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.dataURLtoFile(this.form.idcardPhoto),r=new FormData,r.append("file",t),e.next=5,Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["u"])(r).then(function(e){return a.form.idcardPhoto=e.data.data.url});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getFaceFile:function(){var e=Object(E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function e(){var t,r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.dataURLtoFile(this.form.facePhoto),r=new FormData,r.append("file",t),e.next=5,Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["u"])(r).then(function(e){return a.form.facePhoto=e.data.data.url});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),dataURLtoFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"img",r=e.split(","),a=r[0].match(/:(.*?);/)[1],o=a.split("/")[1],n=atob(r[1]),i=n.length,s=new Uint8Array(i);while(i--)s[i]=n.charCodeAt(i);return new File([s],"".concat(t,".").concat(o),{type:a})},newMember:function(){this.form.certList||this.$set(this.form,"certList",[]);var e=this.form.certList.length;e<2&&this.form.certList?this.form.certList.push({id:e?(parseInt(this.form.certList[e-1].id)+1).toString():"0"}):this.$message({message:"最多两个证书",type:"warning"})},remove:function(e){var t=this;this.$confirm("此操作将永久删除该证书, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(2===t.form.certList.length){var r=t.form.certList.filter(function(t){return t.id!=e});t.form.certList=r}else if(1===t.form.certList.length){var a=t.form.certList.filter(function(e){return 2==e.id});t.form.certList=a}t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleAvatarSuccessFile:function(e){this.$set(this.form.certList[this.idx],"certFile",e.data.url)},fileUpload:function(e){this.idx=e},idcardChange:function(e){console.log("idcardChange"),"object"===Object(E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_3__["a"])(e)?this.refreshCard(e):this.refreshCard({idcard:e}),this.idcards=[]},refreshCard:function(e){if(null!==e){var t=e.idcard,r=void 0===t?"":t;this.form.idcard=r}else this.form.idcard=""},getidcardList:function(e){var t=this,r=e.target.value||"";if(18===r.length){if(!/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(r))return this.$message({message:"身份证号码不正确",type:"warning"}),void(this.form.idcard="");this.loading=!1,""!==r?Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["j"])(r).then(function(e){if(!t.roles.includes(111)&&!t.roles.includes(1)&&0!==e.data.data.userId&&!0!==e.data.data)return t.$message.error("该船员已存在，请重新填写！"),void(t.form={});!0!==e.data.data?(t.choseProvince(e.data.data.provinceId),t.choseCity(e.data.data.cityId),t.form=e.data.data,t.$set(t.form,"certList",[]),t.isIdcard=!0,t.form.birthday=t.setBirthTimeFormat(t.form.birthday),Object(_api_post_cert__WEBPACK_IMPORTED_MODULE_18__["g"])(r).then(function(e){e.data.data.forEach(function(e){if(t.form.certList.push(e),t.form.certList){var r=0;t.form.certList.forEach(function(e){e.id=r,r++})}})})):(t.form.realName="",t.form.positionId="",t.form.birthday=t.form.birthday=t.setBirthTimeFormat(r.slice(6,10)+"-"+r.slice(10,12)+"-"+r.slice(12,14)),t.form.provinceId="",t.form.cityId="",t.form.districtId="",t.form.address="",t.form.phone="",t.form.contactName="",t.form.contactPhone="",t.form.applyType="",t.form.remark="",t.form.nation="",t.form.speciality="",t.form.photoFront="",t.form.photoReverse="",t.form.idcardPhoto="",t.form.facePhoto="",t.form.certList=[])}):this.idcards=[],this.loading=!1}},getIdCardData:function(){var e=this;return new Promise(function(t){e.$jsonp("http://localhost:8989/api/ReadMsg?cardImg=1").then(function(e){var r={photoFront:e.frontImg,photoReverse:e.backImg,certPhoto:e.photobase64};t(r)})})},uploadImgBase:function(e){return new Promise(function(t,r){Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["t"])({baseImage:e}).then(function(e){var r=e.data;0===r.code&&r.data&&t(r.data),t()}).catch(function(e){r(e)})})},isHttpsStart:function(e){return 0===e.indexOf("https")}},created:function(){var e=this;function t(){return r.apply(this,arguments)}function r(){return r=Object(E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark(function e(){var t,r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["e"])(this.$route.query.edit||this.$route.query.see||this.$route.query.idcard).then(function(e){return e.data.data});case 2:return t=e.sent,t.birthday=this.setBirthTimeFormat(t.birthday),console.log("船员信息"),console.log(t.photoFront),t.photoFront&&(this.frontList.push({name:"photoFront",url:t.photoFront}),this.hideUpload=this.frontList.length>=this.limitCount),t.photoReverse&&(this.reverseList.push({name:"photoReverse",url:t.photoReverse}),this.hideUploadReverse=this.reverseList.length>=this.limitCount),t.certPhoto&&(this.CertList.push({name:"certPhoto",url:t.certPhoto}),this.hideUploadCert=this.CertList.length>=this.limitCount),e.next=11,this.choseProvince(t.provinceId);case 11:return r=e.sent,e.next=14,this.choseCity(t.cityId);case 14:a=e.sent,console.log(r),console.log(a),t.certList&&(o=0,t.certList.forEach(function(e){e.id=o,o++})),this.form=t,this.init(this.form.idcard,this.form.idcard);case 20:case"end":return e.stop()}},e,this)})),r.apply(this,arguments)}Object(_api_post_admin__WEBPACK_IMPORTED_MODULE_13__["d"])(0).then(function(t){var r=t.data;e.province=r.data}),Object(_api_post_admin__WEBPACK_IMPORTED_MODULE_13__["f"])("tyb_resume_position").then(function(t){var r=t.data;e.position=r.data}),(this.$route.query.edit||this.$route.query.see||this.$route.query.userId)&&t.call(this),Object(_api_login__WEBPACK_IMPORTED_MODULE_17__["c"])().then(function(t){t.data.data.roles.includes(111)?e.manager=!0:e.manager=!1,-1!==t.data.data.roles.indexOf(111)?e.isManger=!1:-1!==t.data.data.roles.indexOf(112)?e.isManger=!1:e.isManger=!0,t.data.data.sysUser.userId})},beforeDestroy:function(){this.sockets.unsubscribe("card message")},mounted:function mounted(){var _this11=this;function Base64(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.decode=function(r){var a,o,n,i,s,c,_,l="",u=0;r=r.replace(/[^A-Za-z0-9+\/=]/g,"");while(u<r.length)i=e.indexOf(r.charAt(u++)),s=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),_=e.indexOf(r.charAt(u++)),a=i<<2|s>>4,o=(15&s)<<4|c>>2,n=(3&c)<<6|_,l+=String.fromCharCode(a),64!=c&&(l+=String.fromCharCode(o)),64!=_&&(l+=String.fromCharCode(n));return l=t(l),l};var t=function(e){var t="",r=0,a=0,o=0,n=0;while(r<e.length)a=e.charCodeAt(r),a<128?(t+=String.fromCharCode(a),r++):a>191&&a<224?(o=e.charCodeAt(r+1),t+=String.fromCharCode((31&a)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),n=e.charCodeAt(r+2),t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&n),r+=3);return t}}this.$socket.emit("startRead"),this.sockets.subscribe("card message",function(msg){console.log("船员信息 card message");var base=new Base64,result1=base.decode(msg),data=eval("("+result1+")");_this11.getIdCardData().then(function(e){console.log("idCardData",e),Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["j"])(data.cardno).then(function(t){if(!0!==t.data.data)_this11.choseProvince(t.data.data.provinceId),_this11.choseCity(t.data.data.cityId),_this11.form=t.data.data,_this11.uploadImgBase(e.photoFront,_this11.form.certPhoto),_this11.isHttpsStart(_this11.form.photoFront)?(_this11.frontList.push({name:"photoFront",url:_this11.form.photoFront}),_this11.hideUpload=_this11.frontList.length>=_this11.limitCount):e.photoFront&&_this11.uploadImgBase(e.photoFront).then(function(e){e&&(_this11.frontList=[],_this11.frontList.push({name:"photoFront",url:e}),_this11.hideUpload=_this11.frontList.length>=_this11.limitCount,_this11.form.photoFront=e)}),_this11.isHttpsStart(_this11.form.photoReverse)?(_this11.reverseList.push({name:"photoReverse",url:_this11.form.photoReverse}),_this11.hideUploadReverse=_this11.reverseList.length>=_this11.limitCount):e.photoReverse&&_this11.uploadImgBase(e.photoReverse).then(function(e){e&&(_this11.reverseList=[],_this11.reverseList.push({name:"photoReverse",url:e}),_this11.hideUploadReverse=_this11.reverseList.length>=_this11.limitCount,_this11.form.photoReverse=e)}),_this11.isHttpsStart(_this11.form.certPhoto)?(_this11.CertList.push({name:"certPhoto",url:_this11.form.certPhoto}),_this11.hideUploadCert=_this11.CertList.length>=_this11.limitCount):e.certPhoto&&_this11.uploadImgBase(e.certPhoto).then(function(e){e&&(_this11.CertList=[],_this11.CertList.push({name:"certPhoto",url:e}),_this11.hideUploadCert=_this11.CertList.length>=_this11.limitCount,_this11.form.certPhoto=e)}),_this11.$set(_this11.form,"certList",[]),_this11.isIdcard=!0,Object(_api_post_cert__WEBPACK_IMPORTED_MODULE_18__["g"])(data.cardno).then(function(e){e.data.data.forEach(function(e){if(_this11.form.certList.push(e),_this11.form.certList){var t=0;_this11.form.certList.forEach(function(e){e.id=t,t++})}})});else{var r={};_this11.form.realName=data.name,_this11.form.birthday=_this11.setBirthTimeFormat(data.born.slice(0,4)+"-"+data.born.slice(4,6)+"-"+data.born.slice(6)),_this11.form.idcard=data.cardno,_this11.form.address=data.address,_this11.form.nation=data.nation,_this11.form.gender="男"==data.sex?1:2,_this11.form.nationality="中国",r.provinceId=parseInt(data.cardno.substring(0,2)+"0000000000"),r.cityId=parseInt(data.cardno.substring(0,4)+"00000000"),r.districtId=parseInt(data.cardno.substring(0,6)+"000000"),_this11.choseProvince(r.provinceId),_this11.choseCity(r.cityId),_this11.form.provinceId=r.provinceId,_this11.form.cityId=r.cityId,_this11.form.districtId=r.districtId,e.certPhoto&&_this11.uploadImgBase(e.certPhoto).then(function(e){e&&(_this11.CertList=[],_this11.CertList.push({name:"certPhoto",url:e}),_this11.hideUploadCert=_this11.CertList.length>=_this11.limitCount,_this11.form.certPhoto=e)}),e.photoFront&&_this11.uploadImgBase(e.photoFront).then(function(e){e&&(_this11.frontList=[],_this11.frontList.push({name:"photoFront",url:e}),_this11.hideUpload=_this11.frontList.length>=_this11.limitCount,_this11.form.photoFront=e)}),e.photoReverse&&_this11.uploadImgBase(e.photoReverse).then(function(e){e&&(_this11.reverseList=[],_this11.reverseList.push({name:"photoReverse",url:e}),_this11.hideUploadReverse=_this11.reverseList.length>=_this11.limitCount,_this11.form.photoReverse=e)})}})})})},computed:Object(E_work_tyb_taoyuba_ui_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_24__["c"])(["userInfo"]),{uploadDisabled:function(){return console.log(this.imagelist.length),this.imagelist.length>0},type:function(){return this.$route.query.see?1:2}},Object(vuex__WEBPACK_IMPORTED_MODULE_24__["e"])({roles:function(e){return e.user.roles}})),watch:{}}},b440:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r("b5c6"),o="/tybhrms/databuspayload";function n(e){return Object(a["a"])({url:"".concat(o,"/getlast"),method:"get",params:e})}},be127:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contract-container"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data,stripe:""}},[r("el-table-column",{attrs:{prop:"shipName",label:"船名"}}),r("el-table-column",{attrs:{prop:"shipownerName",label:"持证人"}}),r("el-table-column",{attrs:{prop:"employerName",label:"雇主（甲方）"}}),r("el-table-column",{attrs:{prop:"employeeName",label:"雇员（乙方）"}}),r("el-table-column",{attrs:{prop:"createTime",label:"合同创建日期"}}),r("el-table-column",{attrs:{prop:"status",label:"合同状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.getStatusName(t.row.status)))])]}}])}),r("el-table-column",{attrs:{prop:"userName",label:"合同发布者"}})],1),r("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[r("el-pagination",{attrs:{background:"","current-page":e.page.current,layout:"total, prev, pager, next","page-size":e.page.size,total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.page,"current",t)},"update:current-page":function(t){return e.$set(e.page,"current",t)}}})],1),r("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)},o=[],n=(r("96cf"),r("3b8d")),i=(r("ac6a"),r("266e")),s=r("e17e"),c={status:[{value:"",label:"全部"},{value:0,label:"未审核"},{value:1,label:"合同成立"},{value:2,label:"未通过审核"},{value:3,label:"合同纠纷"},{value:4,label:"合同解除"},{value:5,label:"合同过期"},{value:6,label:"未签纸质合同"}]},_={data:function(){return{data:[],total:0,page:{size:10,current:1},employeeIdcard:""}},methods:{getMapByVal:function(e,t){var r="";return e.forEach(function(e){if(e.value===t)return r=e.label,!1}),r},getStatusName:function(e){return this.getMapByVal(c.status,e)},getList:function(e){var t=this;e&&(this.employeeIdcard=e,Object(i["g"])({size:this.page.size,current:this.page.current,employeeIdcard:this.employeeIdcard}).then(function(e){var r=e.data;0===r.code&&(t.data=r.data.records,t.data.forEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserName(r.userId,r);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),t.total=r.data.total)}))},getUserName:function(e,t){var r=this;Object(s["e"])(e).then(function(e){var a=e.data;0===a.code&&r.$set(t,"userName",a.data.realName)})},handleCurrentChange:function(e){this.page.current=e,this.getList(this.employeeIdcard)}}},l=_,u=r("0c7c"),d=Object(u["a"])(l,a,o,!1,null,null,null);t["default"]=d.exports},c439:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i});var a=r("b5c6"),o="/tmlms/tybcrewsyslog";function n(e){return Object(a["a"])({url:"".concat(o,"/page"),method:"get",params:e})}function i(e){return Object(a["a"])({url:"".concat(o,"/newPage"),method:"get",params:e})}},c533b:function(e,t,r){"use strict";r.d(t,"i",function(){return s}),r.d(t,"f",function(){return c}),r.d(t,"d",function(){return _}),r.d(t,"g",function(){return l}),r.d(t,"c",function(){return u}),r.d(t,"a",function(){return d}),r.d(t,"e",function(){return m}),r.d(t,"j",function(){return p}),r.d(t,"h",function(){return f}),r.d(t,"b",function(){return h});var a=r("b5c6"),o="tmlms/crew",n="admin/region",i="admin/dict";function s(e){return Object(a["a"])({url:"".concat(n,"/getinfo/")+e,method:"get"})}function c(e){return Object(a["a"])({url:"".concat(i,"/type/")+e,method:"get"})}function _(e){return Object(a["a"])({url:"".concat(n,"/area"),method:"get",params:{parentCode:e}})}function l(e){return Object(a["a"])({url:"".concat(o,"/Page"),method:"get",params:e})}function u(e){return Object(a["a"])({url:"".concat(o,"/delete"),method:"post",params:{userId:e}})}function d(e){return Object(a["a"])({url:"".concat(o,"/create"),method:"post",data:e,params:{type:1}})}function m(e){return Object(a["a"])({url:"".concat(o,"/getCrewByUserId"),method:"get",params:{userId:e}})}function p(e){return Object(a["a"])({url:"".concat(o,"/edit"),method:"post",params:{type:1},data:e})}function f(e){return Object(a["a"])({url:"/tybship/tybregion/parent/".concat(e),method:"get"})}function h(e,t,r){return Object(a["a"])({url:"".concat(o,"/upWork?idcard=").concat(t,"&workStatus=").concat(r),method:"post",data:e})}},e420:function(e,t,r){"use strict";r("7f7f");var a=r("7ded");t["a"]={data:function(){return{haveInfo:{}}},methods:{getInformation:function(e,t){var r=this;Object(a["c"])().then(function(a){-1===a.data.data.roles.indexOf(1)&&-1===a.data.data.roles.indexOf(111)&&(a.data.data.sysUser.phone&&(r.$set(r.haveInfo,"phone",!0),r[e][t[0]]=a.data.data.sysUser.phone),a.data.data.sysUser.realName&&(r.$set(r.haveInfo,"realName",!0),r[e][t[1]]=a.data.data.sysUser.realName),a.data.data.sysUser.idCard&&[t[2]]&&(r.$set(r.haveInfo,"idcard",!0),r[e].idcard=a.data.data.sysUser.idCard))})}}}},e9bd:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a=[{prop:"certNo",label:"证书编码"},{prop:"certType",label:"证书类型",type:"dict",dictName:"tyb_crew_cert_type"},{prop:"certLevel",label:"证书等级",type:"dict",dictName:"tyb_crew_cert_level"},{prop:"certTitle",label:"证书职务",type:"dict",dictName:"tyb_crew_cert_title"},{prop:"certDateIssue",label:"有效期至",type:"date"},{prop:"certDateExpire",label:"结束日期",type:"date"},{prop:"annex",label:"扫描件",type:"file"}]}}]);