(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b3d311a"],{"037b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"iep-page-form"},[r("basic-container",[r("page-header",{attrs:{title:e.methodName+"招聘",backOption:e.backOption}}),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px",size:"small"}},[r("el-row",[e.manager?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"船名：",prop:"shipName"}},[r("el-input",{attrs:{disabled:e.haveInfo.shipName},on:{blur:e.onBlurShipName},model:{value:e.form.shipName,callback:function(t){e.$set(e.form,"shipName","string"===typeof t?t.trim():t)},expression:"form.shipName"}})],1)],1):e._e(),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系人：",prop:"contactName"}},[r("el-input",{attrs:{disabled:e.haveInfo.realName},model:{value:e.form.contactName,callback:function(t){e.$set(e.form,"contactName",t)},expression:"form.contactName"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"招聘岗位：",prop:"positionId"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_resume_position"},model:{value:e.form.positionId,callback:function(t){e.$set(e.form,"positionId",t)},expression:"form.positionId"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"联系电话：",prop:"contactPhone"}},[r("el-input",{attrs:{disabled:e.haveInfo.phone},model:{value:e.form.contactPhone,callback:function(t){e.$set(e.form,"contactPhone",t)},expression:"form.contactPhone"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"招聘人数：",prop:"recruitNo"}},[r("el-input",{model:{value:e.form.recruitNo,callback:function(t){e.$set(e.form,"recruitNo",t)},expression:"form.recruitNo"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"月薪：",prop:"salary"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.salaryCurrency,callback:function(t){e.$set(e.form,"salaryCurrency",t)},expression:"form.salaryCurrency"}},e._l(e.salaryList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证书职务：",prop:"certTitle"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_title"},model:{value:e.form.certTitle,callback:function(t){e.$set(e.form,"certTitle",t)},expression:"form.certTitle"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证书等级：",prop:"certLevel"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.certLevel,callback:function(t){e.$set(e.form,"certLevel",t)},expression:"form.certLevel"}},e._l(e.level,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"作业方式：",prop:"workMode"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_resume_worktype"},model:{value:e.form.workMode,callback:function(t){e.$set(e.form,"workMode",t)},expression:"form.workMode"}},[e._v(">")])],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{type:"number",label:"船长（m）：",prop:"hullLength"}},[r("el-input",{model:{value:e.form.hullLength,callback:function(t){e.$set(e.form,"hullLength",t)},expression:"form.hullLength"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"主机总功率：",prop:"totalPower"}},[r("el-input",{model:{value:e.form.totalPower,callback:function(t){e.$set(e.form,"totalPower",t)},expression:"form.totalPower"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"年龄要求：",prop:"ageRequire"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_position_agerequirement"},model:{value:e.form.ageRequire,callback:function(t){e.$set(e.form,"ageRequire",t)},expression:"form.ageRequire"}},[e._v(">")])],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"工作经验：",prop:"workExprience"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_work_exprience"},model:{value:e.form.workExprience,callback:function(t){e.$set(e.form,"workExprience",t)},expression:"form.workExprience"}},[e._v(">")])],1)],1),r("el-col",{attrs:{span:12}},[e.manager?r("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1):e._e()],1)],1),r("el-form-item",{attrs:{label:""}},[r("operation-wrapper",[r("iep-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)],1)],1)},o=[],n=(r("7f7f"),r("6762"),r("2fdb"),r("6b54"),r("2f4e")),i=r("23d6"),l=r("51d6"),c=r("e420"),s=r("7ded"),u={mixins:[c["a"]],data:function(){var e=this;return{dictsMap:l["b"],backOption:{isBack:!0,backPath:null,backFunction:function(){e.onGoBack()}},rules:l["f"],provinces:[],citys:[],towns:[],salaryCurrencys:[{value:"1",label:"人民币（RMB)"},{value:"2",label:"美元（USD）"}],form:Object(l["d"])(),level:[{value:"0",label:"--"},{value:"1",label:"一级"},{value:"2",label:"二级"},{value:"3",label:"三级"}],manager:!1,userId:"",salaryList:[{label:"面议",value:"1"},{label:"4K以下",value:"2"},{label:"4-6K",value:"3"},{label:"6-8K",value:"4"},{label:"8K-10K",value:"5"},{label:"10K及以上",value:"6"}]}},computed:{recruitId:function(){return+this.$route.params.recruitId},methodName:function(){return this.recruitId?"编辑":"发布"}},created:function(){var e=this;this.recruitId&&Object(n["g"])(this.recruitId).then((function(t){var r=t.data;e.form=e.$mergeByFirst(Object(l["d"])(),r.data),0===e.form.salary&&(e.form.salary="面议"),e.form.recruitNo=e.form.recruitNo.toString(),e.form.salary=e.form.salary.toString(),e.form.hullLength=e.form.hullLength.toString(),e.selectCity(),e.selectTown()})),Object(s["c"])().then((function(t){t.data.data.roles.includes(111)?e.manager=!0:e.manager=!1,t.data.data.sysUser.userId})),this.getProvince()},mounted:function(){this.getInformation("form",["contactPhone","contactName"])},methods:{onBlurShipName:function(e){var t=this,r=e.target.value;r&&Object(n["e"])(r).then((function(e){var r=e.data;if(0===r.code){var a=r.data;t.form.contactName=a.shipowner,t.form.contactPhone=a.mobile,t.form.hullLength=a.hullLength,t.form.totalPower=a.engineTotalPower}}))},getProvince:function(){var e=this;Object(i["c"])(0).then((function(t){var r=t.data;e.provinces=r.data.map((function(e){return{label:e.name,value:e.areaCode}}))}))},getCity:function(){var e=this;Object(i["c"])(this.form.province).then((function(t){var r=t.data;e.towns=r.data.map((function(e){return{label:e.name,value:e.areaCode}}))})),this.form.city="",this.form.town=""},getTown:function(){var e=this;Object(i["c"])(this.form.town).then((function(t){var r=t.data;e.citys=r.data.map((function(e){return{label:e.name,value:e.areaCode}}))})),this.form.city=""},selectCity:function(){var e=this;Object(i["c"])(this.form.province).then((function(t){var r=t.data;e.towns=r.data.map((function(e){return{label:e.name,value:e.areaCode}}))}))},selectTown:function(){var e=this;Object(i["c"])(this.form.town).then((function(t){var r=t.data;e.citys=r.data.map((function(e){return{label:e.name,value:e.areaCode}}))}))},onGoBack:function(){this.$router.push({path:"/hrms_spa/recruit_list"})},handleSubmit:function(e){var t=this,r=this.recruitId?n["i"]:n["a"];this.$refs["form"].validate((function(a){if(a){var o=!0===e;"面议"===t.form.salary&&(t.form.salary=0),t.form.salaryCurrency="1",r(Object(l["c"])(t.form),o).then((function(e){var r=e.data;r.data&&(t.$message({message:"招聘信息".concat(t.methodName,"成功"),type:"success"}),t.onGoBack())}))}}))}}},m=u,d=r("2877"),f=Object(d["a"])(m,a,o,!1,null,null,null);t["default"]=f.exports},"2f4e":function(e,t,r){"use strict";r.d(t,"h",(function(){return i})),r.d(t,"f",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return s})),r.d(t,"g",(function(){return u})),r.d(t,"i",(function(){return m})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return p}));var a=r("b5c6"),o=r("2f9e"),n="tybhrms/tybrecruit";function i(e){return Object(a["a"])({url:"".concat(n,"/page"),method:"get",params:e})}function l(e){return Object(a["a"])({url:"".concat(n,"/mypage"),method:"get",params:e})}function c(e){return Object(a["a"])({url:"".concat(n,"/")+e,method:"post",data:e})}function s(e){return Object(a["a"])({url:"".concat(n,"/save"),method:"post",data:e})}function u(e){return Object(a["a"])({url:"".concat(n,"/")+e,method:"get",params:e})}function m(e,t){return Object(a["a"])({url:"".concat(n,"/update"),method:"post",params:{publish:t},data:e})}function d(e){return Object(o["a"])({url:"tybhrms/tybExcelExport/recruit",data:e,title:"招聘信息"})}function f(e,t,r){return Object(o["a"])({url:"/tmlms/tybmlmsExcelExport/sign_export?userType=".concat(e,"&trainMeetId=").concat(r),title:t,method:"get"})}function p(e){return Object(a["a"])({url:"/tybship/tybship/findmyship/".concat(e),method:"get"})}},"2f9e":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("ac6a"),r("28a5"),r("a481");var a=r("b5c6");function o(e){var t=e.url,r=e.method,o=void 0===r?"post":r,i=e.data,l=void 0===i?{}:i,c=e.title,s=void 0===c?"":c;return console.log(t),new Promise((function(e){return Object(a["a"])({url:t,method:o,headers:{responseType:"arraybuffer"},data:l,responseType:"blob"}).then((function(t){n({title:s,response:t}).then((function(){e()}))}))}))}function n(e){var t=e.title,r=void 0===t?"":t,a=e.response,o=i(a.headers["content-disposition"].replace(/"/g,""));return new Promise((function(e){var t=a.headers,n=new Blob([a.data],{type:t["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,r);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=r?"".concat(r,".").concat(o.suffix):o.filename,document.body.appendChild(i),i.style.display="none",i.click()}e()}))}function i(e){var t={},r=e.split(";");return r.forEach((function(e){var r=e.replace(/^\s+|\s+$/g,""),a=r.split("=");a[1]?t[a[0]]=a[1]:t[a[0]]=a[0]})),t.suffix=t.filename.split(".")[1],t}},"51d6":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"f",(function(){return b})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return s})),r.d(t,"g",(function(){return m}));r("3b2b");var a=r("0e0b"),o={recruitStatus:{0:"待审核",1:"通过",2:"不通过"}},n=[{prop:"recruitId",label:"编号"},{prop:"contactName",label:"联系人"},{prop:"positionId",label:"招聘岗位",dictName:"tyb_resume_position",type:"dictGroup"},{prop:"recruitNo",label:"招聘人数"},{prop:"salary",label:"月薪"},{prop:"updateTime",label:"更新时间"},{prop:"recruitStatus",label:"招聘状态",type:"dict"}],i=function(){return{recruitId:"",contactName:"",positionId:"",contactPhone:"",recruitNo:"",salary:"面议",salaryCurrency:"",certRequire:"",ageRequire:"",workMode:"",province:"",city:"",town:"",hullLength:"",totalPower:"",certLevel:"",certTitle:"",shipName:"",remark:"",workExprience:""}},l=function(){return{recruitId:"",contactName:"",positionId:"",contactPhone:"",recruitNo:"",salary:"",salaryCurrency:"",certRequire:"",ageRequire:"",workMode:"",province:"",city:"",town:"",hullLength:"",totalPower:"",certLevel:"",certTitle:"",shipName:"",remark:"",workExprience:""}},c=function(e){var t=Object(a["g"])(l(),e);return t},s=function(){return{contactName:"",positionId:"",recruitId:"",startdate:"",recruitCrestartdate:"",recruitCreenddate:""}},u=function(){return{contactName:"",positionId:"",recruitId:"",recruitCrestartdate:"",recruitCreenddate:""}},m=function(e){var t=Object(a["g"])(u(),e);return t.contactName=e.contactName?e.contactName:null,t.positionId=e.positionId?e.positionId:null,t},d=function(e,t,r){if(""!==t){var a=/(^1[0-9]{10}$)|(^0\d{2,3}-?\d{7,8}$)/;a.test(t)||r(new Error("请输入11位的手机号码"))}r()};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=new RegExp("^\\d{0,"+t+"}$");if(0===r)return a.test(e);var o=new RegExp("^\\d{0,"+t+"}\\.\\d{0,"+r+"}$");return a.test(e)||o.test(e)}function p(e,t,r){""===t?r(new Error):f(t,e.length,e.decimal)?r():r(new Error)}var b={contactName:[{required:!0,message:"请填联系人",trigger:"blur"},{min:2,max:4,message:"长度在 2 到 4 个字符",trigger:"blur"}],positionId:[{required:!0,message:"请填招聘岗位",trigger:"blur"},{max:10,message:"长度在 0 到 10 个字符",trigger:"blur"}],contactPhone:[{required:!0,message:"请填联系电话",trigger:"blur"},{validator:d,trigger:"blur"}],recruitNo:[{required:!0,message:"请填招聘人数",trigger:"blur"},{max:4,message:"不得超过5位数",trigger:"blur"}],salary:[{required:!0,message:"请填月薪",trigger:"blur"},{max:10,message:"不得超过10位数",trigger:"blur"}],salaryCurrency:[{required:!0,message:"请填货币种类",trigger:"blur"}],certRequire:[{required:!0,message:"请填证书要求",trigger:"blur"}],ageRequire:[{required:!0,message:"请填年龄要求",trigger:"blur"}],workMode:[{required:!0,message:"请填作业方式",trigger:"blur"}],hullLength:[{required:!0,message:"请填船长（m）",trigger:"blur"},{required:!0,validator:p,trigger:"blur",length:3,decimal:2,message:"请输入0~999.99的整数或小数！"}],totalPower:[{required:!0,message:"请填主机总功率",trigger:"blur"},{required:!0,validator:p,trigger:"blur",length:3,decimal:2,message:"请输入0~999.99的整数或小数！"}],workExprience:[{required:!0,message:"请填工作经验",trigger:"blur"}]}},e420:function(e,t,r){"use strict";r("7f7f");var a=r("7ded");t["a"]={data:function(){return{haveInfo:{}}},methods:{getInformation:function(e,t){var r=this;Object(a["c"])().then((function(a){-1===a.data.data.roles.indexOf(1)&&-1===a.data.data.roles.indexOf(111)&&(a.data.data.sysUser.phone&&(r.$set(r.haveInfo,"phone",!0),r[e][t[0]]=a.data.data.sysUser.phone),a.data.data.sysUser.realName&&(r.$set(r.haveInfo,"realName",!0),r[e][t[1]]=a.data.data.sysUser.realName),a.data.data.sysUser.idCard&&[t[2]]&&(r.$set(r.haveInfo,"idcard",!0),r[e].idcard=a.data.data.sysUser.idCard))}))}}}}}]);