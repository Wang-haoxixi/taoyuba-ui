(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc5382e8"],{4525:function(e,t,r){"use strict";r.d(t,"h",function(){return n}),r.d(t,"i",function(){return o}),r.d(t,"b",function(){return i}),r.d(t,"d",function(){return s}),r.d(t,"f",function(){return l}),r.d(t,"e",function(){return u}),r.d(t,"c",function(){return d}),r.d(t,"g",function(){return p}),r.d(t,"a",function(){return m});var c=r("b5c6"),a="tmlms/crew_cert";function n(e){return Object(c["a"])({url:"".concat(a,"/create"),method:"post",data:e})}function o(e){return Object(c["a"])({url:"".concat(a,"/edit"),method:"post",data:e})}function i(e){return Object(c["a"])({url:"".concat(a,"/remove"),method:"post",params:{certId:e}})}function s(e){return Object(c["a"])({url:"".concat(a,"/detail"),method:"get",params:{certId:e}})}function l(e){return Object(c["a"])({url:"".concat(a,"/myCerts"),method:"get",params:{userId:e}})}function u(e,t){return Object(c["a"])({url:"".concat(a,"/getPage"),method:"get",params:e,data:t})}function d(e){return Object(c["a"])({url:"".concat(a,"/")+e,method:"post",data:e})}function p(e){return Object(c["a"])({url:"".concat(a,"/mycertlist"),method:"get",params:{idcard:e}})}function m(e){return Object(c["a"])({url:"".concat(a,"/certStandard/")+e,method:"get"})}},"50cd":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return n}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return u}),r.d(t,"g",function(){return f}),r.d(t,"e",function(){return d}),r.d(t,"i",function(){return m}),r.d(t,"f",function(){return l}),r.d(t,"h",function(){return b});var c=r("0e0b"),a=r("84df"),n={},o=[{prop:"certType",label:"证书种类",dictName:"tyb_crew_cert_type",type:"dictGroup"},{prop:"certLevel",label:"证书等级",dictName:"tyb_crew_cert_level",type:"dictGroup"},{prop:"certTitle",label:"证书职务",dictName:"tyb_crew_cert_title",type:"dictGroup"},{prop:"certNo",label:"证书编号"}],i=function(){return{certId:"",certType:"",certLevel:"",certTitle:"",certNo:"",certDateIssue:Object(a["a"])(),certDateExpire:Object(a["a"])(),certFile:""}},s=function(){return{certId:"",certType:"",certLevel:"",certTitle:"",certNo:"",certDateIssue:Object(a["a"])(),certDateExpire:Object(a["a"])(),certFile:""}},l=function(){return{userId:"",certType:"",certName:""}},u=function(e){var t=Object(c["g"])(s(),e);return t},d=function(){return{idCard:"",crewName:"",certIssueUnit:"",certTitle:"",certLevel:"",certType:"",certNo:""}},p=function(){return{idCard:"",crewName:"",certIssueUnit:"",certTitle:"",certLevel:"",certType:"",certNo:""}},m=function(e){var t=Object(c["g"])(p(),e);return t.certType=e.certType?e.certType:null,t.certNo=e.certNo?e.certNo:null,t},f={certType:[{required:!0,message:"请填证书类型",trigger:"blur"}],certLevel:[{required:!0,message:"请填证书等级",trigger:"blur"}],certTitle:[{required:!0,message:"请填证书职务",trigger:"blur"}],certNo:[{required:!0,message:"请填描述",trigger:"blur"},{min:0,max:20,message:"长度在 0 到 20 个字符",trigger:"blur"}],certFile:[{required:!0,message:"请填附件",trigger:"blur"}]},b=function(){return{realName:"",idcard:"",certIssueUnit:"",certNo:"",certLevel:"",certType:"",certTitle:""}}},"84df":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var c=r("c1df"),a=r.n(c),n=function(){return a()().format("YYYY-MM-DD HH:mm:ss")}},c02d:function(e,t,r){"use strict";r.r(t);var c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"iep-page-form"},[r("basic-container",[r("page-header",{attrs:{title:e.methodName+"证书",backOption:e.backOption}}),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px",size:"small"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证书种类：",prop:"certType"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_type"},model:{value:e.form.certType,callback:function(t){e.$set(e.form,"certType",t)},expression:"form.certType"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证书等级：",prop:"certLevel"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_level"},model:{value:e.form.certLevel,callback:function(t){e.$set(e.form,"certLevel",t)},expression:"form.certLevel"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证书职务：",prop:"certTitle"}},[r("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_title"},model:{value:e.form.certTitle,callback:function(t){e.$set(e.form,"certTitle",t)},expression:"form.certTitle"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"证书编号：",prop:"certNo"}},[r("el-input",{model:{value:e.form.certNo,callback:function(t){e.$set(e.form,"certNo",t)},expression:"form.certNo"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("iep-form-item",{staticClass:"form-half",attrs:{prop:"certDateIssue","label-name":"有效起始日期"}},[r("iep-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.certDateIssue,callback:function(t){e.$set(e.form,"certDateIssue",t)},expression:"form.certDateIssue"}})],1)],1),r("el-col",{attrs:{span:12}},[r("iep-form-item",{staticClass:"form-half",attrs:{prop:"certDateExpire","label-name":"有效终止日期"}},[r("iep-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.certDateExpire,callback:function(t){e.$set(e.form,"certDateExpire",t)},expression:"form.certDateExpire"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:15}},[r("el-form-item",{attrs:{label:"上传证书图片：",prop:"certFile"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccess,headers:e.headers,accept:"image/*"}},[e.form.certFile?r("img",{staticClass:"avatar",attrs:{src:e.form.certFile}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),r("el-form-item",{attrs:{label:""}},[r("operation-wrapper",[r("iep-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)],1)],1)},a=[],n=r("4525"),o=r("7ded"),i=r("50cd"),s=r("4360"),l={data:function(){var e=this;return{dictsMap:i["b"],backOption:{isBack:!0,backPath:null,backFunction:function(){e.onGoBack()}},rules:i["g"],form:Object(i["d"])(),headers:{Authorization:"Bearer "+s["a"].getters.access_token}}},computed:{certId:function(){return+this.$route.params.certId},methodName:function(){return this.certId?"编辑":"发布"}},created:function(){var e=this;this.certId&&Object(n["d"])(this.certId).then(function(t){var r=t.data;e.form=e.$mergeByFirst(Object(i["d"])(),r.data)})},mounted:function(){},methods:{onGoBack:function(){this.$router.push({path:"/cert_spa/cert_list"})},handleSubmit:function(e){var t=this,r=this.certId?n["i"]:n["h"];this.$refs["form"].validate(function(c){if(c){var a=!0===e;Object(o["c"])().then(function(e){var r=e.data;t.form.userId=r.data.sysUser.userId}),r(Object(i["c"])(t.form),a).then(function(e){var r=e.data;r.data&&(t.$message({message:"证书信息".concat(t.methodName,"成功"),type:"success"}),t.onGoBack())})}})}}},u=l,d=r("0c7c"),p=Object(d["a"])(u,c,a,!1,null,null,null);t["default"]=p.exports}}]);