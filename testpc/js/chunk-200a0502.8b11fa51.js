(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-200a0502"],{"2f9e":function(e,t,a){"use strict";a.d(t,"a",function(){return n});a("ac6a"),a("28a5"),a("a481");var r=a("b5c6");function n(e){var t=e.url,a=e.method,n=void 0===a?"post":a,o=e.data,s=void 0===o?{}:o,c=e.title,l=void 0===c?"":c;return console.log(t),new Promise(function(e){return Object(r["a"])({url:t,method:n,headers:{responseType:"arraybuffer"},data:s,responseType:"blob"}).then(function(t){i({title:l,response:t}).then(function(){e()})})})}function i(e){var t=e.title,a=void 0===t?"":t,r=e.response,n=o(r.headers["content-disposition"].replace(/"/g,""));return new Promise(function(e){var t=r.headers,i=new Blob([r.data],{type:t["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,a);else{var o=document.createElement("a");o.href=window.URL.createObjectURL(i),o.download=a?"".concat(a,".").concat(n.suffix):n.filename,document.body.appendChild(o),o.style.display="none",o.click()}e()})}function o(e){var t={},a=e.split(";");return a.forEach(function(e){var a=e.replace(/^\s+|\s+$/g,""),r=a.split("=");r[1]?t[r[0]]=r[1]:t[r[0]]=r[0]}),t.suffix=t.filename.split(".")[1],t}},"4b5d":function(e,t,a){},"502e":function(e,t,a){"use strict";var r=a("cebc"),n=(a("96cf"),a("3b8d")),i=a("51f4"),o={delete:"删除",shelf:"上架",submit:"提交",cancel:"撤销"};t["a"]={data:function(){return{pagedTable:[],multipleSelection:[],isLoadTable:!0,pagination:this._pageOption(),pageOption:this._pageOption(),searchForm:{}}},methods:{_pageOption:function(){return Object(i["a"])()},searchPage:function(e){this.pageOption=this._pageOption(),this.searchForm=e,this.loadPage(e)},loadTable:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var n,i,o,s,c,l,u,p,d,h=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=h.length>2&&void 0!==h[2]?h[2]:function(e){return e},this.isLoadTable=!0,e.next=4,a(Object(r["a"])({},this.pageOption,t));case 4:return i=e.sent,o=i.data,s=o.data,c=s.records,l=s.size,u=s.total,p=s.current,d=u/l+1===p,d&&0!==u?this.searchPage():this.pagination={current:p,size:l,total:u},this.pagedTable=c.map(n),this.isLoadTable=!1,e.abrupt("return",o.data);case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.pageOption.size=e,this.loadPage()},handleCurrentChange:function(e){this.pageOption.current=e,this.loadPage()},_handleGlobalDeleteById:function(e,t){this._handleGlobalById(e,t,"delete")},_handleGlobalDeleteAll:function(e){this._handleGlobalAll(e,"delete")},_handleGlobalById:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"delete",n=o[r];this.$confirm("此操作将".concat(n,"该数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t(e).then(function(e){e.data.data?a.$message({type:"success",message:"".concat(n,"成功!")}):a.$message({type:"info",message:"".concat(n,"失败，").concat(e.data.msg)}),a.loadPage()})})},_handleGlobalAll:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,r,i,s=this,c=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=c.length>1&&void 0!==c[1]?c[1]:"delete",r=this.multipleSelection,i=o[a],void 0!==r&&0!==r.length){e.next=6;break}return this.$message("请先选择需要".concat(i,"的选项")),e.abrupt("return");case 6:this.$confirm("此操作将".concat(i,"这些数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark(function e(){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t(r);case 2:a=e.sent,n=a.data,n.data?(s.$message({type:"success",message:"".concat(i,"成功!")}),s.pageOption=s._pageOption()):s.$message({type:"info",message:"".concat(i,"失败，").concat(n.msg)}),s.loadPage();case 6:case"end":return e.stop()}},e)})));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),_handleComfirm:function(e,t,a,r,i){var o=this;this.$confirm(r||"是否".concat(a),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark(function r(){var n,s;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t(e);case 2:n=r.sent,s=n.data,s.data?o.$message({type:"success",message:i||"".concat(a,"成功!")}):o.$message({type:"info",message:"".concat(s.msg)}),o.loadPage();case 6:case"end":return r.stop()}},r)}))).catch(function(e){o.$message({type:"info",message:"".concat(e,", 已取消").concat(a)})})},mixinsCellPointerStyle:function(e){var t=e.column;return"index"!==t.type&&"selection"!==t.type&&"操作"!==t.label&&"cursor:pointer"}}}},5612:function(e,t,a){"use strict";a.d(t,"h",function(){return o}),a.d(t,"b",function(){return s}),a.d(t,"i",function(){return c}),a.d(t,"k",function(){return l}),a.d(t,"n",function(){return u}),a.d(t,"a",function(){return p}),a.d(t,"o",function(){return d}),a.d(t,"p",function(){return h}),a.d(t,"c",function(){return m}),a.d(t,"d",function(){return f}),a.d(t,"f",function(){return g}),a.d(t,"q",function(){return b}),a.d(t,"e",function(){return _}),a.d(t,"u",function(){return w}),a.d(t,"j",function(){return v}),a.d(t,"l",function(){return O}),a.d(t,"g",function(){return y}),a.d(t,"m",function(){return I}),a.d(t,"s",function(){return x}),a.d(t,"t",function(){return j}),a.d(t,"r",function(){return N});var r=a("b5c6"),n=a("2f9e"),i="/tmlms/crew";function o(e){return Object(r["a"])({url:"".concat(i,"/Page"),method:"get",params:e})}function s(e){return Object(r["a"])({url:"".concat(i,"/countWithShip?shipId=").concat(e),method:"get",params:e})}function c(e){return Object(r["a"])({url:"".concat(i,"/findByShipId?shipId=").concat(e),method:"get",params:e})}function l(e){return Object(r["a"])({url:"".concat(i,"/pageWithShip"),method:"get",params:e})}function u(e){return Object(r["a"])({url:"".concat(i,"/shipLogPage"),method:"get",params:e})}function p(e){return Object(r["a"])({url:"".concat(i,"/checkMoreRelations"),method:"post",data:e})}function d(e,t){return Object(r["a"])({url:"".concat(i,"/create?type=").concat(t),method:"post",data:e})}function h(e,t){return Object(r["a"])({url:"".concat(i,"/batchCreate?type=").concat(t),method:"post",data:e,timeout:3e5})}function m(e){return Object(r["a"])({url:"".concat(i,"/delete?idcard=").concat(e),method:"post"})}function f(e,t){return Object(r["a"])({url:"".concat(i,"/deleteRelation?idcard=").concat(e,"&&shipId=").concat(t),method:"post"})}function g(e,t){return Object(r["a"])({url:"".concat(i,"/edit?type=").concat(t),method:"post",data:e})}function b(e,t){return Object(r["a"])({url:"".concat(i,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}function _(e){return Object(r["a"])({url:"".concat(i,"/getCrewByidcard?idcard=").concat(e),method:"get"})}function w(e){return Object(r["a"])({url:"admin/file/upload/avatar",method:"post",data:e})}function v(e){return Object(r["a"])({url:"".concat(i,"/idcardcheck?idcard=").concat(e),method:"get"})}function O(e){return Object(r["a"])({url:"".concat(i,"/idcardcheck?idcard=").concat(e),method:"get"})}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"船员信息";return Object(n["a"])({url:"tmlms/tybmlmsExcelExport/downloadCrew",data:e,title:t})}function I(e){return Object(r["a"])({url:"".concat(i,"/badPage"),method:"get",params:e})}function x(e){return Object(r["a"])({url:"".concat(i,"/badUpdateBatch"),method:"post",data:e})}function j(e){return Object(r["a"])({url:"".concat(i,"/uploadBaseImage"),method:"post",data:e})}function N(e){return Object(r["a"])({url:"".concat(i,"/updateCertByIdcard"),method:"post",params:e})}},"7fc8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("basic-container",[a("page-header",{attrs:{title:"一船一档"}}),a("operation-container",[a("template",{slot:"left"},[e.mlms_ship_add?a("iep-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")]):e._e(),a("iep-button",{attrs:{type:"default"},on:{click:e.handleFresh}},[e._v("刷新")])],1),a("template",{slot:"right"},[e.roles.includes(112)?e._e():a("span",{staticStyle:{width:"185px"}},[a("el-select",{attrs:{placeholder:"基层组织",size:"small",clearable:""},model:{value:e.searchOrg,callback:function(t){e.searchOrg=t},expression:"searchOrg"}},e._l(e.orgSearchList,function(e){return a("el-option",{key:e.index,attrs:{label:e.villageName,value:e.userId}})}),1)],1),a("span",{staticStyle:{width:"110px"}},[a("el-select",{attrs:{placeholder:"合同状态",size:"small",clearable:""},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},e._l(e.contractList,function(e){return a("el-option",{key:e.index,attrs:{label:e.label,value:e.value}})}),1)],1),a("span",{staticClass:"width130"},[a("el-input",{attrs:{placeholder:"船名号",size:"small",clearable:""},model:{value:e.params.shipName,callback:function(t){e.$set(e.params,"shipName","string"===typeof t?t.trim():t)},expression:"params.shipName"}})],1),a("span",{staticClass:"width130"},[a("el-input",{attrs:{placeholder:"渔船编号",size:"small",clearable:""},model:{value:e.params.shipNo,callback:function(t){e.$set(e.params,"shipNo","string"===typeof t?t.trim():t)},expression:"params.shipNo"}})],1),a("span",{staticClass:"width130"},[a("el-input",{attrs:{placeholder:"持证人姓名",size:"small",clearable:""},model:{value:e.params.shipowner,callback:function(t){e.$set(e.params,"shipowner","string"===typeof t?t.trim():t)},expression:"params.shipowner"}})],1),a("span",{staticClass:"width180"},[a("el-input",{attrs:{placeholder:"持证人身份证",size:"small",clearable:""},model:{value:e.params.shipownerIdcard,callback:function(t){e.$set(e.params,"shipownerIdcard","string"===typeof t?t.trim():t)},expression:"params.shipownerIdcard"}})],1),a("el-button",{attrs:{size:"small"},on:{click:e.getParamData}},[e._v("搜索")])],1)],2),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pagedTable,stripe:""}},[e._l(e.options.columns,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.value,label:e.text}})}),e.roles.includes(115)?e._e():a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operation-wrapper",[e.manager&&e.mlms_ship_edit?a("iep-button",{attrs:{size:"mini",plain:""},on:{click:function(a){return e.handleEdit(t.row.shipId)}}},[e._v("编辑")]):e._e(),e.mlms_ship_change&&!e.roles.includes(112)?a("iep-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleChange(t.row.shipId)}}},[e._v("变更")]):e._e(),e.mlms_ship_area&&!e.roles.includes(112)?a("iep-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleChangeArea(t.row.shipId,t.row.orgId)}}},[e._v("区域")]):e._e()],1)]}}],null,!1,1184196099)}),a("el-table-column",{attrs:{prop:"particular",label:"详情",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operation-wrapper",[e.mlms_ship_template||e.mlms_ship_download&&t.row.contractModelStatus?a("el-dropdown",[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("\n                模板"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.mlms_ship_template?a("el-dropdown-item",[a("span",{on:{click:function(a){return e.handleTmp(t.row.shipName,t.row.contractModelStatus)}}},[e._v("生成")])]):e._e(),e.mlms_ship_download&&t.row.contractModelStatus?a("el-dropdown-item",[a("span",{on:{click:function(a){return e.handlePrint(t.row.shipName)}}},[e._v("下载")])]):e._e()],1)],1):e._e(),e.mlms_ship_crew?a("iep-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleAllCrew(t.row.shipId,t.row.shipName,t.row)}}},[e._v("船员")]):e._e(),e.mlms_ship_shareholder&&1==t.row.shipShare?a("iep-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleHodler(t.row.shipId,t.row.shipName)}}},[e._v("股东")]):e._e(),e.mlms_ship_contract?a("iep-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleCrew(t.row)}}},[e._v("合同")]):e._e(),e.mlms_ship_export||e.mlms_shipname_export?a("el-dropdown",[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("\n                导出"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.mlms_ship_export?a("el-dropdown-item",[a("span",{on:{click:function(a){return e.exportInfo(t.row.shipId,t.row.shipName)}}},[e._v("开航登记表")])]):e._e(),e.mlms_shipname_export?a("el-dropdown-item",[a("span",{on:{click:function(a){return e.exportShipInfo(t.row.shipId,t.row.shipName)}}},[e._v("船员登记表")])]):e._e()],1)],1):e._e(),e.mlms_ship_danger?a("iep-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleDanger(t.row)}}},[e._v("隐患排查")]):e._e()],1)]}}])})],2),a("el-dialog",{attrs:{title:"基层组织变更",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form"},[a("el-form-item",{attrs:{label:"请选择基层组织","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择",width:"150"},model:{value:e.chooseOrg,callback:function(t){e.chooseOrg=t},expression:"chooseOrg"}},e._l(e.orgList,function(e){return a("el-option",{key:e.index,attrs:{label:e.villageName,value:e.userId}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"区域组织变更",visible:e.areadialogVisible},on:{"update:visible":function(t){e.areadialogVisible=t}}},[a("el-form",{ref:"form"},[a("el-form-item",{attrs:{label:"请选择区域组织","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择",width:"150"},model:{value:e.areachooseOrg,callback:function(t){e.areachooseOrg=t},expression:"areachooseOrg"}},e._l(e.areaorgList,function(e){return a("el-option",{key:e.index,attrs:{label:e.name,value:e.orgId}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.areadialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.savearea}},[e._v("确 定")])],1)],1),a("div",{staticStyle:{"text-align":"center",margin:"20px 0"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.total,"page-size":e.params.size,"current-page":e.params.current},on:{"update:currentPage":function(t){return e.$set(e.params,"current",t)},"update:current-page":function(t){return e.$set(e.params,"current",t)},"size-change":e.handleSizeChange,"current-change":e.currentChange}})],1)],1)],1)},n=[],i=(a("a481"),a("96cf"),a("3b8d")),o=(a("ac6a"),a("cebc")),s=a("daa6"),c=a("5612"),l=a("ade3"),u=a("502e"),p=a("8b00"),d=a("7ded"),h=a("2f62"),m={mixins:[u["a"]],data:function(){return{pagedTabl:[],columnsMap:p["d"],total:10,params:{current:1,size:10,shipName:"",shipNo:"",shipowner:"",shipownerIdcard:"",status:""},options:{expandAll:!1,columns:[{value:"villageId",text:"基层组织"},{value:"shipName",text:"渔船名"},{value:"shipNo",text:"渔船编号"},{value:"shipowner",text:"持证人"},{value:"shipownerIdcard",text:"持证人身份证"},{value:"licensesOwnerShip",text:"所有权登记证"},{value:"countCrews",text:"合同/人数"}]},manager:!1,userData:{},dialogVisible:!1,areadialogVisible:!1,orgList:[],areaorgList:[],orgSearchList:[],chooseOrg:"",areachooseOrg:"",searchOrg:"",formLabelWidth:"120px",shipId:"",areaShipId:"",villageId:"",contractList:[{value:" ",label:"全部"},{value:1,label:"已签合同"}],contractStatus:"",exportParams:{shipId:""},exist:"",modelParams:{shipName:""},mlms_ship_add:!1,mlms_ship_edit:!1,mlms_ship_change:!1,mlms_ship_area:!1,mlms_ship_template:!1,mlms_ship_crew:!1,mlms_ship_contract:!1,mlms_ship_shareholder:!1,mlms_ship_download:!1,mlms_ship_export:!1,mlms_shipname_export:!1,mlms_ship_danger:!1}},created:function(){if(sessionStorage.getItem("query")){var e=sessionStorage.getItem("query");this.params=JSON.parse(e)}else this.params={current:1,size:10,shipName:"",shipNo:"",shipowner:"",shipownerIdcard:"",status:""};this.getData(),this.isManager(),this.getVillageOrg(),this.mlms_ship_add=this.permissions["mlms_ship_add"],this.mlms_ship_edit=this.permissions["mlms_ship_edit"],this.mlms_ship_change=this.permissions["mlms_ship_change"],this.mlms_ship_area=this.permissions["mlms_ship_area"],this.mlms_ship_template=this.permissions["mlms_ship_template"],this.mlms_ship_crew=this.permissions["mlms_ship_crew"],this.mlms_ship_contract=this.permissions["mlms_ship_contract"],this.mlms_ship_shareholder=this.permissions["mlms_ship_shareholder"],this.mlms_ship_download=this.permissions["mlms_ship_download"],this.mlms_ship_export=this.permissions["mlms_ship_export"],this.mlms_shipname_export=this.permissions["mlms_shipname_export"],this.mlms_ship_danger=this.permissions["mlms_ship_danger"]},computed:Object(o["a"])({},Object(h["c"])(["userInfo","roles","permissions"])),methods:{handleDanger:function(e){this.$router.push({path:"/danger/all?shipName=".concat(e.shipName)})},handleFresh:function(){this.getData()},savearea:function(){var e=this;Object(l["b"])(this.areaShipId,this.areachooseOrg).then(function(t){t.data.data&&(e.$message.success("区域组织变更成功"),e.areadialogVisible=!1)})},save:function(){var e=this;if(this.userInfo.userId&&this.shipId){var t=this.shipId;Object(l["c"])(t,this.chooseOrg).then(function(t){t.data.data&&(e.$message.success("变更成功"),e.dialogVisible=!1)})}},exportInfo:function(e,t){var a=this;this.exportParams.shipId=e,this.exportParams.shipName=t,Object(l["h"])(this.exportParams).catch(function(e){a.$message({type:"warning",message:e})})},exportShipInfo:function(e,t){var a=this;this.exportParams.shipId=e,this.exportParams.shipName=t,Object(l["i"])(this.exportParams).catch(function(e){a.$message({type:"warning",message:e})})},getVillageOrg:function(){var e=this;Object(s["g"])().then(function(t){e.orgList=t.data.data,e.orgSearchList=e.orgList.slice(),e.orgSearchList.unshift({userId:" ",villageName:"全部"})})},handleSelectionChange:function(e){this.multipleSelection=e.map(function(e){return e.id})},handleSizeChange:function(e){this.params.size=e,this.params.current=1,this.getData()},currentChange:function(e){this.params.current=e,this.getData()},handleAdd:function(){this.$router.push({path:"/hrms_spa/village_ship_detail",query:{add:"add"}})},handleHodler:function(e,t){this.$router.push({path:"/hrms_spa/shipShareHolder/".concat(e),query:{shipName:t}})},handleChange:function(e){this.shipId=e,this.dialogVisible=!0},handleChangeArea:function(e,t){var a=this;t=0,this.areaShipId=e,Object(l["k"])(e,t).then(function(e){a.areaorgList=e.data.data}),this.areadialogVisible=!0},handleView:function(e){this.$router.push({path:"/hrms_spa/village_ship_detail",query:{see:e}})},handleEdit:function(e){this.$router.push({path:"/hrms_spa/village_ship_detail",query:{edit:e}})},handleTmp:function(e,t){var a;a=t?"edit":"add",this.$router.push({path:"/tmlms_spa/contract_tmp/".concat(e),query:{operate:"".concat(a)}})},handlePrint:function(e){var t=this;this.modelParams.shipName=e,Object(l["f"])(this.modelParams).catch(function(e){t.$message({type:"warning",message:e})})},getData:function(){var e=this;Object(l["s"])(this.params).then(function(t){t.data.data.records.forEach(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return 0==t.villageId?t.villageId="--":Object(s["g"])().then(function(e){e.data.data.map(function(e){e.userId==t.villageId&&(t.villageId=e.villageName)})}),t.countCrews="",e.next=4,Object(c["b"])(t.shipId).then(function(e){return e.data.data.contract+"/"+e.data.data.crew});case 4:t.countCrews=e.sent,"0"===t.shipNo&&(t.shipNo="请完善"),""===t.shipowner&&(t.shipowner="请完善"),"0"===t.shipownerIdcard&&(t.shipownerIdcard="请完善"),0===t.hullLength&&(t.hullLength="请完善");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.$nextTick(function(){e.pagedTable=t.data.data.records}),e.total=t.data.data.total})},handleIntoinsure:function(e){this.$router.push({path:"/hrms_spa/ship_insure_list/".concat(e)})},handleCrew:function(e){this.$router.push({path:"/hrms_spa/ship_crew/".concat(e.shipNo),query:{shipName:e.shipName}})},handleAllCrew:function(e,t,a){this.$router.push({path:"/hrms_spa/ship_allcrew/".concat(e),query:{shipName:"".concat(t),shipowner:a.shipowner,mobile:a.mobile}})},handleOperat:function(e,t){this.$router.push({path:"/hrms_spa/ship_operat/".concat(e),query:{shipNo:t}})},getParamData:function(){this.params.userId=this.searchOrg,this.params.shipName=this.params.shipName.replace(/\s*/g,""),this.params.shipNo=this.params.shipNo.replace(/\s*/g,""),this.params.shipowner=this.params.shipowner.replace(/\s*/g,""),this.params.shipownerIdcard=this.params.shipownerIdcard.replace(/\s*/g,""),this.params.current=1,this.getData()},isManager:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["c"])().then(function(e){return e.data.data});case 2:this.userData=e.sent,-1===this.userData.roles.indexOf(111)&&-1===this.userData.roles.indexOf(1)&&-1===this.userData.roles.indexOf(112)||(this.manager=!0);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},activated:function(){var e=parseInt(this.history.getItem("pageIndex"))||1;this.searchData(e)},watch:{params:function(){sessionStorage.setItem("query",JSON.stringify(this.params))}},beforeUpdate:function(){sessionStorage.setItem("query",JSON.stringify(this.params))}},f=m,g=(a("c7e14"),a("0c7c")),b=Object(g["a"])(f,r,n,!1,null,"2f7884fc",null);t["default"]=b.exports},"8b00":function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"i",function(){return f}),a.d(t,"f",function(){return d}),a.d(t,"g",function(){return g}),a.d(t,"l",function(){return _}),a.d(t,"e",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"h",function(){return c}),a.d(t,"k",function(){return s}),a.d(t,"j",function(){return l}),a.d(t,"b",function(){return u}),a.d(t,"a",function(){return p});a("3b2b");var r=a("0e0b"),n=[{prop:"shipName",label:"渔船名"},{prop:"shipNo",label:"渔船编号"},{prop:"shipowner",label:"持证人"},{prop:"shipownerIdcard",label:"持证人身份证"},{prop:"hullLength",label:"船长(m)"}],i=[{prop:"realName",label:"姓名"},{prop:"idcard",label:"身份证号码"},{prop:"phone",label:"联系电话"},{prop:"positionId",label:"现任职位",dictName:"tyb_resume_position",type:"dictGroup"},{prop:"workStatus",label:"用工状态"}],o=[{prop:"realName",label:"姓名"},{prop:"idcard",label:"身份证号码"},{prop:"workStatus",label:"用工状态"},{prop:"phone",label:"手机号码"},{prop:"certName",label:"职务证书"},{prop:"flag",label:"来源"},{prop:"provinceIdName",label:"籍贯"}],s=[{prop:"employeeName",label:"姓名"},{prop:"employeeIdcard",label:"身份证号码"},{prop:"employeePhone",label:"联系电话"},{prop:"employeePosition",label:"职位",dictName:"tyb_resume_position",type:"dictGroup"},{prop:"provinceIdName",label:"籍贯"}],c=[{prop:"shipName",label:"船名号"},{prop:"realname",label:"姓名"}],l=[{prop:"realName",label:"姓名"},{prop:"idcard",label:"身份证"},{prop:"positionId",label:"职位",dictName:"tyb_resume_position",type:"dictGroup"},{prop:"phone",label:"电话"},{prop:"address",label:"地址"}],u=[{prop:"realName",label:"姓名",width:"180"},{prop:"idcard",label:"身份证",width:"230"},{prop:"certNames",label:"职务证书"},{prop:"shipNames",label:"已登记的渔船"},{prop:"leftTime",label:"最近上船时间",width:"210"}],p=[{prop:"realName",label:"姓名"},{prop:"idcard",label:"身份证"},{prop:"shipId",label:"船名"},{prop:"flag",label:"上下船类型"},{prop:"sourceType",label:"来源"},{prop:"leftTime",label:"最近上船时间"}],d=function(){return{activityType:"",address:"",buildDate:"",createTime:"",dualPower:"",engineTotalPower:"",fishType:"",fishingGear:"",grossTonnage:"",hullLength:"",hullMaterial:"",licensesFishingExpireDate:"",licensesInspectionExpireDate:"",licensesNationalExpireDate:"",licensesOwnerExpireDate:"",licensesDateExpire:"",licensesDateIssue:"",licensesFishingNo:"",licensesInspectionNo:"",licensesNationalNo:"",licensesOwnerShip:"",mainEngineModel:"",mainEnginePower:"",mobile:"",mouldedBreadth:"",mouldedDepth:"",netTonnage:"",portRegister:"",shipId:"",shipName:"",shipNo:"",shipShare:"",shipowner:"",shipownerIdcard:"",updateTime:"",userId:"",workMode:"",workMode2:"",zipcode:"",regionId:""}};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new RegExp("^\\d{0,"+t+"}$");if(0===a)return r.test(e);var n=new RegExp("^\\d{0,"+t+"}\\.\\d{0,"+a+"}$");return r.test(e)||n.test(e)}function m(e,t,a){""===t?a(new Error):h(t,e.length,e.decimal)?a():a(new Error)}var f={regionId:[{required:!0,message:"该选项必填！",trigger:"blur"}],address:[{required:!0,message:"该选项必填！",trigger:"blur"}],createTime:[{required:!0,message:"该选项必填！",trigger:"blur"}],licensesFishingNo:[{required:!0,message:"该选项必填！",trigger:"blur"}],licensesOwnerShip:[{required:!0,message:"该选项必填！",trigger:"blur"}],mobile:[{required:!0,validator:m,trigger:"blur",length:11,decimal:0,message:"请输入正确的手机号码！"}],shipId:[{required:!0,message:"该选项必填！",trigger:"blur"}],shipName:[{required:!0,message:"该选项必填！",trigger:"blur"}],shipNo:[{required:!0,message:"该选项必填！",trigger:"blur"}],shipShare:[{required:!0,message:"该选项必填！",trigger:"change"}],shipowner:[{required:!0,message:"该选项必填！",trigger:"blur"}],shipownerIdcard:[{required:!0,trigger:"blur",max:18,min:18,decimal:0,message:"请输入正确的身份证/企业代码！"}],updateTime:[{required:!0,message:"该选项必填！",trigger:"blur"}]},g=function(){return{shipName:"",shipNo:"",shipowner:"",shipownerIdcard:""}},b=function(){return{shipName:"",shipNo:"",shipowner:"",shipownerIdcard:""}},_=function(e){var t=Object(r["g"])(b(),e);return t.shipName=e.shipName?e.shipName:null,t.shipNo=e.shipNo?e.shipNo:null,t.shipowner=e.shipowner?e.shipowner:null,t.shipownerIdcard=e.shipownerIdcard?e.shipownerIdcard:null,t}},ade3:function(e,t,a){"use strict";a.d(t,"p",function(){return o}),a.d(t,"c",function(){return s}),a.d(t,"k",function(){return c}),a.d(t,"b",function(){return l}),a.d(t,"m",function(){return u}),a.d(t,"o",function(){return p}),a.d(t,"d",function(){return d}),a.d(t,"w",function(){return h}),a.d(t,"e",function(){return m}),a.d(t,"l",function(){return f}),a.d(t,"q",function(){return g}),a.d(t,"r",function(){return b}),a.d(t,"j",function(){return _}),a.d(t,"n",function(){return w}),a.d(t,"s",function(){return v}),a.d(t,"g",function(){return O}),a.d(t,"h",function(){return y}),a.d(t,"i",function(){return I}),a.d(t,"f",function(){return x}),a.d(t,"u",function(){return j}),a.d(t,"v",function(){return N}),a.d(t,"a",function(){return k}),a.d(t,"t",function(){return S});var r=a("b5c6"),n=a("2f9e"),i="/tybship/tybship";function o(e){return Object(r["a"])({url:"".concat(i,"/otherpage"),method:"get",params:e})}function s(e,t){return Object(r["a"])({url:"".concat(i,"/updateVillage?shipId=").concat(e,"&&villageId=").concat(t),method:"post"})}function c(e,t){return Object(r["a"])({url:"".concat(i,"/getFixOrgIds?shipId=").concat(e,"&&orgId=").concat(t),method:"get"})}function l(e,t){return Object(r["a"])({url:"".concat(i,"/updateOrgId?shipId=").concat(e,"&&orgId=").concat(t),method:"post"})}function u(e){return Object(r["a"])({url:"".concat(i,"/").concat(e),method:"get",params:e})}function p(e){return Object(r["a"])({url:"".concat(i,"/").concat(e),method:"get"})}function d(e){return Object(r["a"])({url:"".concat(i,"/save"),method:"post",data:e})}function h(e){return Object(r["a"])({url:"".concat(i,"/update"),method:"post",data:e})}function m(e){return Object(r["a"])({url:"".concat(i,"/del/").concat(e),method:"post"})}function f(e){return Object(r["a"])({url:"".concat(i,"/mypage"),method:"get",params:e})}function g(e){return Object(r["a"])({url:"".concat(i,"/findship/").concat(e),method:"get"})}function b(e){return Object(r["a"])({url:"".concat(i,"/findshipWithOutOrg/").concat(e),method:"get"})}function _(e){return Object(r["a"])({url:"".concat(i,"/findmyship/").concat(e),method:"get"})}function w(e){return Object(r["a"])({url:"".concat(i,"/searchByshipNo"),method:"get",params:{shipNo:e}})}function v(e){return Object(r["a"])({url:"".concat(i,"/newpage"),method:"get",params:e})}function O(e){return Object(n["a"])({url:"tybship/tybshipExcelExport/downShipInfo",data:e,title:"渔船信息"})}function y(e){return Object(n["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrew",data:e,title:e.shipName})}function I(e){return Object(n["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewTwoOld ",data:e,title:e.shipName})}function x(e){return Object(n["a"])({url:"tmlms/tybmlmsExcelExport/downContractModel",data:e,title:e.shipName})}function j(e){return Object(r["a"])({url:"tmlms/tyb_order/page",method:"get",params:e})}function N(e){return Object(r["a"])({url:"tmlms/tyb_order/getById",method:"get",params:e})}function k(e){return Object(r["a"])({url:"tmlms/tyb_order/agree",method:"post",data:e})}function S(e){return Object(r["a"])({url:"tmlms/tyb_order/reject",method:"post",data:e})}},c7e14:function(e,t,a){"use strict";var r=a("4b5d"),n=a.n(r);n.a},ca82:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.currentComponet,{tag:"component",attrs:{record:e.record}})},n=[],i=(a("7f7f"),a("7fc8")),o={name:"TableListWrapper",components:{List:i["default"]},data:function(){return{currentComponet:"List",record:""}},created:function(){},methods:{handleGoBack:function(){this.record="",this.currentComponet="List"}},watch:{"$route.path":function(){this.record="",this.currentComponet="List"}},beforeRouteLeave:function(e,t,a){console.log(e),"/hrms_spa/village_ship_detail"!==e.path&&"contract_tmp"!==e.name&&"渔船下所有船员"!==e.name&&"渔船股东"!==e.name&&"渔船船员表单"!==e.name&&sessionStorage.removeItem("query"),a()}},s=o,c=a("0c7c"),l=Object(c["a"])(s,r,n,!1,null,null,null);t["default"]=l.exports},daa6:function(e,t,a){"use strict";a.d(t,"f",function(){return i}),a.d(t,"g",function(){return o}),a.d(t,"i",function(){return s}),a.d(t,"a",function(){return c}),a.d(t,"c",function(){return l}),a.d(t,"b",function(){return u}),a.d(t,"j",function(){return p}),a.d(t,"h",function(){return d}),a.d(t,"d",function(){return h}),a.d(t,"e",function(){return m});var r=a("b5c6"),n="/tmlms/village";function i(e){return Object(r["a"])({url:"".concat(n,"/page"),method:"get",params:e})}function o(){return Object(r["a"])({url:"".concat(n,"/getVillageByOrg"),method:"get"})}function s(e,t){return Object(r["a"])({url:"".concat(n,"/create?type=").concat(t),method:"post",data:e})}function c(e){return Object(r["a"])({url:"".concat(n,"/delete?userId=").concat(e),method:"post"})}function l(e,t){return Object(r["a"])({url:"".concat(n,"/edit?type=").concat(t),method:"post",data:e})}function u(e){return Object(r["a"])({url:"".concat(n,"/detail?userId=").concat(e),method:"get"})}function p(e,t){return Object(r["a"])({url:"".concat(n,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}function d(e){return Object(r["a"])({url:"".concat(n,"/page/villageshipowner"),method:"get",params:e})}function h(e){return Object(r["a"])({url:"".concat(n,"/getByVillagename"),method:"get",params:e})}function m(e){return Object(r["a"])({url:"/tmlms/relationship/countRecordWithShip",method:"get",params:e})}}}]);