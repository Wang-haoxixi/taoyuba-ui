(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-040d9840"],{"9e74":function(t,e,a){},d96d:function(t,e,a){"use strict";var n=a("9e74"),o=a.n(n);o.a},da6a:function(t,e,a){"use strict";a.d(e,"d",function(){return i}),a.d(e,"c",function(){return c}),a.d(e,"a",function(){return s}),a.d(e,"e",function(){return l}),a.d(e,"b",function(){return u});var n=a("7618"),o=a("b5c6"),r="/mlms/materiallevel";function i(t){return Object(o["a"])({url:"".concat(r,"/page"),method:"get",params:t})}function c(){return Object(o["a"])({url:"".concat(r,"/tree"),method:"get"})}function s(t){return Object(o["a"])({url:"".concat(r,"/create"),method:"post",data:t})}function l(t){return Object(o["a"])({url:"".concat(r,"/update"),method:"post",data:t})}function u(t){var e="object"===Object(n["a"])(t)?t:[t];return Object(o["a"])({url:"".concat(r,"/delete/batch"),method:"post",data:e})}},da8d:function(t,e,a){"use strict";a.d(e,"h",function(){return i}),a.d(e,"f",function(){return c}),a.d(e,"i",function(){return s}),a.d(e,"a",function(){return l}),a.d(e,"l",function(){return u}),a.d(e,"b",function(){return m}),a.d(e,"d",function(){return d}),a.d(e,"c",function(){return f}),a.d(e,"e",function(){return h}),a.d(e,"g",function(){return v}),a.d(e,"j",function(){return p}),a.d(e,"k",function(){return g});var n=a("7618"),o=a("b5c6"),r="/mlms/material";function i(t){return Object(o["a"])({url:"".concat(r,"/page"),method:"get",params:t})}function c(t){return Object(o["a"])({url:"".concat(r,"/page"),method:"get",params:t})}function s(t){return Object(o["a"])({url:"".concat(r,"/page/personal"),method:"get",params:t})}function l(t){return Object(o["a"])({url:"".concat(r,"/create"),method:"post",data:t})}function u(t){return Object(o["a"])({url:"".concat(r,"/update"),method:"post",data:t})}function m(t){var e="object"===Object(n["a"])(t)?t:[t];return Object(o["a"])({url:"".concat(r,"/delete/batch"),method:"post",data:e})}function d(t){return Object(o["a"])({url:"".concat(r,"/").concat(t),method:"get"})}function f(t){return Object(o["a"])({url:"".concat(r,"/getUpload/").concat(t),method:"get"})}function h(t){return Object(o["a"])({url:"".concat(r,"/excellent/list/").concat(t),method:"get"})}function v(t){return Object(o["a"])({url:"".concat(r,"/total/").concat(t),method:"get"})}function p(){return Object(o["a"])({url:"".concat(r,"/get/union"),method:"post"})}function g(t){return Object(o["a"])({url:"".concat(r,"/get/new/version"),method:"post",data:t})}},e1ce:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{oncontextmenu:"return "+(1!=t.formData.secrecyLevel),onselectstart:"return "+(1!=t.formData.secrecyLevel)}},[a("basic-container",[a("el-col",{staticClass:"left"},[a("page-header",{attrs:{title:t.formData.materialName,backOption:t.backOption}}),a("el-row",{staticClass:"info"},[a("div",{staticClass:"person"},[a("div",{staticClass:"name"},[t._v(t._s(t.formData.creatorRealName))]),a("div",{staticClass:"date"},[t._v(t._s(t.formData.createTime))]),a("div",[t._v(t._s(t.getClass(t.formData.firstClass,t.formData.secondClass).first)+" - "+t._s(t.getClass(t.formData.firstClass,t.formData.secondClass).second))])])]),a("el-row",{staticClass:"sub-title"},[a("pre",[t._v(t._s(t.formData.intro))])]),a("el-row",{staticClass:"content"},[a("iep-html",{model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),a("el-row",{staticClass:"down-load"},[t._v("\n        相关附件：\n        "),t._l(t.formData.attachFileList,function(e,n){return a("div",{key:n,staticClass:"file"},[a("div",{on:{click:function(a){return t.downLoad(e)}}},[a("i",{staticClass:"icon-fujian"}),t._v(t._s(e.name)),a("span",{staticClass:"tip"},[t._v("（消耗"+t._s(t.getMoney(t.formData.downloadCost))+"下载）")])])])})],2),a("el-row",{staticClass:"footer"},[a("div",{staticClass:"footer-left"},[a("iep-tag-detail",{model:{value:t.formData.tagKeyWords,callback:function(e){t.$set(t.formData,"tagKeyWords",e)},expression:"formData.tagKeyWords"}})],1),t.isDelete?a("div",{staticClass:"footer-right"},[a("IepFiveKay",[1==t.formData.collection?a("IepKeyItem",{attrs:{icon:"icon-aixin",name:"已收藏",isChecked:""},nativeOn:{click:function(e){return t.handleCollect(e)}}}):a("IepKeyItem",{attrs:{icon:"icon-heart",name:"收藏"},nativeOn:{click:function(e){return t.handleCollect(e)}}}),a("IepKeyItem",{attrs:{icon:"icon-share",name:"分享"},nativeOn:{click:function(e){return t.handleShare(e)}}}),a("IepKeyItem",{attrs:{icon:"icon-chakantiezigengduojubao",name:"纠错"},nativeOn:{click:function(e){return t.handleWrong(e)}}}),a("IepKeyItem",{attrs:{icon:"icon-xiaoxi",name:"评论"},nativeOn:{click:function(e){return t.handleComment(e)}}}),a("IepKeyItem",{attrs:{icon:"icon-yuanbao",name:"打赏"},nativeOn:{click:function(e){return t.handleReward(e)}}})],1)],1):t._e()]),a("el-row",{staticClass:"comment"},[t.isCommentShow?a("div",{staticClass:"form"},[a("h2",{staticClass:"title"},[t._v("评价评论 "),a("div",{staticClass:"rate"},[a("el-rate",{model:{value:t.comment.score,callback:function(e){t.$set(t.comment,"score",e)},expression:"comment.score"}})],1)]),a("el-input",{attrs:{type:"textarea",rows:"5",maxlength:"500"},model:{value:t.comment.commentContent,callback:function(e){t.$set(t.comment,"commentContent",e)},expression:"comment.commentContent"}}),a("div",{staticClass:"button"},[a("iep-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("发送")])],1)],1):t._e(),t._l(t.commentList,function(e,n){return a("div",{key:n,staticClass:"list"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.avatar,alt:""}})]),a("div",{staticClass:"comment-info"},[a("div",{staticClass:"name"},[t._v(t._s(e.realName)+" "),a("div",{staticClass:"rate"},[a("el-rate",{attrs:{disabled:""},model:{value:e.score,callback:function(a){t.$set(e,"score",a)},expression:"item.score"}})],1)]),a("p",[t._v(t._s(e.commentContent))]),a("div",{staticClass:"footer"},[a("div",{staticClass:"time"},[t._v(t._s(e.createTime))])])])])}),t.commentList.length>0?a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.pageSize.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],2)],1),a("el-col",{staticClass:"right"},[a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v(t._s(t.formData.creatorRealName))]),a("div",{staticClass:"num"},[t._v("共"+t._s(t.materialTotal)+"篇材料")]),a("div",{staticClass:"foot"},[a("iep-button",{attrs:{type:"primary"},on:{click:t.subscribe}},[t._v("订阅")]),a("iep-button",{attrs:{type:"primary"},on:{click:t.apprentice}},[t._v("向他拜师")])],1)]),a("div",{staticClass:"material"},[a("h3",[t._v("优秀材料")]),t._l(t.greatMaterialList,function(e,n){return a("p",{key:n,on:{click:function(a){return t.handleDetail(e)}}},[t._v(t._s(e.name))])})],2)]),a("wrongDialog",{ref:"wrong"}),a("collection-dialog",{ref:"collection",attrs:{type:"material",requestFn:t.createCollect},on:{"load-page":t.loadPage}}),a("share-dialog",{ref:"share",attrs:{type:"material"}})],1)],1)},o=[],r=(a("ac4d"),a("8a81"),a("ac6a"),a("7f7f"),a("cebc")),i=a("da8d"),c=a("9060"),s=a("2934"),l=a("d5c8"),u=a("6837"),m=a("38ef"),d=a("e44a"),f=a("2f62"),h=a("da6a");function v(){return{objectType:1,commentObjectId:0,commentContent:"",score:5}}var p={size:10,current:1,total:0},g={components:{wrongDialog:d["default"],CollectionDialog:l["default"],ShareDialog:m["default"]},props:{detailState:{type:Boolean,default:!1}},data:function(){var t=this;return{formData:{content:""},backOption:{isBack:!0,backPath:null,backFunction:function(){t.detailState?t.$emit("backPage",!1):t.$router.go(-1)}},comment:v(),commentList:[],materialTotal:0,greatMaterialList:[],isCommentShow:!1,createCollect:u["c"],pageSize:p,isDelete:!0,firstClass:[]}},computed:Object(r["a"])({},Object(f["c"])(["dictGroup"])),methods:{submit:function(){var t=this;""!=this.comment.commentContent?(this.comment.commentObjectId=this.formData.id,Object(c["a"])(this.comment).then(function(){t.getComment(t.formData.id),t.comment=v()})):this.$message.error("请先填写评论的内容！")},Instructions:function(){this.$refs["instrDialog"].open()},getComment:function(t){var e=this;Object(c["b"])({id:t,objectType:1,size:this.pageSize.size,current:this.pageSize.current}).then(function(t){var a=t.data;e.commentList=a.data.records,e.pageSize.total=a.data.total})},downLoad:function(t){this.formData.downloadCost>0?this.$message.error("对不起，您的余额不足！"):(Object(s["a"])(t),Object(i["c"])(this.formData.id))},handleDetail:function(t){this.$router.push("/mlms_spa/material/detail/".concat(t.id))},getDataById:function(t){var e=this;Object(i["d"])(t).then(function(t){var a=t.data;if(!a.data)return e.$message.error(a.msg),void(e.isDelete=!1);e.formData=a.data,e.getComment(a.data.id),Object(i["e"])(a.data.creator).then(function(t){var a=t.data;e.greatMaterialList=a}),Object(i["g"])(a.data.creator).then(function(t){var a=t.data;e.materialTotal=a.data})})},open:function(t){this.getDataById(t)},subscribe:function(){this.$message.info("抱歉，此功能正在开发中")},apprentice:function(){this.$message.info("抱歉，此功能正在开发中")},handleCollect:function(){if(1!=this.formData.collection){var t=Object(r["a"])({},this.formData);t.title=t.materialName,this.$refs["collection"].dialogShow=!0,this.$refs["collection"].loadCollectList([t])}else this.$message.warning("该材料已收藏，请勿重复操作！")},handleShare:function(){this.formData.name=this.formData.materialName,this.$refs["share"].open([this.formData],"关于 ".concat(this.formData.name," 材料的分享"))},handleWrong:function(){this.$refs["wrong"].open({subject:"纠错：".concat(this.formData.materialName),receiverIds:[this.formData.creator],receiverName:this.formData.creatorRealName})},handleComment:function(){this.isCommentShow=!this.isCommentShow},handleReward:function(){this.$message.info("抱歉，此功能正在开发中")},loadPage:function(){this.formData.collection=1,this.$emit("load-page",!0)},handleCurrentChange:function(t){this.pageSize.current=t,this.getComment(this.formData.id)},getMoney:function(t){var e=!0,a=!1,n=void 0;try{for(var o,r=this.dictGroup.mlms_download_cost[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;if(i.value==t)return i.label}}catch(c){a=!0,n=c}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}},getClass:function(t,e){var a={},n=!0,o=!1,r=void 0;try{for(var i,c=this.firstClass[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value;if(s.id==t){a.first=s.levelName;var l=!0,u=!1,m=void 0;try{for(var d,f=s.childrens[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;if(h.id==e)return a.second=h.levelName,a}}catch(v){u=!0,m=v}finally{try{l||null==f.return||f.return()}finally{if(u)throw m}}}}}catch(v){o=!0,r=v}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}}},created:function(){var t=this,e=this.$route.params;e.id&&"查看文档"==this.$route.name&&this.getDataById(e.id),Object(h["c"])().then(function(e){var a=e.data;t.firstClass=a.data})},beforeRouteUpdate:function(t,e,a){this.getDataById(t.params.id),a()}},b=g,C=(a("d96d"),a("0c7c")),D=Object(C["a"])(b,n,o,!1,null,"0c667807",null);e["default"]=D.exports}}]);