(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0a6481c"],{"1cf0":function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return s}),a.d(t,"e",function(){return l}),a.d(t,"b",function(){return c});var r=a("b5c6"),o="/tybship/tybshipmanager";function n(e){return Object(r["a"])({url:"/tmlms/tybshiphaver/otherpage",method:"get",params:e})}function i(e,t){return Object(r["a"])({url:"/tmlms/tybshiphaver/getShiphaver?shipName=".concat(e,"&bindType=").concat(t),method:"get"})}function s(e){return Object(r["a"])({url:"".concat(o,"/save"),method:"post",data:e})}function l(e){return Object(r["a"])({url:"".concat(o,"/update"),method:"post",data:e})}function c(e){return Object(r["a"])({url:"".concat(o,"/del/").concat(e),method:"post"})}},"2ceb":function(e,t,a){},"2f9e":function(e,t,a){"use strict";a.d(t,"a",function(){return o});a("ac6a"),a("28a5"),a("a481");var r=a("b5c6");function o(e){var t=e.url,a=e.method,o=void 0===a?"post":a,i=e.data,s=void 0===i?{}:i,l=e.title,c=void 0===l?"":l;return console.log(t),new Promise(function(e){return Object(r["a"])({url:t,method:o,headers:{responseType:"arraybuffer"},data:s,responseType:"blob"}).then(function(t){n({title:c,response:t}).then(function(){e()})})})}function n(e){var t=e.title,a=void 0===t?"":t,r=e.response,o=i(r.headers["content-disposition"].replace(/"/g,""));return new Promise(function(e){var t=r.headers,n=new Blob([r.data],{type:t["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,a);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=a?"".concat(a,".").concat(o.suffix):o.filename,document.body.appendChild(i),i.style.display="none",i.click()}e()})}function i(e){var t={},a=e.split(";");return a.forEach(function(e){var a=e.replace(/^\s+|\s+$/g,""),r=a.split("=");r[1]?t[r[0]]=r[1]:t[r[0]]=r[0]}),t.suffix=t.filename.split(".")[1],t}},"3a73":function(e,t,a){},"5b75":function(e,t,a){"use strict";var r=a("3a73"),o=a.n(r);o.a},6246:function(e,t,a){"use strict";var r=a("679f"),o=a.n(r);o.a},"679f":function(e,t,a){},"6b86":function(e,t,a){"use strict";var r=a("2ceb"),o=a.n(r);o.a},"8ee4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contract"},[a("basic-container",{attrs:{id:"pdfDom"}},[a("page-header",{attrs:{title:e.title}}),a("el-form",{ref:"form",staticClass:"form",attrs:{model:e.formData,size:"small","label-width":"120px",rules:e.rules}},[a("el-container",[a("el-aside",{staticClass:"side"},[a("div",{staticClass:"tex"},[e._v("持证人信息")])]),a("el-container",[a("el-header",{staticClass:"head"}),a("el-main",{staticClass:"mai"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"持证人姓名：",prop:"shipownerName"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"6",disabled:e.shipowner},model:{value:e.formData.shipownerName,callback:function(t){e.$set(e.formData,"shipownerName",t)},expression:"formData.shipownerName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号：",prop:"shipownerIdcard"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"18",disabled:e.shipowner},model:{value:e.formData.shipownerIdcard,callback:function(t){e.$set(e.formData,"shipownerIdcard",t)},expression:"formData.shipownerIdcard"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"船名：",prop:"shipName"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"20",disabled:e.shipowner},model:{value:e.formData.shipName,callback:function(t){e.$set(e.formData,"shipName",t)},expression:"formData.shipName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"船舶登记号：",prop:"shipLicenses"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"20",disabled:e.shipowner},model:{value:e.formData.shipLicenses,callback:function(t){e.$set(e.formData,"shipLicenses",t)},expression:"formData.shipLicenses"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话：",prop:"shipownerPhone"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"11"},on:{blur:e.changeInfor},model:{value:e.formData.shipownerPhone,callback:function(t){e.$set(e.formData,"shipownerPhone",t)},expression:"formData.shipownerPhone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"家庭地址：",prop:"shipownerAddr"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"20"},on:{blur:e.changeInfor},model:{value:e.formData.shipownerAddr,callback:function(t){e.$set(e.formData,"shipownerAddr",t)},expression:"formData.shipownerAddr"}})],1)],1)],1)],1)],1)],1),a("el-container",[a("el-aside",{staticClass:"sidea"},[a("div",{staticClass:"tex"},[e._v("甲方（雇主）")])]),a("el-container",[a("el-header",{staticClass:"head"}),a("el-main",{staticClass:"mai"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名：",prop:"employerName"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"6",disabled:e.employer},model:{value:e.formData.employerName,callback:function(t){e.$set(e.formData,"employerName",t)},expression:"formData.employerName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号：",prop:"employerIdcard"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"18",disabled:e.employer},model:{value:e.formData.employerIdcard,callback:function(t){e.$set(e.formData,"employerIdcard",t)},expression:"formData.employerIdcard"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签约人身份性质：",prop:"employerProp"}},[a("el-radio-group",{on:{change:e.employerPropChange},model:{value:e.formData.employerProp,callback:function(t){e.$set(e.formData,"employerProp",t)},expression:"formData.employerProp"}},[a("el-radio",{attrs:{label:1}},[e._v("船舶持证人")]),a("el-radio",{attrs:{label:2}},[e._v("船舶承租人")]),a("el-radio",{attrs:{label:3}},[e._v("船长或授权代理人")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"船名及船舶登记号："}},[a("div",[!e.formData.shipName||e.formData.shipName instanceof Object?e._e():a("div",{staticStyle:{"font-size":"10px"}},[e._v("船名："+e._s(e.formData.shipName))]),e.formData.shipName.shipName?a("div",{staticStyle:{"font-size":"10px"}},[e._v("船名："+e._s(e.formData.shipName.shipName))]):e._e(),e.formData.shipName||e.formData.shipName.shipName?e._e():a("div",{staticStyle:{"font-size":"10px"}},[e._v("船名：")]),a("div",{staticStyle:{"font-size":"10px"}},[e._v("船舶登记号："+e._s(e.formData.shipLicenses))])])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话：",prop:"employerPhone"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"11",disabled:e.employer},model:{value:e.formData.employerPhone,callback:function(t){e.$set(e.formData,"employerPhone",t)},expression:"formData.employerPhone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"船舶是否共有：",prop:"shipJoint"}},[a("el-radio-group",{model:{value:e.formData.shipJoint,callback:function(t){e.$set(e.formData,"shipJoint",t)},expression:"formData.shipJoint"}},[a("el-radio",{attrs:{label:1}},[e._v("是，"),a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"人数（数字）",size:"mini",type:"number"},model:{value:e.formData.shipJointYes,callback:function(t){e.$set(e.formData,"shipJointYes",t)},expression:"formData.shipJointYes"}}),e._v("共有（权证附后）")],1),a("el-radio",{attrs:{label:0}},[e._v("否，"+e._s(e.formData.shipownerName)+" 独有")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"地址：",prop:"employerAddr"}},[a("el-input",{staticStyle:{width:"380px"},attrs:{maxlength:"20",disabled:e.employer},model:{value:e.formData.employerAddr,callback:function(t){e.$set(e.formData,"employerAddr",t)},expression:"formData.employerAddr"}})],1)],1)],1)],1)],1)],1)],1),a("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[a("iep-button",{staticStyle:{"margin-right":"20px"},attrs:{disabeld:!1,type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")]),a("iep-button",{attrs:{disabeld:!1},on:{click:e.handleBack}},[e._v("返回")])],1)],1)],1)},o=[],n=a("4360"),i=a("1cf0"),s=a("ade3"),l=a("b5c6"),c="/tmlms/tybContractModel";function m(e){return Object(l["a"])({url:"".concat(c,"/save"),method:"post",data:e})}function p(e){return Object(l["a"])({url:"".concat(c,"/update"),method:"post",data:e})}function d(e){return Object(l["a"])({url:"".concat(c,"/getByShipName?shipName=").concat(e),method:"get",params:e})}var u={props:{record:{},type:{}},data:function(){return{formData:{shipownerName:"",shipownerIdcard:"",shipName:"",shipLicenses:"",shipownerPhone:"",shipownerAddr:"",employerName:"",employerIdcard:"",employerProp:1,employerPhone:"",shipJoint:0,otherContent:"",shipJointYes:"",shipJointNo:"",employerAddr:""},rules:{shipownerName:[{required:!0,message:"请输入持证人姓名",trigger:"blur"}],shipownerIdcard:[{required:!0,message:"请输入持证人身份证号",trigger:"blur"}],shipName:[{required:!0,message:"请输入持证人船名",trigger:"blur"}],shipLicenses:[{required:!0,message:"请输入持证人船舶登记号",trigger:"blur"}],shipownerPhone:[{required:!0,message:"请输入持证人联系电话",trigger:"blur"}],shipownerAddr:[{required:!0,message:"请输入持证人家庭地址",trigger:"blur"}],employerName:[{required:!0,message:"请输入甲方（雇主)姓名",trigger:"blur"}],employerIdcard:[{required:!0,message:"请输入甲方（雇主)身份证号",trigger:"blur"}],employerProp:[{required:!0,message:"请输入签约人身份性质",trigger:"blur"}],employerPhone:[{required:!0,message:"请输入甲方（雇主)联系电话",trigger:"blur"}],employerAddr:[{required:!0,message:"请输入甲方（雇主)地址",trigger:"blur"}]},headers:{Authorization:"Bearer "+n["a"].getters.access_token},isLicenses:!1,isContract:!1,shipowner:!1,employee:!1,checkEmployeeIdcard:!1,employer:!1,title:""}},created:function(){this.getShipDetail(),this.getTitle()},methods:{changeInfor:function(){1==this.formData.employerProp&&(this.formData.employerPhone=this.formData.shipownerPhone,this.formData.employerAddr=this.formData.shipownerAddr)},getTitle:function(){this.title=this.$route.params.shipName+"渔船生成合同模板"},getShipDetail:function(){var e=this;"add"==this.$route.query.operate&&Object(s["j"])(this.$route.params.shipName).then(function(t){var a=t.data.data;e.formData.shipownerName=a.shipowner,e.formData.shipownerIdcard=a.shipownerIdcard,e.formData.shipName=a.shipName,e.formData.shipLicenses=a.licensesOwnerShip,e.formData.shipownerPhone=a.mobile,e.formData.shipownerAddr=a.address,e.shipowner=!0,e.formData.employerName=e.formData.shipownerName,e.formData.employerIdcard=e.formData.shipownerIdcard,e.formData.employerPhone=e.formData.shipownerPhone,e.formData.employerAddr=e.formData.shipownerAddr,e.employer=!0}),"edit"==this.$route.query.operate&&d(this.$route.params.shipName).then(function(t){e.formData=t.data.data,e.shipowner=!0,1==e.formData.employerProp&&(e.employer=!0)})},handleBack:function(){this.$router.go(-1)},employerPropChange:function(e){var t=this;1===e?(this.formData.employerName=this.formData.shipownerName,this.formData.employerIdcard=this.formData.shipownerIdcard,this.formData.employerPhone=this.formData.shipownerPhone,this.formData.employerAddr=this.formData.shipownerAddr,this.employer=!0):2===e?(this.formData.employerName="",this.formData.employerIdcard="",this.formData.employerPhone="",this.formData.employerAddr="",Object(i["c"])(this.formData.shipName.shipName).then(function(e){e.data.data&&(t.formData.employerName=e.data.data.realname,t.formData.employerIdcard=e.data.data.idcard,t.formData.employerPhone=e.data.data.phone,t.formData.employerAddr=e.data.data.address)}),this.employer=!1):3===e&&(this.formData.employerName="",this.formData.employerIdcard="",this.formData.employerPhone="",this.formData.employerAddr="",this.employer=!1)},handleSubmit:function(){var e=this;this.formData.shipJointNo=this.formData.shipownerName,this.formData.shipName.shipName&&(this.formData.shipName=this.formData.shipName.shipName),this.$refs["form"].validate(function(t){t?e.$confirm("请确认当前合同信息是否正确，提交后将无法修改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e.formData),"add"==e.$route.query.operate?m(e.formData).then(function(t){console.log(t),e.$message.success("合同模板已生成"),e.$router.go(-1)}):"edit"==e.$route.query.operate&&p(e.formData).then(function(){e.$message.success("合同模板修改成功"),e.$router.go(-1)})}):e.$message.error("请确认已经填写了所有必填信息！")})}}},h=u,f=(a("5b75"),a("6b86"),a("6246"),a("0c7c")),b=Object(f["a"])(h,r,o,!1,null,"396b65bb",null);t["default"]=b.exports},ade3:function(e,t,a){"use strict";a.d(t,"p",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"k",function(){return l}),a.d(t,"b",function(){return c}),a.d(t,"m",function(){return m}),a.d(t,"o",function(){return p}),a.d(t,"d",function(){return d}),a.d(t,"w",function(){return u}),a.d(t,"e",function(){return h}),a.d(t,"l",function(){return f}),a.d(t,"q",function(){return b}),a.d(t,"r",function(){return y}),a.d(t,"j",function(){return g}),a.d(t,"n",function(){return D}),a.d(t,"s",function(){return w}),a.d(t,"g",function(){return v}),a.d(t,"h",function(){return N}),a.d(t,"i",function(){return x}),a.d(t,"f",function(){return O}),a.d(t,"u",function(){return j}),a.d(t,"v",function(){return I}),a.d(t,"a",function(){return P}),a.d(t,"t",function(){return $});var r=a("b5c6"),o=a("2f9e"),n="/tybship/tybship";function i(e){return Object(r["a"])({url:"".concat(n,"/otherpage"),method:"get",params:e})}function s(e,t){return Object(r["a"])({url:"".concat(n,"/updateVillage?shipId=").concat(e,"&&villageId=").concat(t),method:"post"})}function l(e,t){return Object(r["a"])({url:"".concat(n,"/getFixOrgIds?shipId=").concat(e,"&&orgId=").concat(t),method:"get"})}function c(e,t){return Object(r["a"])({url:"".concat(n,"/updateOrgId?shipId=").concat(e,"&&orgId=").concat(t),method:"post"})}function m(e){return Object(r["a"])({url:"".concat(n,"/").concat(e),method:"get",params:e})}function p(e){return Object(r["a"])({url:"".concat(n,"/").concat(e),method:"get"})}function d(e){return Object(r["a"])({url:"".concat(n,"/save"),method:"post",data:e})}function u(e){return Object(r["a"])({url:"".concat(n,"/update"),method:"post",data:e})}function h(e){return Object(r["a"])({url:"".concat(n,"/del/").concat(e),method:"post"})}function f(e){return Object(r["a"])({url:"".concat(n,"/mypage"),method:"get",params:e})}function b(e){return Object(r["a"])({url:"".concat(n,"/findship/").concat(e),method:"get"})}function y(e){return Object(r["a"])({url:"".concat(n,"/findshipWithOutOrg/").concat(e),method:"get"})}function g(e){return Object(r["a"])({url:"".concat(n,"/findmyship/").concat(e),method:"get"})}function D(e){return Object(r["a"])({url:"".concat(n,"/searchByshipNo"),method:"get",params:{shipNo:e}})}function w(e){return Object(r["a"])({url:"".concat(n,"/newpage"),method:"get",params:e})}function v(e){return Object(o["a"])({url:"tybship/tybshipExcelExport/downShipInfo",data:e,title:"渔船信息"})}function N(e){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrew",data:e,title:e.shipName})}function x(e){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewTwoOld ",data:e,title:e.shipName})}function O(e){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downContractModel",data:e,title:e.shipName})}function j(e){return Object(r["a"])({url:"tmlms/tyb_order/page",method:"get",params:e})}function I(e){return Object(r["a"])({url:"tmlms/tyb_order/getById",method:"get",params:e})}function P(e){return Object(r["a"])({url:"tmlms/tyb_order/agree",method:"post",data:e})}function $(e){return Object(r["a"])({url:"tmlms/tyb_order/reject",method:"post",data:e})}}}]);