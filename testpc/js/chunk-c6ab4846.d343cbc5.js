(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6ab4846"],{"014f":function(t,e,o){},4917:function(t,e,o){"use strict";var a=o("cb7c"),n=o("9def"),i=o("0390"),r=o("5f1b");o("214f")("match",1,(function(t,e,o,c){return[function(o){var a=t(this),n=void 0==o?void 0:o[e];return void 0!==n?n.call(o,a):new RegExp(o)[e](String(a))},function(t){var e=c(o,t,this);if(e.done)return e.value;var s=a(t),l=String(this);if(!s.global)return r(s,l);var u=s.unicode;s.lastIndex=0;var d,h=[],g=0;while(null!==(d=r(s,l))){var f=String(d[0]);h[g]=f,""===f&&(s.lastIndex=i(l,n(s.lastIndex),u)),g++}return 0===g?null:h}]}))},"7e88":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"training_detail"},[o("basic-container",[t.$route.query.userId?t._e():o("h1",[t._v(t._s(t.$route.query.see?"查看":t.$route.query.edit?"编辑":"新增")+"主管单位信息")]),t.$route.query.userId?o("h1",[t._v("完善个人信息")]):t._e(),o("el-form",{ref:"form",attrs:{model:t.gov,"label-width":"150px",rules:t.rules}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"单位名称:",prop:"govName"}},[t.$route.query.see?o("div",[t._v(t._s(t.gov.govName))]):o("el-input",{attrs:{placeholder:""},model:{value:t.gov.govName,callback:function(e){t.$set(t.gov,"govName",e)},expression:"gov.govName"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"联系人:",prop:"contactName"}},[t.$route.query.see?o("div",[t._v(t._s(t.gov.contactName))]):o("el-input",{attrs:{placeholder:""},model:{value:t.gov.contactName,callback:function(e){t.$set(t.gov,"contactName",e)},expression:"gov.contactName"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[t.$route.query.see?o("div",[t._v(t._s(t.gov.phone))]):o("el-input",{attrs:{placeholder:""},model:{value:t.gov.phone,callback:function(e){t.$set(t.gov,"phone",e)},expression:"gov.phone"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"区域类型:",prop:"regionType"}},[t.$route.query.see?o("div",[t._v(t._s(t.gov.regionType))]):o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleChange},model:{value:t.gov.regionType,callback:function(e){t.$set(t.gov,"regionType",e)},expression:"gov.regionType"}},t._l(t.typeList,(function(t,e){return o("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"单位地址:",prop:"address"}},[t.$route.query.see?o("div",[t._v(t._s(t.gov.address))]):o("el-input",{attrs:{placeholder:""},model:{value:t.gov.address,callback:function(e){t.$set(t.gov,"address",e)},expression:"gov.address"}})],1)],1),t.cityVal||t.gov.regionType?o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"所属行政区域：",prop:"regionId"}},[t.$route.query.see?o("div",[t._v(t._s(t.gov.regionId))]):o("el-cascader",{attrs:{options:t.options,props:t.props},on:{"active-item-change":t.handleItemChange},model:{value:t.gov.regionId,callback:function(e){t.$set(t.gov,"regionId",e)},expression:"gov.regionId"}})],1)],1):t._e()],1)],1),o("div",{staticStyle:{"text-align":"center"}},[t.$route.query.see?t._e():o("el-button",{on:{click:t.save}},[t._v("提交")]),o("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1)],1)],1)},n=[],i=(o("7f7f"),o("ac6a"),o("4917"),o("b266")),r=o("23d6"),c={data:function(){var t=function(t,e,o){""===e?o(new Error("请输入手机号码")):e.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)?o():o(new Error("请输入正确的手机号码!"))};return{gov:{govName:"",contactName:"",phone:"",address:""},userId:"",typeList:[{value:1,label:"省"},{value:2,label:"市"},{value:3,label:"县区"},{value:4,label:"乡镇"},{value:5,label:"村级"}],rules:{govName:[{required:!0,message:"请输入单位名称",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:t,trigger:"blur"}],regionType:[{required:!0,message:"请输入区域类型",trigger:"blur"}]},options:[],props:{value:"areaCode",label:"name",children:"childList"},arr:[],cityVal:"",codeId:""}},methods:{save:function(){var t=this;this.$refs["form"].validate((function(e){t.gov.regionId&&(t.gov.regionId=t.gov.regionId[t.gov.regionId.length-1]),e&&(t.$route.query.edit?Object(i["e"])(t.gov).then((function(){t.$message.success("修改成功！"),t.$router.go(-1)})).catch((function(){t.$message.error("修改失败！")})):Object(i["d"])(t.gov).then((function(){t.$message.success("新增成功！"),t.$router.go(-1)})).catch((function(){t.$message.error("新增失败！")})))}))},getData:function(){var t=this;this.$route.query.edit&&(this.userId=this.$route.query.edit),this.$route.query.see&&(this.userId=this.$route.query.see),(this.$route.query.edit||this.$route.query.see)&&Object(i["b"])(this.userId).then((function(e){0===e.data.code&&(0!==e.data.data.regionId&&Object(r["a"])(e.data.data.regionId).then((function(e){t.options=e.data.data})),0===e.data.data.regionId?(t.gov=e.data.data,Object(r["c"])(33e10).then((function(e){t.options=e.data.data,t.options.forEach((function(e){t.$set(e,"childList",[])}))})),t.gov.regionId=t.options,t.$route.query.see&&(t.typeList.forEach((function(e){t.gov.regionType===e.value&&(t.gov.regionType=e.label)})),t.gov.regionId="")):Object(r["b"])(e.data.data.regionId).then((function(o){t.getarr(o.data.data,t.arr),e.data.data.regionId=t.arr,t.gov=e.data.data,t.$route.query.see&&(t.typeList.forEach((function(e){t.gov.regionType===e.value&&(t.gov.regionType=e.label)})),t.gov.regionId.forEach((function(e){t.gov.regionId="",Object(r["d"])(e).then((function(e){t.gov.regionId+=e.data.data.name}))})))})))}))},handleItemChange:function(t){var e=this;if(5===this.cityVal)Object(r["c"])(t[t.length-1]).then((function(o){var a=o.data.data;e.getNode(e.options,t[t.length-1],a)}));else if(2===this.cityVal)Object(r["c"])(t[t.length-1]).then((function(o){e.options.forEach((function(e){e.areaCode===t[t.length-1]&&(e.childList=o.data.data)}))}));else if(3===this.cityVal){var o=t[t.length-1];if(2===t.length){var a=t[t.length-1];this.options.forEach((function(t){t.childList.length>0&&t.childList.forEach((function(t){t.areaCode===a&&Object(r["c"])(a).then((function(e){t.childList=e.data.data}))}))}))}Object(r["c"])(o).then((function(o){e.options.forEach((function(a){a.areaCode===t[t.length-1]&&(a.childList=o.data.data,a.childList.forEach((function(t){e.$set(t,"childList",[])})))}))}))}else if(4===this.cityVal){var n=t[t.length-1];if(2===t.length){var i=t[t.length-1];this.options.forEach((function(t){t.childList.length>0&&t.childList.forEach((function(t){t.areaCode===i&&Object(r["c"])(i).then((function(o){t.childList=o.data.data,t.childList.forEach((function(t){e.$set(t,"childList",[])}))}))}))}))}if(3===t.length){var c=t[t.length-1];this.options.forEach((function(t){t.childList.length>0&&t.childList.forEach((function(t){t.childList.length>0&&t.childList.forEach((function(t){t.areaCode===c&&Object(r["c"])(c).then((function(e){t.childList=e.data.data}))}))}))}))}Object(r["c"])(n).then((function(o){e.options.forEach((function(a){a.areaCode===t[t.length-1]&&(a.childList=o.data.data,a.childList.forEach((function(t){e.$set(t,"childList",[])})))}))}))}},getNode:function(t,e,o){var a=this;t.forEach((function(t){t.areaCode==e?(t.childList=o,t.level<3&&t.childList.forEach((function(t){void 0===t.childList&&a.$set(t,"childList",[])}))):t.childList&&0!==t.childList.length&&a.getNode(t.childList,e,o)}))},getarr:function(t){this.arr.push(t.areaCode),t.child&&this.getarr(t.child)},handleChange:function(t){var e=this;this.gov.regionId=[],this.cityVal=t,5===this.cityVal?Object(r["c"])(0).then((function(t){e.options=t.data.data,e.options.forEach((function(t){e.$set(t,"childList",[])}))})):1===this.cityVal?Object(r["c"])(0).then((function(t){e.options=t.data.data})):(2===this.cityVal||3===this.cityVal||4===this.cityVal)&&Object(r["c"])(0).then((function(t){e.options=t.data.data,e.options.forEach((function(t){e.$set(t,"childList",[])}))}))}},computed:{},created:function(){(this.$route.query.see||this.$route.query.edit)&&this.getData()},watch:{}},s=c,l=(o("8a9f"),o("2877")),u=Object(l["a"])(s,a,n,!1,null,null,null);e["default"]=u.exports},"8a9f":function(t,e,o){"use strict";o("014f")},b266:function(t,e,o){"use strict";o.d(e,"c",(function(){return i})),o.d(e,"b",(function(){return r})),o.d(e,"d",(function(){return c})),o.d(e,"e",(function(){return s})),o.d(e,"a",(function(){return l}));var a=o("b5c6"),n="/tmlms/tybgov";function i(t){return Object(a["a"])({url:"".concat(n,"/page"),method:"get",params:t})}function r(t){return Object(a["a"])({url:"".concat(n,"/").concat(t),method:"get"})}function c(t){return Object(a["a"])({url:"".concat(n,"/save"),method:"post",data:t})}function s(t){return Object(a["a"])({url:"".concat(n,"/update"),method:"post",data:t})}function l(t){return Object(a["a"])({url:"".concat(n,"/del/").concat(t),method:"post"})}}}]);