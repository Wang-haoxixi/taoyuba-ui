(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c549e416"],{"13fc":function(t,e,a){"use strict";var n=a("27e2"),r=a.n(n);r.a},"27e2":function(t,e,a){},"2f9e":function(t,e,a){"use strict";a.d(e,"a",function(){return r});a("ac6a"),a("28a5"),a("a481");var n=a("b5c6");function r(t){var e=t.url,a=t.method,r=void 0===a?"post":a,o=t.data,u=void 0===o?{}:o,i=t.title,s=void 0===i?"":i;return console.log(e),new Promise(function(t){return Object(n["a"])({url:e,method:r,headers:{responseType:"arraybuffer"},data:u,responseType:"blob"}).then(function(e){c({title:s,response:e}).then(function(){t()})})})}function c(t){var e=t.title,a=void 0===e?"":e,n=t.response,r=o(n.headers["content-disposition"].replace(/"/g,""));return new Promise(function(t){var e=n.headers,c=new Blob([n.data],{type:e["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(c,a);else{var o=document.createElement("a");o.href=window.URL.createObjectURL(c),o.download=a?"".concat(a,".").concat(r.suffix):r.filename,document.body.appendChild(o),o.style.display="none",o.click()}t()})}function o(t){var e={},a=t.split(";");return a.forEach(function(t){var a=t.replace(/^\s+|\s+$/g,""),n=a.split("=");n[1]?e[n[0]]=n[1]:e[n[0]]=n[0]}),e.suffix=e.filename.split(".")[1],e}},5612:function(t,e,a){"use strict";a.d(e,"h",function(){return o}),a.d(e,"b",function(){return u}),a.d(e,"i",function(){return i}),a.d(e,"k",function(){return s}),a.d(e,"n",function(){return l}),a.d(e,"a",function(){return d}),a.d(e,"o",function(){return p}),a.d(e,"p",function(){return m}),a.d(e,"c",function(){return f}),a.d(e,"d",function(){return h}),a.d(e,"f",function(){return g}),a.d(e,"q",function(){return b}),a.d(e,"e",function(){return v}),a.d(e,"u",function(){return y}),a.d(e,"j",function(){return w}),a.d(e,"l",function(){return O}),a.d(e,"g",function(){return j}),a.d(e,"m",function(){return x}),a.d(e,"s",function(){return S}),a.d(e,"t",function(){return N}),a.d(e,"r",function(){return k});var n=a("b5c6"),r=a("2f9e"),c="/tmlms/crew";function o(t){return Object(n["a"])({url:"".concat(c,"/Page"),method:"get",params:t})}function u(t){return Object(n["a"])({url:"".concat(c,"/countWithShip?shipId=").concat(t),method:"get",params:t})}function i(t){return Object(n["a"])({url:"".concat(c,"/findByShipId?shipId=").concat(t),method:"get",params:t})}function s(t){return Object(n["a"])({url:"".concat(c,"/pageWithShip"),method:"get",params:t})}function l(t){return Object(n["a"])({url:"".concat(c,"/shipLogPage"),method:"get",params:t})}function d(t){return Object(n["a"])({url:"".concat(c,"/checkMoreRelations"),method:"post",data:t})}function p(t,e){return Object(n["a"])({url:"".concat(c,"/create?type=").concat(e),method:"post",data:t})}function m(t,e){return Object(n["a"])({url:"".concat(c,"/batchCreate?type=").concat(e),method:"post",data:t,timeout:3e5})}function f(t){return Object(n["a"])({url:"".concat(c,"/delete?idcard=").concat(t),method:"post"})}function h(t,e){return Object(n["a"])({url:"".concat(c,"/deleteRelation?idcard=").concat(t,"&&shipId=").concat(e),method:"post"})}function g(t,e){return Object(n["a"])({url:"".concat(c,"/edit?type=").concat(e),method:"post",data:t})}function b(t,e){return Object(n["a"])({url:"".concat(c,"/review?status=").concat(t,"&userId=").concat(e),method:"post"})}function v(t){return Object(n["a"])({url:"".concat(c,"/getCrewByidcard?idcard=").concat(t),method:"get"})}function y(t){return Object(n["a"])({url:"admin/file/upload/avatar",method:"post",data:t})}function w(t){return Object(n["a"])({url:"".concat(c,"/idcardcheck?idcard=").concat(t),method:"get"})}function O(t){return Object(n["a"])({url:"".concat(c,"/idcardcheck?idcard=").concat(t),method:"get"})}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"船员信息";return Object(r["a"])({url:"tmlms/tybmlmsExcelExport/downloadCrew",data:t,title:e})}function x(t){return Object(n["a"])({url:"".concat(c,"/badPage"),method:"get",params:t})}function S(t){return Object(n["a"])({url:"".concat(c,"/badUpdateBatch"),method:"post",data:t})}function N(t){return Object(n["a"])({url:"".concat(c,"/uploadBaseImage"),method:"post",data:t})}function k(t){return Object(n["a"])({url:"".concat(c,"/updateCertByIdcard"),method:"post",params:t})}},"6ada":function(t,e,a){"use strict";e["a"]={methods:{getQuery:function(){var t=sessionStorage.getItem("query");if(sessionStorage.getItem("query")){var e=JSON.parse(t);for(var a in this.params)e[a]&&(this.params[a]=e[a])}},setQuery:function(t){if(t){var e=sessionStorage.getItem("query");if(sessionStorage.getItem("query")){var a=JSON.parse(e);for(var n in t)a[n]=t[n];sessionStorage.setItem("query",JSON.stringify(a))}else sessionStorage.setItem("query",JSON.stringify(t))}else sessionStorage.setItem("query",JSON.stringify(this.params))}}}},ade3:function(t,e,a){"use strict";a.d(e,"p",function(){return o}),a.d(e,"c",function(){return u}),a.d(e,"k",function(){return i}),a.d(e,"b",function(){return s}),a.d(e,"m",function(){return l}),a.d(e,"o",function(){return d}),a.d(e,"d",function(){return p}),a.d(e,"w",function(){return m}),a.d(e,"e",function(){return f}),a.d(e,"l",function(){return h}),a.d(e,"q",function(){return g}),a.d(e,"r",function(){return b}),a.d(e,"j",function(){return v}),a.d(e,"n",function(){return y}),a.d(e,"s",function(){return w}),a.d(e,"g",function(){return O}),a.d(e,"h",function(){return j}),a.d(e,"i",function(){return x}),a.d(e,"f",function(){return S}),a.d(e,"u",function(){return N}),a.d(e,"v",function(){return k}),a.d(e,"a",function(){return I}),a.d(e,"t",function(){return C});var n=a("b5c6"),r=a("2f9e"),c="/tybship/tybship";function o(t){return Object(n["a"])({url:"".concat(c,"/otherpage"),method:"get",params:t})}function u(t,e){return Object(n["a"])({url:"".concat(c,"/updateVillage?shipId=").concat(t,"&&villageId=").concat(e),method:"post"})}function i(t,e){return Object(n["a"])({url:"".concat(c,"/getFixOrgIds?shipId=").concat(t,"&&orgId=").concat(e),method:"get"})}function s(t,e){return Object(n["a"])({url:"".concat(c,"/updateOrgId?shipId=").concat(t,"&&orgId=").concat(e),method:"post"})}function l(t){return Object(n["a"])({url:"".concat(c,"/").concat(t),method:"get",params:t})}function d(t){return Object(n["a"])({url:"".concat(c,"/").concat(t),method:"get"})}function p(t){return Object(n["a"])({url:"".concat(c,"/save"),method:"post",data:t})}function m(t){return Object(n["a"])({url:"".concat(c,"/update"),method:"post",data:t})}function f(t){return Object(n["a"])({url:"".concat(c,"/del/").concat(t),method:"post"})}function h(t){return Object(n["a"])({url:"".concat(c,"/mypage"),method:"get",params:t})}function g(t){return Object(n["a"])({url:"".concat(c,"/findship/").concat(t),method:"get"})}function b(t){return Object(n["a"])({url:"".concat(c,"/findshipWithOutOrg/").concat(t),method:"get"})}function v(t){return Object(n["a"])({url:"".concat(c,"/findmyship/").concat(t),method:"get"})}function y(t){return Object(n["a"])({url:"".concat(c,"/searchByshipNo"),method:"get",params:{shipNo:t}})}function w(t){return Object(n["a"])({url:"".concat(c,"/newpage"),method:"get",params:t})}function O(t){return Object(r["a"])({url:"tybship/tybshipExcelExport/downShipInfo",data:t,title:"渔船信息"})}function j(t){return Object(r["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrew",data:t,title:t.shipName})}function x(t){return Object(r["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewTwoOld ",data:t,title:t.shipName})}function S(t){return Object(r["a"])({url:"tmlms/tybmlmsExcelExport/downContractModel",data:t,title:t.shipName})}function N(t){return Object(n["a"])({url:"tmlms/tyb_order/page",method:"get",params:t})}function k(t){return Object(n["a"])({url:"tmlms/tyb_order/getById",method:"get",params:t})}function I(t){return Object(n["a"])({url:"tmlms/tyb_order/agree",method:"post",data:t})}function C(t){return Object(n["a"])({url:"tmlms/tyb_order/reject",method:"post",data:t})}},b155:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract-box"},[a("basic-container",[a("page-header",{attrs:{title:"上船记录"}}),a("operation-container",[a("template",{slot:"right"},[a("span",{staticStyle:{width:"120px"}},[a("el-input",{attrs:{placeholder:"船名号",size:"small",clearable:""},model:{value:t.params.shipName,callback:function(e){t.$set(t.params,"shipName","string"===typeof e?e.trim():e)},expression:"params.shipName"}})],1),a("span",{staticStyle:{width:"120px"}},[a("el-input",{attrs:{placeholder:"身份证号",size:"small",clearable:""},model:{value:t.params.idcard,callback:function(e){t.$set(t.params,"idcard","string"===typeof e?e.trim():e)},expression:"params.idcard"}})],1),a("span",{staticStyle:{width:"120px"}},[a("el-input",{attrs:{placeholder:"姓名",size:"small",clearable:""},model:{value:t.params.realName,callback:function(e){t.$set(t.params,"realName","string"===typeof e?e.trim():e)},expression:"params.realName"}})],1),a("span",{staticStyle:{width:"150px"}},[a("el-select",{attrs:{placeholder:"请选择上下船",size:"small",clearable:""},model:{value:t.params.flag,callback:function(e){t.$set(t.params,"flag",e)},expression:"params.flag"}},[a("el-option",{attrs:{label:"上船",value:"1"}}),a("el-option",{attrs:{label:"下船",value:"2"}})],1)],1),a("span",{staticStyle:{width:"320px"}},[a("el-date-picker",{attrs:{size:"small","value-format":"yyyy-MM-dd HH:mm:ss",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.params.rangeTime,callback:function(e){t.$set(t.params,"rangeTime",e)},expression:"params.rangeTime"}})],1),a("el-button",{attrs:{size:"small"},on:{click:t.getParamData}},[t._v("搜索")])],1)],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showCount,expression:"showCount"}],staticClass:"count-wrapper"},[a("div",{staticClass:"title-count"},[t._v("上下船数量统计")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.countList,stripe:"",border:"",loading:t.loadingCount}},[a("el-table-column",{attrs:{prop:"villageName",label:"基层名"}}),a("el-table-column",{attrs:{prop:"upCount",label:"上船数量"}}),a("el-table-column",{attrs:{prop:"downCount",label:"下船数量"}})],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.crewregisterList,stripe:""}},[t._l(t.options.columns,function(e,n){return a("el-table-column",{key:n,attrs:{prop:e.value,label:e.text,width:e.css},scopedSlots:t._u([{key:"default",fn:function(n){return["dictGroup"===e.type?[a("div",[t._v(t._s(t.dictJS(e,n)))])]:"province"===e.type?[a("div",[t._v(t._s(t.provincesName(e,n)))])]:[a("iep-table-detail",{attrs:{value:n.row[e.value]}})]]}}],null,!0)})}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.manager?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleView(e.row.idcard)}}},[t._v("查看\n            ")]):t._e()]}}])})],2),a("div",{staticStyle:{"text-align":"center",margin:"20px 0"}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.total,"page-size":t.params.size,"current-page":t.params.current},on:{"update:currentPage":function(e){return t.$set(t.params,"current",e)},"update:current-page":function(e){return t.$set(t.params,"current",e)},"current-change":t.currentChange}})],1)],1)],1)},r=[],c=a("cebc"),o=(a("ac6a"),a("96cf"),a("3b8d")),u=(a("7f7f"),a("5612")),i=a("b5c6"),s="/tmlms/tybcrewsyslog";function l(t){return Object(i["a"])({url:"".concat(s,"/statistics"),method:"post",data:t})}var d=a("c439"),p=a("ade3"),m=a("7ded"),f=a("c533b"),h=a("4151"),g=a.n(h),b=a("2f62"),v=a("6ada"),y={mixins:[v["a"]],data:function(){return{crewregisterList:[],provinces:[],total:0,params:{current:1,size:10,idcard:"",realName:"",phone:"",status:"",shipName:""},exportParams:{idcard:"",realName:"",status:"",phone:"",remark:"",startDate:"",endDate:""},options:{expandAll:!1,columns:[{text:"船名号",value:"shipName"},{text:"身份证号码",value:"idcard"},{text:"姓名",value:"realName"},{text:"上下船",value:"flag"},{text:"职务证书",value:"certNames"},{text:"来源",value:"sourceType"},{text:"登记时间",value:"leftTime"}]},status:[{label:"未关联合同",value:" "},{label:"已签合同",value:1}],manager:!1,showSwith:!1,userData:{roles:[]},certLevel:[{value:"0",label:""},{value:"1",label:"一级"},{value:"2",label:"二级"},{value:"3",label:"三级"}],showCount:!1,loadingCount:!1,countList:[]}},methods:{provincesName:function(t,e){return e.row[t.value]?g()(this.provinces,"value")[e.row[t.value]].label:"暂无"},dictJS:function(t,e){return e.row[t.value]?"0"===e.row[t.value]?"暂无":g()(this.dictGroup[t.dictName],"value")[e.row[t.value]].label:"暂无"},currentChange:function(t){this.params.current=t,this.setQuery({current:this.params.current}),this.getData()},addShipowner:function(){this.$router.push({name:"detailBoatMan"})},handleView:function(t){this.$router.push({name:"detailBoatMan",query:{see:t}})},handleEdit:function(t){this.$router.push({name:"detailBoatMan",query:{edit:t}})},getProvince:function(){var t=this;Object(f["d"])(0).then(function(e){var a=e.data;t.provinces=a.data.map(function(t){return{label:t.name,value:t.areaCode}})})},getData:function(){var t=this,e=this.params;Array.isArray(e.rangeTime)&&e.rangeTime.length>0?(e.startDate=e.rangeTime[0],e.endDate=e.rangeTime[1]):(e.startDate=void 0,e.endDate=void 0),!e.startDate||!e.endDate||e.shipName||e.idcard||e.realName||e.flag?this.showCount=!1:(this.loadingCount=!0,l({startDate:e.startDate,endDate:e.endDate}).then(function(e){var a=e.data;0===a.code&&(t.countList=a.data),t.showCount=!0,t.loadingCount=!1}).catch(function(){t.loadingCount=!1,t.showCount=!0})),Object(d["a"])(this.params).then(function(e){t.crewregisterList=e.data.data.records,t.total=e.data.data.total,t.crewregisterList.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=[],a.certs.forEach(function(e){var a="";t.certLevel.map(function(t){e.certLevel===t.value&&(a=t.label)}),t.$store.getters.dictGroup.tyb_crew_cert_title.map(function(t){e.certTitle==t.value&&(a+=t.label)}),a&&n.push(a)}),a.certNames=n.join(","),1==a.sourceType?a.sourceType="合同":2==a.sourceType?a.sourceType="设备":3==a.sourceType&&(a.sourceType="微信"),1==a.flag?a.flag="上船":a.flag="下船",a.shipName){e.next=9;break}return e.next=8,Object(p["m"])(a.shipId).then(function(t){return t.data.data.shipName});case 8:a.shipName=e.sent;case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())})},getParamData:function(){this.params.current=1,this.setQuery(),this.getData()},handleDel:function(t){var e=this;this.$confirm("此操作将永久删除该船员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u["c"])(t).then(function(t){e.$message({type:"success",message:t.data.msg}),e.getData()}).catch(function(t){e.$message.error(t.data.msg)})}).catch(function(){})},getStatus:function(t,e){var a=this,n="";n=t?2:3,Object(u["q"])(n,e).then(function(t){a.$message({type:"success",message:t.data.msg}),a.getData()})},isManager:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["c"])().then(function(t){return t.data.data});case 2:this.userData=t.sent,-1===this.userData.roles.indexOf(111)&&-1===this.userData.roles.indexOf(1)&&-1===this.userData.roles.indexOf(112)||(this.manager=!0);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),isAdminPath:function(){1==this.$route.path.indexOf("admin")?this.showSwith=!0:this.showSwith=!1},exportInfo:function(){var t=this;Object(u["g"])(this.exportParams).catch(function(e){t.$message({type:"warning",message:e})})}},computed:Object(c["a"])({},Object(b["c"])(["dictGroup","userInfo"])),created:function(){this.getQuery(),this.getData(),this.isManager(),this.getProvince(),this.isAdminPath()},filters:{typeFilter:function(t){var e={1:"审核中",2:"审核通过",3:"审核失败"};return e[t]}},watch:{"params.idcard":function(t){this.exportParams.idcard=t},"params.realName":function(t){this.exportParams.realName=t},"params.phone":function(t){this.exportParams.phone=t},"params.remark":function(t){this.exportParams.remark=t},"params.workStatus":function(t){this.exportParams.workStatus=t}}},w=y,O=(a("13fc"),a("0c7c")),j=Object(O["a"])(w,n,r,!1,null,"2d2407ef",null);e["default"]=j.exports},c439:function(t,e,a){"use strict";a.d(e,"b",function(){return c}),a.d(e,"a",function(){return o});var n=a("b5c6"),r="/tmlms/tybcrewsyslog";function c(t){return Object(n["a"])({url:"".concat(r,"/page"),method:"get",params:t})}function o(t){return Object(n["a"])({url:"".concat(r,"/newPage"),method:"get",params:t})}},c533b:function(t,e,a){"use strict";a.d(e,"i",function(){return u}),a.d(e,"f",function(){return i}),a.d(e,"d",function(){return s}),a.d(e,"g",function(){return l}),a.d(e,"c",function(){return d}),a.d(e,"a",function(){return p}),a.d(e,"e",function(){return m}),a.d(e,"j",function(){return f}),a.d(e,"h",function(){return h}),a.d(e,"b",function(){return g});var n=a("b5c6"),r="tmlms/crew",c="admin/region",o="admin/dict";function u(t){return Object(n["a"])({url:"".concat(c,"/getinfo/")+t,method:"get"})}function i(t){return Object(n["a"])({url:"".concat(o,"/type/")+t,method:"get"})}function s(t){return Object(n["a"])({url:"".concat(c,"/area"),method:"get",params:{parentCode:t}})}function l(t){return Object(n["a"])({url:"".concat(r,"/Page"),method:"get",params:t})}function d(t){return Object(n["a"])({url:"".concat(r,"/delete"),method:"post",params:{userId:t}})}function p(t){return Object(n["a"])({url:"".concat(r,"/create"),method:"post",data:t,params:{type:1}})}function m(t){return Object(n["a"])({url:"".concat(r,"/getCrewByUserId"),method:"get",params:{userId:t}})}function f(t){return Object(n["a"])({url:"".concat(r,"/edit"),method:"post",params:{type:1},data:t})}function h(t){return Object(n["a"])({url:"/tybship/tybregion/parent/".concat(t),method:"get"})}function g(t,e,a){return Object(n["a"])({url:"".concat(r,"/upWork?idcard=").concat(e,"&workStatus=").concat(a),method:"post",data:t})}}}]);