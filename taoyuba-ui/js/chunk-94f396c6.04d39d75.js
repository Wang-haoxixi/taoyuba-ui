(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94f396c6"],{"26c0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"iep-page-form"},[n("basic-container",[n("page-header",{attrs:{title:t.methodName+"建议"}},[n("iep-button",{on:{click:t.back}},[t._v("返回建议列表")])],1),n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px",size:"small"}},[n("iep-form-item",{staticClass:"form-half",attrs:{"label-name":"建议主题",prop:"theme"}},[n("el-input",{model:{value:t.form.theme,callback:function(e){t.$set(t.form,"theme",e)},expression:"form.theme"}})],1),n("iep-form-item",{staticClass:"form-half",attrs:{prop:"proposeContent","label-name":"建议内容"}},[n("iep-input-area",{model:{value:t.form.proposeContent,callback:function(e){t.$set(t.form,"proposeContent",e)},expression:"form.proposeContent"}})],1),n("iep-form-item",{attrs:{prop:"attendeeId","label-name":"接收对象"}},[n("iep-select",{attrs:{autocomplete:"off","prefix-url":"admin/org/all",placeholder:"请选择组织"},model:{value:t.form.attendeeId,callback:function(e){t.$set(t.form,"attendeeId",e)},expression:"form.attendeeId"}})],1),n("iep-form-item",{staticClass:"form-half",attrs:{prop:"annexList","label-name":"附件"}},[n("iep-upload",{attrs:{limit:t.limit},model:{value:t.form.annexList,callback:function(e){t.$set(t.form,"annexList",e)},expression:"form.annexList"}})],1),n("el-form-item",{attrs:{label:""}},[n("operation-wrapper",[n("iep-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")]),n("iep-button",{on:{click:t.handlePublish}},[t._v("保存并发布")]),n("iep-button",{on:{click:t.onGoBack}},[t._v("取消")])],1)],1)],1)],1)],1)},a=[],o=n("6a8a"),i=n("2934"),u=n("b9b5"),c={data:function(){var t=this;return{limit:1,back:function(){t.$router.push("/hrms_spa/suggestion_list")},rules:u["e"],form:Object(u["d"])()}},computed:{id:function(){return+this.$route.params.id},methodName:function(){return this.id?"编辑":"新增"}},created:function(){var t=this;this.id&&Object(o["c"])(this.id).then(function(e){var n=e.data;t.form=t.$mergeByFirst(Object(u["d"])(),n.data)})},methods:{onGoBack:function(){this.$router.history.go(-1)},handlePublish:function(){this.form.status="1",this.handleSubmit(!0)},handleSubmit:function(t){var e=this,n=this.id?o["g"]:o["f"];this.$refs["form"].validate(function(r){if(r){var a=!0===t;e.form.annexList.length>0&&(e.form.annex=e.form.annexList[0].url),n(Object(u["c"])(e.form),a).then(function(t){var n=t.data;n.data&&(e.$message({message:"".concat(e.methodName,"建议成功"),type:"success"}),e.back())})}})},handleDownload:function(t){Object(i["a"])(t)}}},s=c,l=n("2877"),d=Object(l["a"])(s,r,a,!1,null,null,null);e["default"]=d.exports},"6a8a":function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return c}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return l}),n.d(e,"b",function(){return d}),n.d(e,"a",function(){return m});var r=n("b5c6"),a="/cpms/suggestion";function o(t){return Object(r["a"])({url:"".concat(a,"/pageIssue"),method:"get",params:t})}function i(t){return Object(r["a"])({url:"".concat(a,"/pageReceived"),method:"get",params:t})}function u(t){return Object(r["a"])({url:"".concat(a,"/").concat(t),method:"get"})}function c(t){return Object(r["a"])({url:"".concat(a,"/create"),method:"post",data:t})}function s(t){return Object(r["a"])({url:"".concat(a,"/update"),method:"post",data:t})}function l(t){return Object(r["a"])({url:"".concat(a,"/feedback"),method:"post",data:t})}function d(t){return Object(r["a"])({url:"".concat(a,"/delete/batch"),method:"post",data:[t]})}function m(t){return Object(r["a"])({url:"".concat(a,"/delete/batch"),method:"post",data:t})}},b9b5:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return u}),n.d(e,"e",function(){return c});var r=n("be94"),a={status:{0:"草稿",1:"未处理",2:"以采纳",3:"已驳回"}},o=[{prop:"status",label:"状态",type:"dict"},{prop:"sendTime",label:"发送时间"}],i=function(){return{id:"",userId:"",theme:"",status:"",proposeContent:"",attendeeList:"",attendeeId:"",feedbackOpinion:"",gratuity:"",disabled:"",annexList:[],fileName:"",proposeRelatioList:""}},u=function(t){var e=Object(r["a"])({},t);return e},c={theme:[{required:!0,message:"请填写建议主题",trigger:"blur"}],proposeContent:[{required:!0,message:"请填写建议内容",trigger:"blur"}],attendeeId:[{required:!0,message:"请填写接收对象",trigger:"blur"}],feedbackStatus:[{required:!0,message:"请填写处理意见",trigger:"blur"}],feedbackOpinion:[{required:!0,message:"请填写反馈意见",trigger:"blur"}],gratuity:[{required:!0,message:"请输入打赏金额",trigger:"blur"}]}}}]);