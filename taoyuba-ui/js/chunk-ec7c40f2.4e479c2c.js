(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec7c40f2"],{"1d86":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("basic-container",[n("page-header",{attrs:{title:"管理通报",backOption:t.backOption}}),n("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":"150px",disabled:"detail"===t.status}},[n("el-form-item",{attrs:{label:"通报主题",prop:"bulletinTitle"}},[n("el-input",{model:{value:t.form.bulletinTitle,callback:function(e){t.$set(t.form,"bulletinTitle","string"===typeof e?e.trim():e)},expression:"form.bulletinTitle"}})],1),n("el-form-item",{attrs:{label:"通报船只"}},["detail"===t.status?n("el-input",{staticStyle:{width:"100%"},model:{value:t.form.shipNames,callback:function(e){t.$set(t.form,"shipNames",e)},expression:"form.shipNames"}}):n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"",filterable:"",remote:"",multiple:"",maxlength:"20","remote-method":t.getShipNameList},on:{change:t.onChange},model:{value:t.form.ids,callback:function(e){t.$set(t.form,"ids",e)},expression:"form.ids"}},t._l(t.shipNames,(function(t){return n("el-option",{key:t.shipId,attrs:{label:t.shipName,value:t.shipId}})})),1)],1),n("el-form-item",{attrs:{label:"通报内容",prop:"content"}},[n("iep-froala-editor",{attrs:{disabled:"detail"===t.status},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),"detail"!==t.status?n("operation-wrapper",[n("iep-button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("发送")])],1):t._e()],1)},o=[],i=(n("6762"),n("2fdb"),n("4f7f"),n("5df3"),n("1c4c"),n("ac6a"),n("ade36")),a=n("4e03");function c(){return{bulletinTitle:"",shipIds:"",ids:[],content:""}}var u={data:function(){var t=this;return{form:c(),shipNames:[],oldShipNames:[],status:"",backOption:{isBack:!0,backPath:null,backFunction:function(){t.onGoBack()}},rules:{bulletinTitle:[{required:!0,message:"请输入通报主题",trigger:"blur"}],ids:[{required:!0,message:"请输入通报渔船",trigger:"change"}],content:[{required:!0,message:"请输入通报内容",trigger:"blur"}]}}},mounted:function(){var t=this.$route.query;t.status&&(this.status=t.status),t.id&&this.getList(t.id)},methods:{getList:function(t){var e=this;Object(a["c"])(t).then((function(t){var n=t.data;if(0===n.code){if(e.form=n.data,e.form.ships&&e.form.ships.length>0){var r=[],o=[];e.form.ships.forEach((function(t){r.push(t.shipName),o.push(t.shipId)})),e.form.shipNames=r.join(","),e.form.shipIds=o}console.log("this.form",e.form)}}))},getShipNameList:function(t){var e=this;5===t.length?Object(i["y"])(t).then((function(t){var n=t.data;if(0===n.code){var r=e.oldShipNames.concat(n.data||[]);e.shipNames=Array.from(new Set(r))}})):this.shipNames=this.oldShipNames},onChange:function(t){this.oldShipNames=this.shipNames.filter((function(e){return t.includes(e.shipId)}))},onGoBack:function(){this.$router.history.go(-1)},handleSubmit:function(){var t=this;this.$refs["ruleForm"].validate((function(e){e&&(console.log(t.form),t.form.shipIds=t.form.ids.join(","),Object(a["a"])(t.form).then((function(e){var n=e.data;0===n.code&&(t.$notify({message:"发布成功",type:"success"}),t.onGoBack())})))}))}}},s=u,l=n("2877"),d=Object(l["a"])(s,r,o,!1,null,null,null);e["default"]=d.exports},"2f9e":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("ac6a"),n("28a5"),n("a481");var r=n("b5c6");function o(t){var e=t.url,n=t.method,o=void 0===n?"post":n,a=t.data,c=void 0===a?{}:a,u=t.title,s=void 0===u?"":u;return console.log(e),new Promise((function(t){return Object(r["a"])({url:e,method:o,headers:{responseType:"arraybuffer"},data:c,responseType:"blob"}).then((function(e){i({title:s,response:e}).then((function(){t()}))}))}))}function i(t){var e=t.title,n=void 0===e?"":e,r=t.response,o=a(r.headers["content-disposition"].replace(/"/g,""));return new Promise((function(t){var e=r.headers,i=new Blob([r.data],{type:e["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,n);else{var a=document.createElement("a");a.href=window.URL.createObjectURL(i),a.download=n?"".concat(n,".").concat(o.suffix):o.filename,document.body.appendChild(a),a.style.display="none",a.click()}t()}))}function a(t){var e={},n=t.split(";");return n.forEach((function(t){var n=t.replace(/^\s+|\s+$/g,""),r=n.split("=");r[1]?e[r[0]]=r[1]:e[r[0]]=r[0]})),e.suffix=e.filename.split(".")[1],e}},"4e03":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return c}));var r=n("b5c6"),o="/tmlms/bulletin";function i(t){return Object(r["a"])({url:"".concat(o,"/getPage"),method:"get",params:t})}function a(t){return Object(r["a"])({url:"".concat(o,"/").concat(t),method:"get"})}function c(t){return Object(r["a"])({url:"".concat(o,"/create"),method:"post",data:t})}},"4f7f":function(t,e,n){"use strict";var r=n("c26b"),o=n("b39a"),i="Set";t.exports=n("e0b8")(i,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(o(this,i),t=0===t?0:t,t)}},r)},ade36:function(t,e,n){"use strict";n.d(e,"w",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"r",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"t",(function(){return l})),n.d(e,"v",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"J",(function(){return m})),n.d(e,"i",(function(){return p})),n.d(e,"s",(function(){return h})),n.d(e,"x",(function(){return b})),n.d(e,"y",(function(){return g})),n.d(e,"o",(function(){return v})),n.d(e,"u",(function(){return y})),n.d(e,"z",(function(){return O})),n.d(e,"k",(function(){return j})),n.d(e,"m",(function(){return w})),n.d(e,"l",(function(){return _})),n.d(e,"n",(function(){return x})),n.d(e,"j",(function(){return k})),n.d(e,"G",(function(){return N})),n.d(e,"H",(function(){return S})),n.d(e,"b",(function(){return E})),n.d(e,"D",(function(){return I})),n.d(e,"I",(function(){return B})),n.d(e,"C",(function(){return C})),n.d(e,"q",(function(){return R})),n.d(e,"A",(function(){return T})),n.d(e,"c",(function(){return $})),n.d(e,"B",(function(){return L})),n.d(e,"f",(function(){return P})),n.d(e,"g",(function(){return F})),n.d(e,"E",(function(){return q})),n.d(e,"a",(function(){return G})),n.d(e,"K",(function(){return U})),n.d(e,"p",(function(){return z})),n.d(e,"F",(function(){return J}));var r=n("b5c6"),o=n("2f9e"),i="/tybship/tybship";function a(t){return Object(r["a"])({url:"".concat(i,"/otherpage"),method:"get",params:t})}function c(t,e){return Object(r["a"])({url:"".concat(i,"/updateVillage?shipId=").concat(t,"&&villageId=").concat(e),method:"post"})}function u(){return Object(r["a"])({url:"/admin/org/page",method:"get"})}function s(t,e){return Object(r["a"])({url:"".concat(i,"/updateOrgId?shipId=").concat(t,"&&orgId=").concat(e),method:"post"})}function l(t){return Object(r["a"])({url:"".concat(i,"/").concat(t),method:"get",params:t})}function d(t){return Object(r["a"])({url:"".concat(i,"/").concat(t),method:"get"})}function f(t){return Object(r["a"])({url:"".concat(i,"/save"),method:"post",data:t})}function m(t){return Object(r["a"])({url:"".concat(i,"/update"),method:"post",data:t})}function p(t){return Object(r["a"])({url:"".concat(i,"/del/").concat(t),method:"post"})}function h(t){return Object(r["a"])({url:"".concat(i,"/mypage"),method:"get",params:t})}function b(t){return Object(r["a"])({url:"".concat(i,"/findship/").concat(t),method:"get"})}function g(t){return Object(r["a"])({url:"".concat(i,"/findshipWithOutOrg/").concat(t),method:"get"})}function v(t){return Object(r["a"])({url:"".concat(i,"/findmyship/").concat(t),method:"get"})}function y(t){return Object(r["a"])({url:"".concat(i,"/searchByshipNo"),method:"get",params:{shipNo:t}})}function O(t){return Object(r["a"])({url:"".concat(i,"/newpage"),method:"get",params:t})}function j(t){return Object(o["a"])({url:"tybship/tybshipExcelExport/downShipInfo",data:t,title:"渔船信息"})}function w(t){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrew",data:t,title:"开航登记表-"+t.shipName})}function _(t){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewRecord",data:t,title:"实名登记备案表-"+t.shipName})}function x(t){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downShipCrewTwoOld ",data:t,title:"船员登记表-"+t.shipName})}function k(t){return Object(o["a"])({url:"tmlms/tybmlmsExcelExport/downContractModel",data:t,title:t.shipName})}function N(t){return Object(r["a"])({url:"tmlms/tyb_order/page",method:"get",params:t})}function S(t){return Object(r["a"])({url:"tmlms/tyb_order/getById",method:"get",params:t})}function E(t){return Object(r["a"])({url:"tmlms/tyb_order/agree",method:"post",data:t})}function I(t){return Object(r["a"])({url:"tmlms/tyb_order/reject",method:"post",data:t})}function B(t){return Object(r["a"])({url:"/tmlms/tybPortRecord/page",method:"get",params:t})}function C(t){return Object(r["a"])({url:"/tmlms/tybPortRecord/lastRecord",method:"get",params:t})}function R(t){return Object(r["a"])({url:"/tmlms/tybPortRecord/getCrewByRecordId",method:"get",params:t})}function T(t){return Object(r["a"])({url:"/tybship/tybship/info/".concat(t),method:"get"})}function $(t){return Object(r["a"])({url:"/tmlms/crew_cert/certStandard/".concat(t),method:"get"})}function L(t){return Object(r["a"])({url:"/tmlms/investigationReport/pageByShipName?shipName=".concat(t),method:"get"})}function P(t){return Object(r["a"])({url:"/tmlms/crew/countContractByShipId?shipId=".concat(t),method:"get"})}function F(t){return Object(r["a"])({url:"/tmlms/tybPortRecord/page",method:"get",params:t})}function q(t){return Object(r["a"])({url:"/tmlms/tybTroubleshootReport/pageByShipNo",method:"get",params:t})}function G(t){return Object(r["a"])({url:"/tmlms/tyb_order/pageByShipName",method:"get",params:t})}function U(t){return Object(r["a"])({url:"/tmlms/verification/page",method:"get",params:t})}function z(t){return console.log(t),Object(r["a"])({url:"/tmlms/tyb_order/getById?id=".concat(t.id),method:"get"})}function J(t){return Object(r["a"])({url:"/tmlms/tybmlmsExcelExport/downVerification",method:"post",headers:{"Content-Type":"application/json"},responseType:"arraybuffer",data:t}).then((function(t){var e=new Blob([t.data],{type:"application/vnd.ms-excel"}),n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download="实船鉴证.xls",n.click()}))}},b39a:function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},c26b:function(t,e,n){"use strict";var r=n("86cc").f,o=n("2aeb"),i=n("dcbc"),a=n("9b43"),c=n("f605"),u=n("4a59"),s=n("01f9"),l=n("d53b"),d=n("7a56"),f=n("9e1e"),m=n("67ab").fastKey,p=n("b39a"),h=f?"_s":"size",b=function(t,e){var n,r=m(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,s){var l=t((function(t,r){c(t,l,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[h]=0,void 0!=r&&u(r,n,t[s],t)}));return i(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[h]=0},delete:function(t){var n=p(this,e),r=b(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[h]--}return!!r},forEach:function(t){p(this,e);var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){r(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(t){return!!b(p(this,e),t)}}),f&&r(l.prototype,"size",{get:function(){return p(this,e)[h]}}),l},def:function(t,e,n){var r,o,i=b(t,e);return i?i.v=n:(t._l=i={i:o=m(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[h]++,"F"!==o&&(t._i[o]=i)),t},getEntry:b,setStrong:function(t,e,n){s(t,e,(function(t,n){this._t=p(t,e),this._k=n,this._l=void 0}),(function(){var t=this,e=t._k,n=t._l;while(n&&n.r)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?l(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,l(1))}),n?"entries":"values",!n,!0),d(e)}}},e0b8:function(t,e,n){"use strict";var r=n("7726"),o=n("5ca1"),i=n("2aba"),a=n("dcbc"),c=n("67ab"),u=n("4a59"),s=n("f605"),l=n("d3f4"),d=n("79e5"),f=n("5cc5"),m=n("7f20"),p=n("5dbc");t.exports=function(t,e,n,h,b,g){var v=r[t],y=v,O=b?"set":"add",j=y&&y.prototype,w={},_=function(t){var e=j[t];i(j,t,"delete"==t||"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof y&&(g||j.forEach&&!d((function(){(new y).entries().next()})))){var x=new y,k=x[O](g?{}:-0,1)!=x,N=d((function(){x.has(1)})),S=f((function(t){new y(t)})),E=!g&&d((function(){var t=new y,e=5;while(e--)t[O](e,e);return!t.has(-0)}));S||(y=e((function(e,n){s(e,y,t);var r=p(new v,e,y);return void 0!=n&&u(n,b,r[O],r),r})),y.prototype=j,j.constructor=y),(N||E)&&(_("delete"),_("has"),b&&_("get")),(E||k)&&_(O),g&&j.clear&&delete j.clear}else y=h.getConstructor(e,t,b,O),a(y.prototype,n),c.NEED=!0;return m(y,t),w[t]=y,o(o.G+o.W+o.F*(y!=v),w),g||h.setStrong(y,t,b),y}}}]);