(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-abb662ca"],{"0013":function(e,t,a){"use strict";a("edab")},"1e7a":function(e,t,a){"use strict";a.d(t,"e",function(){return i}),a.d(t,"f",function(){return o}),a.d(t,"a",function(){return c}),a.d(t,"d",function(){return s}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return u});var n=a("b5c6"),r="/tmlms/dept";function i(e){return Object(n["a"])({url:"".concat(r,"/page"),method:"get",params:e})}function o(e,t){return Object(n["a"])({url:"".concat(r,"/create?type=").concat(t),method:"post",data:e})}function c(e){return Object(n["a"])({url:"".concat(r,"/delete?userId=").concat(e),method:"post"})}function s(e,t){return Object(n["a"])({url:"".concat(r,"/edit?type=").concat(t),method:"post",data:e})}function l(e){return Object(n["a"])({url:"".concat(r,"/detail?userId=").concat(e),method:"get"})}function u(e){return Object(n["a"])({url:"".concat(r,"/editSort"),method:"post",data:e})}},2030:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"iep-page-form"},[a("basic-container",[a("page-header",{attrs:{title:e.methodName+"资讯",backOption:e.backOption}}),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"资讯标题：",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分类：",prop:"type"}},[a("iep-dict-select",{attrs:{"dict-name":"tyb_article_type"},on:{change:e.changType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"来源：",prop:"source"}},[a("el-input",{model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否推荐：",prop:"isRcmd"}},[a("el-radio-group",{model:{value:e.form.isRcmd,callback:function(t){e.$set(e.form,"isRcmd",t)},expression:"form.isRcmd"}},e._l(e.dictsMap.isRcmd,function(t,n){return a("el-radio",{key:n,attrs:{label:+n}},[e._v(e._s(t))])}),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"描述：",prop:"description"}},[a("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否跳转：",prop:"isDispatch"}},[a("el-radio-group",{on:{change:e.radioChange},model:{value:e.form.isDispatch,callback:function(t){e.$set(e.form,"isDispatch",t)},expression:"form.isDispatch"}},[a("el-radio",{attrs:{label:0}},[e._v("不跳转链接")]),a("el-radio",{attrs:{label:1}},[e._v("跳转链接")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图片：",prop:"image"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccess,headers:e.headers,accept:"image/*"}},[e.form.image?a("img",{staticClass:"avatar",attrs:{src:e.form.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{label:"资讯跳转链接：",prop:"httpSrc"}},[a("el-input",{attrs:{maxlength:"80"},model:{value:e.form.httpSrc,callback:function(t){e.$set(e.form,"httpSrc",t)},expression:"form.httpSrc"}},[a("template",{slot:"prepend"},[e._v("http://")])],2)],1)],1)],1),e.isTrain?a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代办机构：",prop:"train"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.train,callback:function(t){e.$set(e.form,"train",t)},expression:"form.train"}},e._l(e.trainList,function(e){return a("el-option",{key:e.value,attrs:{label:e.deptName,value:e.userId}})}),1)],1)],1)],1):e._e(),a("el-row",[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isArticle,expression:"isArticle"}],attrs:{label:"资讯内容：",prop:"articleContent"}},[a("iep-froala-editor",{model:{value:e.form.articleContent,callback:function(t){e.$set(e.form,"articleContent",t)},expression:"form.articleContent"}})],1)],1),a("el-form-item",{attrs:{label:""}},[a("operation-wrapper",[a("iep-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)],1)],1)},r=[],i=a("f874"),o=a("1e7a"),c=a("2a09"),s=a("4360"),l={data:function(){var e=this;return{backOption:{isBack:!0,backPath:null,backFunction:function(){e.onGoBack()}},rules:c["f"],form:Object(c["d"])(),init:!1,dictsMap:c["b"],headers:{Authorization:"Bearer "+s["a"].getters.access_token},isShow:!1,isArticle:!0,trainList:"",isTrain:!1,articleId:""}},computed:{methodName:function(){return 0==this.articleId?"发布":"编辑"}},created:function(){},methods:{open:function(e){var t=this;this.articleId=e,0!=this.articleId&&Object(i["c"])(this.articleId).then(function(e){var a=e.data;t.form=t.$mergeByFirst(Object(c["d"])(),a.data);var n=t.form.isDispatch;t.isShow=1==n,t.isArticle=0==n,t.form.httpSrc&&(t.form.httpSrc=t.form.httpSrc.substring(7))}),Object(o["e"])().then(function(e){t.trainList=e.data.data.records})},changType:function(e){this.isTrain=8==e},handleSubmit:function(e){var t=this,a=0==this.articleId?i["a"]:i["e"];this.$refs["form"].validate(function(n){if(n){t.form.httpSrc="http://"+t.form.httpSrc;var r=!0===e;a(Object(c["c"])(t.form),r).then(function(e){var a=e.data;a.data&&(t.$message({message:"资讯信息".concat(t.methodName,"成功"),type:"success"}),t.onGoBack(!0))})}})},onGoBack:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("end",e)},handleAvatarSuccess:function(e){this.form.image=e.data.url},radioChange:function(e){1===e&&(this.isShow=!0,this.isArticle=!1),0===e&&(this.isShow=!1,this.isArticle=!0)}},watch:{}},u=l,p=(a("0013"),a("2877")),d=Object(p["a"])(u,n,r,!1,null,null,null);t["default"]=d.exports},"2a09":function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return i}),a.d(t,"f",function(){return m}),a.d(t,"d",function(){return d}),a.d(t,"c",function(){return c}),a.d(t,"e",function(){return l}),a.d(t,"g",function(){return p});var n=a("84df"),r=a("0e0b"),i={isRcmd:{0:"不推荐",1:"推荐"}},o=[{label:"资讯标题",prop:"title"},{label:"来源",prop:"source"},{label:"资讯类别",prop:"type",dictName:"tyb_article_type",type:"dictGroup"},{label:"是否跳转链接",prop:"isDispatch"},{label:"创建时间",prop:"createTime"}],c=function(e){var t=Object(r["g"])(s(),e);return t},s=function(){return{articleId:"",title:"",type:"",source:"",image:"",description:"",isRcmd:"",createTime:Object(n["a"])(),updateTime:Object(n["a"])(),articleContent:"",isDispatch:0,httpSrc:"",train:""}},l=function(){return{title:"",source:""}},u=function(){return{title:"",source:""}},p=function(e){var t=Object(r["g"])(u(),e);return t.title=e.title?e.title:null,t.source=e.source?e.source:null,t},d=function(){return{articleId:"",title:"",type:"",source:"",image:"",description:"",isRcmd:0,createTime:Object(n["a"])(),updateTime:Object(n["a"])(),articleContent:"",isDispatch:0,httpSrc:""}},m={title:[{required:!0,message:"请填资讯标题",trigger:"blur"},{min:0,max:50,message:"长度在 0 到 50 个字符",trigger:"blur"}],source:[{required:!0,message:"请填来源",trigger:"blur"},{min:0,max:50,message:"长度在 0 到 50 个字符",trigger:"blur"}],type:[{required:!0,message:"请填分类",trigger:"blur"}],isRcmd:[{required:!0,message:"请填是否推荐",trigger:"blur"}],description:[{required:!0,message:"请填描述",trigger:"blur"},{min:0,max:50,message:"长度在 0 到 50 个字符",trigger:"blur"}],isDispatch:[{required:!0,message:"请选择一个选项",trigger:"blur"}]}},"502e":function(e,t,a){"use strict";var n=a("be94"),r=(a("96cf"),a("1da1")),i=a("51f4"),o={delete:"删除",shelf:"上架",submit:"提交",cancel:"撤销"};t["a"]={data:function(){return{pagedTable:[],multipleSelection:[],isLoadTable:!0,pagination:this._pageOption(),pageOption:this._pageOption(),searchForm:{}}},methods:{_pageOption:function(){return Object(i["a"])()},searchPage:function(e){this.pageOption=this._pageOption(),this.searchForm=e,this.loadPage(e)},loadTable:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var r,i,o,c,s,l,u,p,d,m=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=m.length>2&&void 0!==m[2]?m[2]:function(e){return e},this.isLoadTable=!0,e.next=4,a(Object(n["a"])({},this.pageOption,t));case 4:return i=e.sent,o=i.data,c=o.data,s=c.records,l=c.size,u=c.total,p=c.current,d=u/l+1===p,d&&0!==u?this.searchPage({current:p-1,size:l,total:u}):this.pagination={current:p,size:l,total:u},this.pagedTable=s.map(r),this.isLoadTable=!1,e.abrupt("return",o.data);case 12:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.pageOption.size=e,this.loadPage()},handleCurrentChange:function(e){this.pageOption.current=e,this.loadPage()},_handleGlobalDeleteById:function(e,t){this._handleGlobalById(e,t,"delete")},_handleGlobalDeleteAll:function(e){this._handleGlobalAll(e,"delete")},_handleGlobalById:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"delete",r=o[n];this.$confirm("此操作将".concat(r,"该数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t(e).then(function(e){e.data.data?a.$message({type:"success",message:"".concat(r,"成功!")}):a.$message({type:"info",message:"".concat(r,"失败，").concat(e.data.msg)}),a.loadPage()})})},_handleGlobalAll:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,n,i,c=this,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"delete",n=this.multipleSelection,i=o[a],void 0!==n&&0!==n.length){e.next=6;break}return this.$message("请先选择需要".concat(i,"的选项")),e.abrupt("return");case 6:this.$confirm("此操作将".concat(i,"这些数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark(function e(){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:a=e.sent,r=a.data,r.data?(c.$message({type:"success",message:"".concat(i,"成功!")}),c.pageOption=c._pageOption()):c.$message({type:"info",message:"".concat(i,"失败，").concat(r.msg)}),c.loadPage();case 6:case"end":return e.stop()}},e)})));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),_handleComfirm:function(e,t,a,n,i){var o=this;this.$confirm(n||"是否".concat(a),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark(function n(){var r,c;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t(e);case 2:r=n.sent,c=r.data,c.data?o.$message({type:"success",message:i||"".concat(a,"成功!")}):o.$message({type:"info",message:"".concat(c.msg)}),o.loadPage();case 6:case"end":return n.stop()}},n)}))).catch(function(e){o.$message({type:"info",message:"".concat(e,", 已取消").concat(a)})})},mixinsCellPointerStyle:function(e){var t=e.column;return"index"!==t.type&&"selection"!==t.type&&"操作"!==t.label&&"cursor:pointer"}}}},"84df":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("c1df"),r=a.n(n),i=function(){return r()().format("YYYY-MM-DD HH:mm:ss")}},"862c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}]},[a("basic-container",[a("page-header",{attrs:{title:"资讯管理"}}),a("operation-container",[a("template",{slot:"left"},[a("iep-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")])],1),a("template",{slot:"right"},[a("operation-search",{attrs:{"advance-search":"",prop:e.searchData},on:{"search-page":e.searchPage}},[a("advance-search",{on:{"search-page":e.searchPage}})],1)],1)],2),a("iep-table",{attrs:{isLoadTable:e.isLoadTable,pagination:e.pagination,columnsMap:e.columnsMap,pagedTable:e.pagedTable},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("operation-wrapper",[a("iep-button",{attrs:{plain:""},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("iep-button",{attrs:{type:"warning"},on:{click:function(a){return e.handleDelete(t.row)}}},[a("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1)],1)],1),e.show?a("div",[a("form-container",{ref:"formContainer",on:{end:e.onEnd}})],1):e._e()])},r=[],i=(a("ac6a"),a("96cf"),a("1da1")),o=a("f874"),c=a("eba8"),s=a("502e"),l=a("2a09"),u=a("2030"),p={components:{advanceSearch:c["default"],formContainer:u["default"]},mixins:[s["a"]],data:function(){return{show:!1,columnsMap:l["a"],searchData:"title"}},created:function(){this.loadPage()},methods:{onEnd:function(e){this.show=!1,e&&this.loadPage()},handleSelectionChange:function(e){this.multipleSelection=e.map(function(e){return e.id})},handleDelete:function(e){this._handleGlobalDeleteById(e.articleId,o["b"])},handleAdd:function(){var e=this;this.show=!0,this.$nextTick(function(){e.$refs.formContainer.open(0)})},handleEdit:function(e){var t=this;this.show=!0,this.$nextTick(function(){t.$refs.formContainer.open(e.articleId)})},loadPage:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.searchForm,e.next=3,this.loadTable(t,o["d"]);case 3:a=e.sent,this.pagedTable=a.records,this.pagedTable&&this.pagedTable.forEach(function(e){e.isDispatch=0==e.isDispatch?"否":"是"});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},d=p,m=a("2877"),f=Object(m["a"])(d,n,r,!1,null,null,null);t["default"]=f.exports},eba8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{model:e.form,"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{label:"资讯标题："}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title","string"===typeof t?t.trim():t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"来源："}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source","string"===typeof t?t.trim():t)},expression:"form.source"}})],1),a("el-form-item",[a("operation-wrapper",[a("iep-button",{attrs:{type:"primary"},on:{click:e.searchPage}},[e._v("搜索")]),a("iep-button",{on:{click:e.clearSearchParam}},[e._v("清空")])],1)],1)],1)},r=[],i=a("2a09"),o={data:function(){return{form:Object(i["e"])(),pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},methods:{searchPage:function(){this.$emit("search-page",Object(i["g"])(this.form))},clearSearchParam:function(){this.form=Object(i["e"])()}}},c=o,s=a("2877"),l=Object(s["a"])(c,n,r,!1,null,null,null);t["default"]=l.exports},edab:function(e,t,a){},f874:function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return c}),a.d(t,"e",function(){return s}),a.d(t,"b",function(){return l});var n=a("b5c6"),r="/tybhrms/tybarticle";function i(e){return Object(n["a"])({url:"".concat(r,"/page"),method:"get",params:e})}function o(e){return Object(n["a"])({url:"".concat(r,"/").concat(e),method:"get"})}function c(e){return Object(n["a"])({url:"".concat(r,"/create"),method:"post",data:e})}function s(e){return Object(n["a"])({url:"".concat(r,"/update"),method:"post",data:e})}function l(e){return Object(n["a"])({url:"".concat(r,"/del/").concat(e),method:"post"})}}}]);