(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4abb59c6"],{"33b3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("basic-container",[n("page-header",{attrs:{title:"船员管理"}}),n("operation-container",[n("template",{slot:"left"},[n("iep-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")])],1),n("template",{slot:"right"},[n("operation-search",{attrs:{prop:e.searchData},on:{"search-page":e.searchPage}})],1)],2),n("iep-table",{attrs:{isLoadTable:e.isLoadTable,pagination:e.pagination,columnsMap:e.columnsMap,pagedTable:e.pagedTable,"is-mutiple-selection":""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{prop:"operation",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("operation-wrapper",[n("iep-button",{attrs:{type:"warning",plain:""},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v("编辑")]),n("iep-button",{attrs:{type:"default"},on:{click:function(n){return e.handleDelete(t.row)}}},[n("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1)],1)],1)},r=[],i=(n("96cf"),n("1da1")),c=n("c533b"),o=n("502e"),u=n("b0ed"),s={mixins:[o["a"]],data:function(){return{dictsMap:u["c"],columnsMap:u["b"],searchData:"realName"}},created:function(){this.loadPage()},methods:{handleSelectionChange:function(e){this.multipleSelection=e.map(function(e){return e.id})},handleDelete:function(e){this._handleGlobalDeleteById(e.userId,c["c"])},handleAdd:function(){this.$router.push({path:"/hrms_spa/crew_admin/0"})},handleEdit:function(e){this.$router.push({path:"/hrms_spa/crew_admin/".concat(e.userId)})},handleDetail:function(e){this.$router.push({path:"/hrms_spa/crew_view/".concat(e.userId)})},loadPage:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:this.searchForm,this.loadTable(t,c["g"]);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},l=s,d=n("2877"),p=Object(d["a"])(l,a,r,!1,null,null,null);t["default"]=p.exports},4917:function(e,t,n){"use strict";var a=n("cb7c"),r=n("9def"),i=n("0390"),c=n("5f1b");n("214f")("match",1,function(e,t,n,o){return[function(n){var a=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,a):new RegExp(n)[t](String(a))},function(e){var t=o(n,e,this);if(t.done)return t.value;var u=a(e),s=String(this);if(!u.global)return c(u,s);var l=u.unicode;u.lastIndex=0;var d,p=[],h=0;while(null!==(d=c(u,s))){var m=String(d[0]);p[h]=m,""===m&&(u.lastIndex=i(s,r(u.lastIndex),l)),h++}return 0===h?null:p}]})},"502e":function(e,t,n){"use strict";var a=n("be94"),r=(n("96cf"),n("1da1")),i=n("51f4"),c={delete:"删除",shelf:"上架",submit:"提交",cancel:"撤销"};t["a"]={data:function(){return{pagedTable:[],multipleSelection:[],isLoadTable:!0,pagination:this._pageOption(),pageOption:this._pageOption(),searchForm:{}}},methods:{_pageOption:function(){return Object(i["a"])()},searchPage:function(e){this.pageOption=this._pageOption(),this.searchForm=e,this.loadPage(e)},loadTable:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,i,c,o,u,s,l,d,p,h=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]?h[2]:function(e){return e},this.isLoadTable=!0,e.next=4,n(Object(a["a"])({},this.pageOption,t));case 4:return i=e.sent,c=i.data,o=c.data,u=o.records,s=o.size,l=o.total,d=o.current,p=l/s+1===d,p&&0!==l?this.searchPage({current:d-1,size:s,total:l}):this.pagination={current:d,size:s,total:l},this.pagedTable=u.map(r),this.isLoadTable=!1,e.abrupt("return",c.data);case 12:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.pageOption.size=e,this.loadPage()},handleCurrentChange:function(e){this.pageOption.current=e,this.loadPage()},_handleGlobalDeleteById:function(e,t){this._handleGlobalById(e,t,"delete")},_handleGlobalDeleteAll:function(e){this._handleGlobalAll(e,"delete")},_handleGlobalById:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"delete",r=c[a];this.$confirm("此操作将".concat(r,"该数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t(e).then(function(e){e.data.data?n.$message({type:"success",message:"".concat(r,"成功!")}):n.$message({type:"info",message:"".concat(r,"失败，").concat(e.data.msg)}),n.loadPage()})})},_handleGlobalAll:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,a,i,o=this,u=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:"delete",a=this.multipleSelection,i=c[n],void 0!==a&&0!==a.length){e.next=6;break}return this.$message("请先选择需要".concat(i,"的选项")),e.abrupt("return");case 6:this.$confirm("此操作将".concat(i,"这些数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:n=e.sent,r=n.data,r.data?(o.$message({type:"success",message:"".concat(i,"成功!")}),o.pageOption=o._pageOption()):o.$message({type:"info",message:"".concat(i,"失败，").concat(r.msg)}),o.loadPage();case 6:case"end":return e.stop()}},e)})));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),_handleComfirm:function(e,t,n,a,i){var c=this;this.$confirm(a||"是否".concat(n),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark(function a(){var r,o;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t(e);case 2:r=a.sent,o=r.data,o.data?c.$message({type:"success",message:i||"".concat(n,"成功!")}):c.$message({type:"info",message:"".concat(o.msg)}),c.loadPage();case 6:case"end":return a.stop()}},a)}))).catch(function(e){c.$message({type:"info",message:"".concat(e,", 已取消").concat(n)})})},mixinsCellPointerStyle:function(e){var t=e.column;return"index"!==t.type&&"selection"!==t.type&&"操作"!==t.label&&"cursor:pointer"}}}},"84df":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("c1df"),r=n.n(a),i=function(){return r()().format("YYYY-MM-DD HH:mm:ss")}},b0ed:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c}),n.d(t,"g",function(){return p}),n.d(t,"e",function(){return s}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"h",function(){return g}),n.d(t,"a",function(){return u});n("4917");var a=n("0e0b"),r=n("84df"),i=n("7ded"),c={isTrain:{0:"否",1:"是"}},o=[{prop:"userId",label:"用户ID"},{prop:"realName",label:"联系人"},{prop:"address",label:"地址"},{prop:"contactName",label:"联系人"},{prop:"remark",label:"备注"},{prop:"phone",label:"电话号码"}],u=[{prop:"certType",label:"证书种类",dictName:"tyb_crew_cert_type",type:"dict"},{prop:"certLevel",label:"证书等级",dictName:"tyb_crew_cert_level",type:"dict"},{prop:"certTitle",label:"证书职务",dictName:"tyb_crew_cert_title",type:"dict"},{prop:"certNo",label:"证书编号"},{prop:"certDateIssue",label:"有效起始日期",type:"date"},{prop:"certDateExpire",label:"有效终止日期",type:"date"},{prop:"certFile",label:"附件",type:"file"}],s=function(){return{realName:"",gender:"",idcard:"",birthday:"",address:"",phone:"",contactName:"",contactPhone:"",crewCert:"",certExpDate:"",createTime:Object(r["a"])(),updateTime:Object(r["a"])(),remark:"",fourSmallCard:"",provinceId:"",cityId:"",districtId:"",villageId:"",positionId:"",shipId:0,userId:"",nationality:"中国",nation:"",applyType:1,isTrain:0}},l=function(){return{realName:"",gender:"",idcard:"",birthday:"",address:"",phone:"",contactName:"",contactPhone:"",crewCert:"",certExpDate:"",createTime:Object(r["a"])(),updateTime:Object(r["a"])(),remark:"",fourSmallCard:"",provinceId:"",cityId:"",districtId:"",villageId:"",positionId:"",shipId:0,userId:"",nationality:"",nation:"",applyType:1,isTrain:0}},d=function(e,t,n){""===t?n(new Error("请输入联系电话")):t.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/)?Object(i["l"])(t).then(function(e){e.data.data?n():n(new Error(e.data.msg))}):n(new Error("请输入正确的手机号码!"))},p={realName:[{required:!0,message:"请填写个人姓名",trigger:"blur"}],contactName:[{required:!0,message:"请填联系人",trigger:"blur"}],gender:[{required:!0,message:"请填写性别",trigger:"blur"}],idcard:[{required:!0,message:"请填写身份证信息",trigger:"blur"}],birthday:[{required:!0,message:"请填写生日信息",trigger:"blur"}],phone:[{required:!0,message:"请填写联系电话",trigger:"blur"},{validator:d,trigger:"blur"}]},h=function(){return{contactName:"",positionName:""}},m=function(){return{contactName:"",positionName:""}},f=function(e){var t=Object(a["g"])(l(),e);return t},g=function(e){var t=Object(a["g"])(m(),e);return t.contactName=e.contactName?e.contactName:null,t.positionName=e.positionName?e.positionName:null,t}},c533b:function(e,t,n){"use strict";n.d(t,"i",function(){return o}),n.d(t,"f",function(){return u}),n.d(t,"d",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"e",function(){return h}),n.d(t,"j",function(){return m}),n.d(t,"h",function(){return f}),n.d(t,"b",function(){return g});var a=n("b5c6"),r="tmlms/crew",i="admin/region",c="admin/dict";function o(e){return Object(a["a"])({url:"".concat(i,"/getinfo/")+e,method:"get"})}function u(e){return Object(a["a"])({url:"".concat(c,"/type/")+e,method:"get"})}function s(e){return Object(a["a"])({url:"".concat(i,"/area"),method:"get",params:{parentCode:e}})}function l(e){return Object(a["a"])({url:"".concat(r,"/Page"),method:"get",params:e})}function d(e){return Object(a["a"])({url:"".concat(r,"/delete"),method:"post",params:{userId:e}})}function p(e){return Object(a["a"])({url:"".concat(r,"/create"),method:"post",data:e,params:{type:1}})}function h(e){return Object(a["a"])({url:"".concat(r,"/getCrewByUserId"),method:"get",params:{userId:e}})}function m(e){return Object(a["a"])({url:"".concat(r,"/edit"),method:"post",params:{type:1},data:e})}function f(e){return Object(a["a"])({url:"/tybship/tybregion/parent/".concat(e),method:"get"})}function g(e,t,n){return Object(a["a"])({url:"".concat(r,"/upWork?idcard=").concat(t,"&workStatus=").concat(n),method:"post",data:e})}}}]);