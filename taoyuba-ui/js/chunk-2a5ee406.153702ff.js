(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a5ee406"],{"0345":function(t,e,a){"use strict";a("d6db")},"0780":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(t.currentComponet,{ref:"component",tag:"component",attrs:{record:t.record,data:t.data},on:{onEdit:t.handleEdit,onGoBack:t.handleGoBack,"load-page":t.loadPage}})},n=[],o=a("d6e6e"),i=a("da17"),s={components:{List:o["default"],Edit:i["default"]},props:{record:{type:Object,default:function(){}}},data:function(){return{data:"",currentComponet:"List"}},methods:{handleEdit:function(t){this.data=t,this.currentComponet="Edit"},handleGoBack:function(){this.currentComponet="List"},loadPage:function(){this.$emit("load-page")}}},c=s,l=a("2877"),d=Object(l["a"])(c,r,n,!1,null,null,null);e["default"]=d.exports},"0857":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var r=a("b5c6");function n(t,e){return Object(r["a"])({url:"/admin/file/".concat(t),method:"get",responseType:"arraybuffer"}).then((function(t){console.log(t);var a=new Blob([t.data]),r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=e,document.body.appendChild(r),r.style.display="none",console.log(r),r.click()}))}},"0a22":function(t,e,a){"use strict";a.d(e,"f",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"d",(function(){return d})),a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return m}));var r=a("53ca"),n=a("b5c6"),o="/prms/iepProjectInformation";function i(t){return Object(n["a"])({url:"".concat(o,"/page"),method:"get",params:t})}function s(t){return Object(n["a"])({url:"".concat(o,"/page"),method:"get",params:t})}function c(t){return Object(n["a"])({url:"".concat(o),method:"post",data:t})}function l(t){return Object(n["a"])({url:"".concat(o,"/edit"),method:"post",data:t})}function d(t){return Object(n["a"])({url:"".concat(o,"/").concat(t),method:"get"})}function u(t){var e="object"===Object(r["a"])(t)?t:[t];return Object(n["a"])({url:"".concat(o,"/delete/batch"),method:"post",data:e})}function m(t){return Object(n["a"])({url:"".concat(o,"/projectApproval"),method:"get",params:t})}},"0fcc":function(t,e,a){"use strict";a("b489d")},"183f":function(t,e,a){},1932:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-date-picker",t._g(t._b({attrs:{valueFormat:t.valueFormat,editable:!1,"picker-options":t.pickerOptions,type:"datetime"}},"el-date-picker",t.$attrs,!1),t.$listeners))},n=[],o={name:"TimeSelector",inheritAttrs:!1,data:function(){return{valueFormat:"yyyy-MM-dd HH:mm:ss",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}}}}},i=o,s=(a("de5c"),a("2877")),c=Object(s["a"])(i,r,n,!1,null,"06aeb0d2",null);e["default"]=c.exports},"1d70":function(t,e,a){},"24ce":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("page-header",{attrs:{title:t.methodName+"合同",backOption:t.backOption}}),a("el-form",{ref:"form",staticStyle:{"margin-bottom":"50px"},attrs:{model:t.formData,rules:t.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"合同名称：",prop:"contractName"}},[a("el-input",{attrs:{placeholder:"当天日期（八位数字）+客户名称+项目内容名称+“合同”，如“20180306农业部政务资源目录梳理合同”。",disabled:""},model:{value:t.formData.contractName,callback:function(e){t.$set(t.formData,"contractName",e)},expression:"formData.contractName"}})],1),a("el-form-item",{attrs:{label:"合同说明 / 收款方式：",prop:"contractExpl"}},[a("el-input",{attrs:{type:"textarea",placeholder:"合同说明/收款方式",rows:"5",disabled:""},model:{value:t.formData.contractExpl,callback:function(e){t.$set(t.formData,"contractExpl",e)},expression:"formData.contractExpl"}})],1),a("el-form-item",{attrs:{label:"业务类型：",prop:"businessType"}},[t._v(t._s(t.infoList)+"\n    ")]),a("el-form-item",{attrs:{label:"合同标签：",prop:"tagKeyWords"}},[a("iep-tag-detail",{attrs:{disabled:""},model:{value:t.formData.tagKeyWords,callback:function(e){t.$set(t.formData,"tagKeyWords",e)},expression:"formData.tagKeyWords"}})],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签订日期：",prop:"signTime"}},[a("IepDatePicker",{attrs:{disabled:""},model:{value:t.formData.signTime,callback:function(e){t.$set(t.formData,"signTime",e)},expression:"formData.signTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"完结日期：",prop:"finishTime"}},[a("IepDatePicker",{attrs:{disabled:""},model:{value:t.formData.finishTime,callback:function(e){t.$set(t.formData,"finishTime",e)},expression:"formData.finishTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"委托单位：",prop:"companyOrgId"}},[a("iep-select",{attrs:{"prefix-url":"crm/customer",disabled:""},model:{value:t.formData.companyOrgId,callback:function(e){t.$set(t.formData,"companyOrgId",e)},expression:"formData.companyOrgId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签署单位：",prop:"signCompanyOrgId"}},[a("iep-select",{attrs:{"prefix-url":"crm/customer",disabled:""},model:{value:t.formData.signCompanyOrgId,callback:function(e){t.$set(t.formData,"signCompanyOrgId",e)},expression:"formData.signCompanyOrgId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签署组织：",prop:"signDeptOrgName"}},[a("el-input",{attrs:{disabled:""},model:{value:t.formData.signDeptOrgName.name,callback:function(e){t.$set(t.formData.signDeptOrgName,"name",e)},expression:"formData.signDeptOrgName.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"承接部门：",prop:"underTakeDeptName"}},t._l(t.formData.underTakeDeptName,(function(e,r){return a("a-tag",{key:r},[t._v(t._s(e.name))])})),1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"市场经理：",prop:"Manager"}},[a("el-input",{attrs:{disabled:""},model:{value:t.formData.Manager,callback:function(e){t.$set(t.formData,"Manager",e)},expression:"formData.Manager"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同金额：",prop:"contractAmount"}},[a("el-input",{attrs:{placeholder:"合同金额",disabled:""},model:{value:t.formData.contractAmount,callback:function(e){t.$set(t.formData,"contractAmount",e)},expression:"formData.contractAmount"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同级别：",prop:"contractLevel"}},[a("iep-dict-select",{attrs:{"dict-name":"mlms_contract_level",disabled:""},model:{value:t.formData.contractLevel,callback:function(e){t.$set(t.formData,"contractLevel",e)},expression:"formData.contractLevel"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同状态：",prop:"contractStatus"}},[a("iep-dict-select",{attrs:{"dict-name":"mlms_contract_status",disabled:""},model:{value:t.formData.contractStatus,callback:function(e){t.$set(t.formData,"contractStatus",e)},expression:"formData.contractStatus"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保证金：",prop:"deposit"}},[a("el-input",{attrs:{placeholder:"保证金",disabled:""},model:{value:t.formData.deposit,callback:function(e){t.$set(t.formData,"deposit",e)},expression:"formData.deposit"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同附件："}},t._l(t.formData.contractFileList,(function(e,r){return a("span",{key:r},[a("i",{staticClass:"icon-fujian"}),t._v(t._s(e.name)+" "),a("iep-button",{attrs:{type:"text"},on:{click:function(a){return t.downloadFile(e)}}},[t._v("下载")])],1)})),0)],1)],1)],1),a("footer-toolbar",[a("iep-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("取消")])],1)],1)},n=[],o=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("28a5"),a("ade3")),i=a("6d1a"),s=a("4faa"),c=a("2f62"),l=a("7107"),d=a("e17e"),u=a("2934");function m(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=f(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function f(t,e){if(t){if("string"===typeof t)return p(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={components:{FooterToolbar:s["default"]},data:function(){var t=this;return{dialogShow:!1,methodName:"详情",formRequestFn:function(){},id:"",contractId:"",formData:Object(i["c"])(),rules:i["e"],backOption:{isBack:!0,backPath:null,backFunction:function(){t.$emit("detail")}},infoList:""}},props:{record:{type:Object,default:function(){}},add:{type:Object,default:function(){}}},computed:b({},Object(c["c"])(["dictGroup"])),created:function(){var t=this;this.contractId=this.add.contractId,Object(l["a"])(this.contractId).then((function(e){t.formData=e.data.data;var a,r=e.data.data.businessType.split(","),n=[],o=m(r);try{for(o.s();!(a=o.n()).done;){var i,s=a.value,c=m(t.dictGroup.prms_business_type);try{for(c.s();!(i=c.n()).done;){var l,u=i.value,f=m(u.children);try{for(f.s();!(l=f.n()).done;){var p=l.value;p.value==s&&n.push(p.label)}}catch(h){f.e(h)}finally{f.f()}}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}t.infoList=n.toString(),Object(d["d"])(t.formData.directorId).then((function(e){t.$set(t.formData,"Manager",e.data.data.realName)}))}))},methods:{loadPage:function(){this.$emit("load-page")},resetForm:function(t){this.$refs[t].resetFields(),this.formData=Object(i["c"])(),this.$emit("detail")},downloadFile:function(t){Object(u["a"])({url:t.url,name:t.name})}}},v=g,y=a("2877"),D=Object(y["a"])(v,r,n,!1,null,null,null);e["default"]=D.exports},"260e":function(t,e,a){"use strict";a("1d70")},"265d":function(t,e,a){"use strict";a("fd55")},"27de":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iep-dialog",{attrs:{"dialog-show":t.dialogShow,title:"拜访日志",width:"40%"},on:{close:t.loadPage}},[a("el-form",{ref:"form",staticStyle:{"margin-bottom":"50px"},attrs:{model:t.formData,rules:t.rules,"label-width":"100px",disabled:t.disabled}},[a("el-form-item",{attrs:{label:"拜访主题：",prop:"title"}},[a("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:"拜访时间：",prop:"meetingTime"}},[a("time-selector",{model:{value:t.formData.meetingTime,callback:function(e){t.$set(t.formData,"meetingTime",e)},expression:"formData.meetingTime"}})],1),a("el-form-item",{attrs:{label:"拜访内容：",prop:"meetingContent"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.formData.meetingContent,callback:function(e){t.$set(t.formData,"meetingContent",e)},expression:"formData.meetingContent"}})],1)],1),a("template",{slot:"footer"},[t.isShow?a("iep-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("保存")]):t._e(),a("iep-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("取消")])],1)],2)},n=[],o=a("abd7"),i=a("cdbd"),s=a("1932"),c={components:{TimeSelector:s["default"]},data:function(){return{dictsMap:o["b"],dialogShow:!1,formRequestFn:function(){},methodName:"创建",formData:Object(o["d"])(),rules:o["e"],id:"",clientList:[],disabled:!1,isShow:!0,created:!1}},methods:{loadPage:function(){this.formData=Object(o["d"])(),this.dialogShow=!1,this.$emit("load-page")},submitForm:function(t){var e=this;this.formData.visitingUserId=[this.id],this.$refs[t].validate((function(t){if(!t)return!1;e.formRequestFn(e.formData).then((function(t){e.$message({message:"".concat(e.methodName,"成功"),type:"success"}),e.created&&Object(i["j"])(t.data.data),e.dialogShow=!1,e.$emit("load-page")}))}))},resetForm:function(){this.formData=Object(o["d"])(),this.dialogShow=!1,this.loadPage("load-page")}}},l=c,d=a("2877"),u=Object(d["a"])(l,r,n,!1,null,null,null);e["default"]=u.exports},"2f66":function(t,e,a){},"3dea":function(t,e,a){"use strict";a("885a")},"3fec":function(t,e,a){"use strict";a.d(e,"f",(function(){return o})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"a",(function(){return d})),a.d(e,"h",(function(){return u})),a.d(e,"c",(function(){return m}));var r=a("b5c6"),n="/crm/program";function o(t){return Object(r["a"])({url:"".concat(n,"/page"),method:"get",params:t})}function i(t){return Object(r["a"])({url:"".concat(n,"/materialInfo"),method:"get",params:t})}function s(t){return Object(r["a"])({url:"".concat(n,"/create"),method:"post",data:t})}function c(t){return Object(r["a"])({url:"".concat(n,"/").concat(t),method:"get"})}function l(t){return Object(r["a"])({url:"".concat(n,"/save"),method:"post",data:t})}function d(t){return Object(r["a"])({url:"".concat(n,"/get"),method:"get",params:t})}function u(t){return Object(r["a"])({url:"".concat(n,"/update"),method:"post",data:t})}function m(t){return Object(r["a"])({url:"".concat(n,"/delete/batch/").concat(t),method:"post"})}},4898:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iep-drawer",{attrs:{"drawer-show":t.drawerShow,type:"drawer",title:t.methodName+"联系人",width:"40%"},on:{close:t.loadPage}},[a("el-form",{ref:"formName",attrs:{model:t.form,rules:t.rules,"label-width":"130px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"contactName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n            联系人姓名\n            "),a("iep-tip",{attrs:{content:t.tipContent.contactName}}),t._v("\n            :\n          ")],1),a("el-input",{model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"contactPosition"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n            联系人职务\n            "),a("iep-tip",{attrs:{content:t.tipContent.contactPosition}}),t._v("\n            :\n          ")],1),a("el-input",{model:{value:t.form.contactPosition,callback:function(e){t.$set(t.form,"contactPosition",e)},expression:"form.contactPosition"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话:",prop:"telephoneNo"}},[a("el-input",{attrs:{placeholder:"座机（区号+号码）"},model:{value:t.form.telephoneNo,callback:function(e){t.$set(t.form,"telephoneNo",e)},expression:"form.telephoneNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机:",prop:"cellphone"}},[a("el-input",{attrs:{placeholder:"常用手机号码"},model:{value:t.form.cellphone,callback:function(e){t.$set(t.form,"cellphone",e)},expression:"form.cellphone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"传真:",prop:"fax"}},[a("el-input",{attrs:{placeholder:"区号+号码"},model:{value:t.form.fax,callback:function(e){t.$set(t.form,"fax",e)},expression:"form.fax"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"QQ:",prop:"qq"}},[a("el-input",{attrs:{placeholder:"qq号码"},model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"微信:",prop:"wechat"}},[a("el-input",{model:{value:t.form.wechat,callback:function(e){t.$set(t.form,"wechat",e)},expression:"form.wechat"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{attrs:{placeholder:"常用邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)],1),a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("el-input",{attrs:{placeholder:"详细地址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),a("el-form-item",{attrs:{prop:"clientConcern"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        客户关注\n        "),a("iep-tip",{attrs:{content:t.tipContent.clientConcern}}),t._v("\n        :\n      ")],1),a("el-input",{attrs:{type:"textarea"},model:{value:t.form.clientConcern,callback:function(e){t.$set(t.form,"clientConcern",e)},expression:"form.clientConcern"}})],1),a("el-form-item",{attrs:{label:"其他:",prop:"other"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.other,callback:function(e){t.$set(t.form,"other",e)},expression:"form.other"}})],1)],1),a("template",{slot:"footer"},[a("iep-button",{staticClass:"btn",on:{click:function(e){return t.loadPage()}}},[t._v("取消")]),a("iep-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formName")}}},[t._v("提交")])],1)],2)},n=[],o=a("65cd"),i={contactName:"请务必填写真实联系人姓名，与⾝份证信息⼀致，切记出现张主任等",contactPosition:"请务必准确填写该联系人在其单位/企业所担任的职务",clientConcern:"请简明扼要说明该联系人对合作中所关注的方面，如项目进度管理"},s={data:function(){return{tipContent:i,drawerShow:!1,methodName:"",formRequestFn:function(){},form:Object(o["b"])(),id:"",clientContactId:"",rules:o["c"]}},methods:{loadPage:function(){this.form=Object(o["b"])(),this.drawerShow=!1,this.$emit("load-page")},submitForm:function(t){var e=this;this.form.clientIds=[this.id],this.form.clientContactId=this.clientContactId,this.$refs[t].validate((function(t){if(!t)return!1;e.formRequestFn(e.form).then((function(){e.$message({message:"".concat(e.methodName,"成功"),type:"success"}),e.$emit("async"),e.loadPage()}))}))}}},c=s,l=a("2877"),d=Object(l["a"])(c,r,n,!1,null,null,null);e["default"]=d.exports},"4a36":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-wrapper"},[a("basic-container",[a("page-header",{attrs:{title:t.formData.clientName,backOption:t.backOption}}),a("iep-tabs",{attrs:{"tab-list":t.tabList},scopedSlots:t._u(["CustomerPanorama"===t.activeTab?{key:"CustomerPanorama",fn:function(){return[a("customer-panorama",{directives:[{name:"loading",rawName:"v-loading",value:"CustomerPanorama"!==t.activeTab,expression:"activeTab !=='CustomerPanorama'"}],attrs:{formData:t.formData}})]},proxy:!0}:null,"Contacts"===t.activeTab?{key:"Contacts",fn:function(){return[a("contacts",{directives:[{name:"loading",rawName:"v-loading",value:"Contacts"!==t.activeTab,expression:"activeTab !=='Contacts'"}],attrs:{record:t.record},on:{"load-page":t.loadPage}})]},proxy:!0}:null,"VisitingRecord"===t.activeTab?{key:"VisitingRecord",fn:function(){return[a("visiting-record",{directives:[{name:"loading",rawName:"v-loading",value:"VisitingRecord"!==t.activeTab,expression:"activeTab !=='VisitingRecord'"}],attrs:{record:t.record},on:{"load-page":t.loadPage}})]},proxy:!0}:null,"Scheme"===t.activeTab?{key:"Scheme",fn:function(){return[a("scheme",{directives:[{name:"loading",rawName:"v-loading",value:"Scheme"!==t.activeTab,expression:"activeTab !=='Scheme'"}],attrs:{record:t.record},on:{"load-page":t.loadPage}})]},proxy:!0}:null,"Agreement"===t.activeTab?{key:"Agreement",fn:function(){return[a("agreement",{directives:[{name:"loading",rawName:"v-loading",value:"Agreement"!==t.activeTab,expression:"activeTab !=='Agreement'"}],attrs:{record:t.record},on:{"load-page":t.loadPage}})]},proxy:!0}:null,"Information"===t.activeTab?{key:"Information",fn:function(){return[a("information",{directives:[{name:"loading",rawName:"v-loading",value:"Information"!==t.activeTab,expression:"activeTab !=='Information'"}],on:{"load-page":t.loadPage}})]},proxy:!0}:null],null,!0),model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}})],1)],1)},n=[],o=a("a893"),i=a("5188"),s=a("aab2"),c=a("0780"),l=a("ee33"),d=a("6e31"),u=a("502e"),m=a("a6e9"),f={name:"detail",mixins:[u["a"]],components:{CustomerPanorama:o["default"],Contacts:i["default"],VisitingRecord:s["default"],Scheme:c["default"],Agreement:l["default"],Information:d["default"]},data:function(){return{id:this.$route.params.id,record:{id:this.$route.params.id,type:this.$route.query.type,flag:this.$route.query.flag,collaborations:""},backOption:{isBack:!0,backPath:this.$route.query.redirect},count:[],formData:{},tabList:[{label:"客户全景",value:"CustomerPanorama"},{label:"联系人",value:"Contacts"},{label:"拜访记录",value:"VisitingRecord"},{label:"方案",value:"Scheme"},{label:"合同",value:"Agreement"},{label:"资讯",value:"Information"}],activeTab:"CustomerPanorama",routerBack:!1,formRequestFn:function(){}}},created:function(){this.loadPage(),this.dealNum(),this.getRouter(),this.routerBack&&(this.activeTab="Scheme")},methods:{getRouter:function(){this.routerBack=this.$route.query.routerBack},dealNum:function(){},loadPage:function(){var t=this;Object(m["e"])(this.id).then((function(e){var a=e.data;t.count=[],t.tabList=[{label:"客户全景",value:"CustomerPanorama"},{label:"联系人",value:"Contacts"},{label:"拜访记录",value:"VisitingRecord"},{label:"方案",value:"Scheme"},{label:"合同",value:"Agreement"},{label:"资讯",value:"Information"}],t.formData=a.data,t.record.collaborations=t.formData.collaborations,t.record.clientName=t.formData.clientName,""==t.formData.preMarketManagerName?t.formData.preMarketManagerName="暂无":""==t.formData.preDeptName?t.formData.preDeptName="暂无":t.formData.hasOwnProperty("preMarketManagerName")?t.formData.hasOwnProperty("preDeptName")||(t.formData.preDeptName="暂无"):t.formData.preMarketManagerName="暂无",t.count.push(a.data.contactNumber,a.data.contactRecordNumber,a.data.programNumber,a.data.contractNumber,0);for(var r=1;r<t.tabList.length;r++)t.tabList[r].label=t.tabList[r].label+"("+t.count[r-1]+")"}))},handleGoBack:function(){this.$emit("onGoBack")}},watch:{$route:"getRouter"}},p=f,h=(a("265d"),a("2877")),b=Object(h["a"])(p,r,n,!1,null,"1b35275e",null);e["default"]=b.exports},"502e":function(t,e,a){"use strict";a("8e6e"),a("ac6a"),a("456d");var r=a("ade3"),n=(a("96cf"),a("1da1")),o=a("51f4");function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={delete:"删除",shelf:"上架",submit:"提交",cancel:"撤销"};e["a"]={data:function(){return{pagedTable:[],multipleSelection:[],isLoadTable:!0,pagination:this._pageOption(),pageOption:this._pageOption(),searchForm:{}}},methods:{_pageOption:function(){return Object(o["a"])()},searchPage:function(t){this.pageOption=this._pageOption(),this.searchForm=t,this.loadPage(t)},loadTable:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var r,n,o,i,c,l,d,u,m,f=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:function(t){return t},this.isLoadTable=!0,t.next=4,a(s(s({},this.pageOption),e));case 4:return n=t.sent,o=n.data,i=o.data,c=i.records,l=i.size,d=i.total,u=i.current,m=d/l+1===u,m&&0!==d?this.searchPage({current:u-1,size:l,total:d}):this.pagination={current:u,size:l,total:d},this.pagedTable=c.map(r),this.isLoadTable=!1,t.abrupt("return",o.data);case 12:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){this.pageOption.size=t,this.loadPage()},handleCurrentChange:function(t){this.pageOption.current=t,this.loadPage()},_handleGlobalDeleteById:function(t,e){this._handleGlobalById(t,e,"delete")},_handleGlobalDeleteAll:function(t){this._handleGlobalAll(t,"delete")},_handleGlobalById:function(t,e){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"delete",n=c[r];this.$confirm("此操作将".concat(n,"该数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e(t).then((function(t){t.data.data?a.$message({type:"success",message:"".concat(n,"成功!")}):a.$message({type:"info",message:"".concat(n,"失败，").concat(t.data.msg)}),a.loadPage()}))}))},_handleGlobalAll:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,r,o,i=this,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"delete",r=this.multipleSelection,o=c[a],void 0!==r&&0!==r.length){t.next=6;break}return this.$message("请先选择需要".concat(o,"的选项")),t.abrupt("return");case 6:this.$confirm("此操作将".concat(o,"这些数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e(r);case 2:a=t.sent,n=a.data,n.data?(i.$message({type:"success",message:"".concat(o,"成功!")}),i.pageOption=i._pageOption()):i.$message({type:"info",message:"".concat(o,"失败，").concat(n.msg)}),i.loadPage();case 6:case"end":return t.stop()}}),t)}))));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),_handleComfirm:function(t,e,a,r,o){var i=this;this.$confirm(r||"是否".concat(a),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e(t);case 2:n=r.sent,s=n.data,s.data?i.$message({type:"success",message:o||"".concat(a,"成功!")}):i.$message({type:"info",message:"".concat(s.msg)}),i.loadPage();case 6:case"end":return r.stop()}}),r)})))).catch((function(t){i.$message({type:"info",message:"".concat(t,", 已取消").concat(a)})}))},mixinsCellPointerStyle:function(t){var e=t.column;return"index"!==e.type&&"selection"!==e.type&&"操作"!==e.label&&"cursor:pointer"}}}},5188:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract"},[a("div",{staticClass:"head"},[a("iep-button",{attrs:{type:"primary",plain:""},on:{click:t.handleAdd}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增")])],1),a("iep-table",{attrs:{isLoadTable:t.isLoadTable,pagination:t.pagination,columnsMap:t.columnsMap,"cell-style":t.mixinsCellPointerStyle,pagedTable:t.pagedTable},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"row-click":t.handleDetail}},[a("template",{slot:"before-columns"},[a("el-table-column",{attrs:{prop:"operation",label:"联系人姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("iep-table-link",[t._v(t._s(e.row.contactName))])]}}])})],1),0!==t.record.collaborations.length?a("el-table-column",{attrs:{label:"创建人",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("div",{staticClass:"line"},[a("iep-img-avatar",{attrs:{size:30,src:e.row.avatar,alt:"头像"}})],1),a("div",{staticClass:"create-name line"},[t._v("\n            "+t._s(e.row.realName)+"\n          ")])])]}}],null,!1,3812724123)}):t._e(),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("operation-wrapper",[a("iep-button",{attrs:{type:"warning",plain:"",disabled:e.row.creatorId!==t.userInfo.userId},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("iep-button",{attrs:{disabled:e.row.creatorId!==t.userInfo.userId},on:{click:function(a){return t.handleDeleteById(e.row)}}},[t._v("删除")])],1)]}}])})],2),a("edit-drawer",{ref:"EditDrawer",on:{"load-page":t.loadPage,async:t.async}}),a("detail-drawer",{ref:"DetailDrawer",on:{"load-page":t.loadPage}})],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("502e"),s=a("65cd"),c=a("68f8"),l=a("4898"),d=a("7091"),u=a("2f62");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"contract",mixins:[i["a"]],components:{EditDrawer:l["default"],DetailDrawer:d["default"]},props:{record:{type:Object,default:function(){}}},data:function(){return{columnsMap:s["a"],formData:{}}},created:function(){this.loadPage()},computed:f({},Object(u["c"])(["userInfo"])),methods:{async:function(){this.$emit("load-page")},loadPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(f({},this.searchForm),{},{clientId:this.record.id});this.loadTable(t,c["c"])},handleAdd:function(){this.$refs["EditDrawer"].methodName="新增",this.$refs["EditDrawer"].formRequestFn=c["a"],this.$refs["EditDrawer"].drawerShow=!0,this.$refs["EditDrawer"].id=this.record.id},handleEdit:function(t){var e=this;Object(c["e"])(t.clientContactId).then((function(t){var a=t.data;e.$refs["EditDrawer"].form=a.data})),this.$refs["EditDrawer"].methodName="编辑",this.$refs["EditDrawer"].formRequestFn=c["f"],this.$refs["EditDrawer"].drawerShow=!0,this.$refs["EditDrawer"].id=this.record.id,this.$refs["EditDrawer"].clientContactId=t.clientContactId},handleDetail:function(t,e){var a=this;if("操作"==e.label||"selection"==e.type||"index"==e.type)return!1;Object(c["e"])(t.clientContactId).then((function(t){var e=t.data;a.$refs["DetailDrawer"].form=e.data})),this.$refs["DetailDrawer"].methodName="详情",this.$refs["DetailDrawer"].drawerShow=!0},handleDeleteById:function(t){var e=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["b"])(t.clientContactId).then((function(t){t.data.data?(e.$message({type:"success",message:"删除成功!"}),e.$emit("load-page")):e.$message({type:"info",message:"删除失败，".concat(t.data.msg)}),e.loadPage()}))}))}}},h=p,b=(a("deba"),a("2877")),g=Object(b["a"])(h,r,n,!1,null,"dbb4dc74",null);e["default"]=g.exports},"533f":function(t,e,a){},"569e":function(t,e,a){},"5f53":function(t,e,a){"use strict";a("2f66")},6050:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("operation-wrapper",[a("iep-button",{staticClass:"btn",attrs:{type:"primary",plain:""},on:{click:t.handleAdd}},[a("i",{staticClass:"el-icon-plus"}),t._v("新增")])],1),a("iep-table",{attrs:{isLoadTable:t.isLoadTable,pagination:t.pagination,columnsMap:t.columnsMap,pagedTable:t.pagedTable},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[0!==t.record.collaborations.length?a("el-table-column",{attrs:{label:"创建人",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("div",{staticClass:"line"},[a("iep-img-avatar",{attrs:{size:30,src:e.row.avatar,alt:"头像"}})],1),a("div",{staticClass:"create-name line"},[t._v("\n            "+t._s(e.row.realName)+"\n          ")])])]}}],null,!1,3812724123)}):t._e(),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("operation-wrapper",[a("iep-button",{attrs:{type:"warning",plain:""},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v("查看")]),a("iep-button",{attrs:{disabled:e.row.userId!==t.userInfo.userId},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("iep-button",{attrs:{disabled:e.row.userId!==t.userInfo.userId},on:{click:function(a){return t.handleDeleteById(e.row)}}},[t._v("删除")])],1)]}}])})],1),a("edit-dialog",{ref:"EditDialog",on:{"load-page":t.loadPage}}),a("visit-dialog",{ref:"VisitDialog",on:{"load-page":t.loadPage}})],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("502e"),s=a("cdbd"),c=a("abd7"),l=a("c348"),d=a("27de"),u=a("2f62");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={mixins:[i["a"]],props:["record"],components:{EditDialog:l["default"],VisitDialog:d["default"]},data:function(){return{id:this.record.id,columnsMap:c["f"],dialogShow:!1,data:""}},created:function(){this.loadPage()},computed:f({},Object(u["c"])(["userInfo"])),methods:{handleAdd:function(){this.$refs["VisitDialog"].dialogShow=!0,this.$refs["VisitDialog"].methodName="保存",this.$refs["VisitDialog"].formRequestFn=s["b"],this.$refs["VisitDialog"].id=this.id,this.$refs["VisitDialog"].created=!0,this.$refs["VisitDialog"].disabled=!1},handleEdit:function(t){var e=this;Object(s["g"])({id:t.id}).then((function(t){e.$refs["VisitDialog"].formData=t.data.data})),this.$refs["VisitDialog"].dialogShow=!0,this.$refs["VisitDialog"].methodName="保存",this.$refs["VisitDialog"].id=this.id,this.$refs["VisitDialog"].formRequestFn=s["i"],this.$refs["VisitDialog"].isShow=!0,this.$refs["VisitDialog"].disabled=!1,this.$refs["VisitDialog"].created=!1},handleDetail:function(t){var e=this;Object(s["g"])({id:t.id}).then((function(t){e.$refs["VisitDialog"].formData=t.data.data})),this.$refs["VisitDialog"].dialogShow=!0,this.$refs["VisitDialog"].disabled=!0,this.$refs["VisitDialog"].isShow=!1},handleDeleteById:function(t){var e=this;this.$confirm("此操作将同时删除原件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["d"])(t.id).then((function(t){t.data.data?(e.$message({type:"success",message:"删除成功!"}),e.$emit("async")):e.$message({type:"info",message:"删除失败，".concat(t.data.msg)}),e.loadPage()}))}))},loadPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(f({},this.searchForm),{},{id:this.id});this.$emit("async"),this.loadTable(t,s["f"])}}},h=p,b=(a("ee0d"),a("2877")),g=Object(b["a"])(h,r,n,!1,null,"49085033",null);e["default"]=g.exports},"60e7":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"iep-page-form"},[a("page-header",{attrs:{title:t.methodName+"合同",backOption:t.backOption}}),a("el-form",{ref:"form",staticStyle:{"margin-bottom":"50px"},attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"130px"}},[a("el-form-item",{attrs:{prop:"contractName"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        合同名称\n        "),a("iep-tip",{attrs:{content:t.tipContent.contractName}}),t._v("\n        :\n      ")],1),a("el-input",{attrs:{placeholder:"当天日期（八位数字）+客户名称+项目内容名称+“合同”，如“20180306农业部政务资源目录梳理合同”。"},model:{value:t.formData.contractName,callback:function(e){t.$set(t.formData,"contractName",e)},expression:"formData.contractName"}})],1),a("el-form-item",{attrs:{prop:"contractExpl"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        合同说明 / 收款方式\n        "),a("iep-tip",{attrs:{content:t.tipContent.contractExpl}}),t._v("\n        :\n      ")],1),a("el-input",{attrs:{type:"textarea",placeholder:"合同说明/收款方式",rows:"5"},model:{value:t.formData.contractExpl,callback:function(e){t.$set(t.formData,"contractExpl",e)},expression:"formData.contractExpl"}})],1),a("el-form-item",{attrs:{label:"关联项目：",prop:"projectId"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:t.formData.projectId,callback:function(e){t.$set(t.formData,"projectId",e)},expression:"formData.projectId"}}),""!=t.formData.projectName?a("el-tag",{attrs:{type:"info"}},[t._v(t._s(t.formData.projectName))]):t._e(),a("iep-button",{on:{click:t.relationProject}},[a("i",{staticClass:"el-icon-plus"})])],1),a("el-form-item",{attrs:{prop:"businessType"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        业务类型\n        "),a("iep-tip",{attrs:{content:t.tipContent.businessType}}),t._v("\n        :\n      ")],1),a("businessType",{model:{value:t.formData.businessType,callback:function(e){t.$set(t.formData,"businessType",e)},expression:"formData.businessType"}})],1),a("el-form-item",{attrs:{prop:"tagKeyWords"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        合同标签\n        "),a("iep-tip",{attrs:{content:t.tipContent.tagKeyWords}}),t._v("\n        :\n      ")],1),a("iep-tag",{model:{value:t.formData.tagKeyWords,callback:function(e){t.$set(t.formData,"tagKeyWords",e)},expression:"formData.tagKeyWords"}})],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签订日期：",prop:"signTime"}},[a("IepDatePicker",{attrs:{placeholder:"请选择实际签订合同日期"},on:{change:function(e){return t.startChange(t.formData.signTime)}},model:{value:t.formData.signTime,callback:function(e){t.$set(t.formData,"signTime",e)},expression:"formData.signTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"完结日期：",prop:"finishTime"}},[a("IepDatePicker",{attrs:{placeholder:"请选择合同中签订的完结时间"},on:{change:function(e){return t.endChange(t.formData.finishTime)}},model:{value:t.formData.finishTime,callback:function(e){t.$set(t.formData,"finishTime",e)},expression:"formData.finishTime"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"委托单位：",prop:"companyOrgId"}},[a("iep-select",{attrs:{"prefix-url":"crm/customer/my",placeholder:"请选择该项目实际服务对象"},on:{change:function(e){return t.handleChange(t.formData.companyOrgId)}},model:{value:t.formData.companyOrgId,callback:function(e){t.$set(t.formData,"companyOrgId",e)},expression:"formData.companyOrgId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签署单位：",prop:"signCompanyOrgId"}},[a("iep-select",{attrs:{"prefix-url":"crm/customer",placeholder:"请选择实际与我司签订合同的单位"},model:{value:t.formData.signCompanyOrgId,callback:function(e){t.$set(t.formData,"signCompanyOrgId",e)},expression:"formData.signCompanyOrgId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签署组织：",prop:"signDeptOrgName"}},[a("el-input",{attrs:{readonly:""},model:{value:t.formData.signDeptName,callback:function(e){t.$set(t.formData,"signDeptName",e)},expression:"formData.signDeptName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"承接部门：",prop:"underTakeDeptName"}},[a("iep-dept-multiple",{model:{value:t.formData.underTakeDeptName,callback:function(e){t.$set(t.formData,"underTakeDeptName",e)},expression:"formData.underTakeDeptName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"市场经理：",prop:"Manager"}},[a("el-input",{attrs:{disabled:""},model:{value:t.formData.Manager,callback:function(e){t.$set(t.formData,"Manager",e)},expression:"formData.Manager"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同金额：",prop:"contractAmount"}},[a("el-input",{attrs:{placeholder:"请填写合同约定的金额，以“元”为单位"},model:{value:t.formData.contractAmount,callback:function(e){t.$set(t.formData,"contractAmount",e)},expression:"formData.contractAmount"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同级别：",prop:"contractLevel"}},[a("iep-dict-select",{attrs:{"dict-name":"mlms_contract_level"},model:{value:t.formData.contractLevel,callback:function(e){t.$set(t.formData,"contractLevel",e)},expression:"formData.contractLevel"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同状态：",prop:"contractStatus"}},[a("iep-dict-select",{attrs:{"dict-name":"mlms_contract_status"},model:{value:t.formData.contractStatus,callback:function(e){t.$set(t.formData,"contractStatus",e)},expression:"formData.contractStatus"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"保证金：",prop:"deposit"}},[a("el-input",{attrs:{placeholder:"请根据缴纳保证金额填写"},model:{value:t.formData.deposit,callback:function(e){t.$set(t.formData,"deposit",e)},expression:"formData.deposit"}})],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"合同附件上传：",prop:"contractFileList"}},[a("iep-upload",{attrs:{limit:t.limit},model:{value:t.formData.contractFileList,callback:function(e){t.$set(t.formData,"contractFileList",e)},expression:"formData.contractFileList"}})],1)],1)],1),a("footer-toolbar",[a("iep-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("保存")]),a("iep-button",{on:{click:t.resetForm}},[t._v("取消")])],1),a("projectDialog",{ref:"project",attrs:{form:t.formData},on:{"project-success":t.projectSuccess}})],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("a481"),a("7f7f"),a("ade3")),i=a("6d1a"),s=a("4faa"),c=a("2f62"),l=a("7107"),d=a("a6e9"),u=a("e17e"),m=a("c855"),f=a("83b0");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={contractName:"合同签订日期（八位数字）+客户名称+项目内容名称+“合同”，如“20180306农业部政务资源目录梳理合同”",contractExpl:"1、合同说明：请详细说明签订合同时承诺客户或需要注意的地方；<br>2、收款方式：付款周期+付款方式，如三期付款+对公;<br>3、开票资料信息。",businessType:"咨询：规划/行动计划/工作方案/课题研究/标准规范/管理制度/整体解决方案/评测;<br>产品：DNA/DIPS/营商通/咨询服务产品化;<br>数据：数据采集/普查/编目/标准化/开放共享/应用服务/主题库、基础库建设/事项材料梳理/主题清单规范优化、再造;<br>外包：软件/平台/服务;<br>会议培训：研讨会/招商合作/培训会;<br>平台：平台新建/平台升级;<br>技术服务：网站/平台/软件;<br>其他：自定义填写",tagKeyWords:"1、合同标签要与合作项目/产品关联，其中合作项目简称，合作产品，客户简称等必须作为标签；<br>2、标签次序按照重要性排序；<br>3、标签数量必须3个以上。"},g={components:{FooterToolbar:s["default"],businessType:m["default"],projectDialog:f["default"]},data:function(){var t=this;return{tipContent:b,dialogShow:!1,methodName:"新增",formRequestFn:function(){},id:"",contractId:"",formData:Object(i["c"])(),rules:i["e"],backOption:{isBack:!0,backPath:null,backFunction:function(){t.$emit("dialog")}},signTime:"",finishTime:"",isTime:!0,limit:1}},props:{record:{type:Object,default:function(){}},add:{type:Object,default:function(){}}},computed:h({},Object(c["c"])(["userInfo","dictGroup"])),created:function(){var t=this;this.formRequestFn=this.add.formRequestFn,this.methodName=this.add.methodName,this.id=this.add.id,this.formData.companyOrgId=this.record.clientName,this.formData.signCompanyOrgId=this.record.clientName,this.formData.signDeptName=this.userInfo.orgName,this.formData.signDeptOrgId=this.userInfo.orgId,Object(d["g"])({clientId:this.id}).then((function(e){t.formData.directorId=e.data.data.id,Object(u["d"])(t.formData.directorId).then((function(e){t.$set(t.formData,"Manager",e.data.data.realName)}))})),"编辑"==this.methodName&&(this.contractId=this.add.contractId,Object(l["a"])(this.contractId).then((function(e){t.formData=e.data.data,t.signTime=e.data.data.signTime,t.finishTime=e.data.data.finishTime,t.formData.projectName=e.data.data.projectRelation.name,t.formData.projectId=e.data.data.projectRelation.id,Object(d["g"])({clientId:t.id}).then((function(e){t.formData.directorId=e.data.data.id,t.formData.signDeptName=t.userInfo.orgName,t.formData.signDeptOrgId=t.userInfo.orgId,Object(u["d"])(t.formData.directorId).then((function(e){t.$set(t.formData,"Manager",e.data.data.realName)}))}))})))},methods:{handleChange:function(t){var e=this;Object(d["g"])({clientId:t}).then((function(t){e.formData.directorId=t.data.data.id,e.formData.Manager=t.data.data.name}))},loadPage:function(){this.$emit("load-page")},resetForm:function(){this.formData=Object(i["c"])(),this.$emit("dialog")},submitForm:function(t){var e=this;this.formData.contractFile=this.formData.contractFileList.length>0?this.formData.contractFileList[0].url:"","新增"==this.methodName&&(this.formData.companyOrgId=this.id,this.formData.signCompanyOrgId=this.id);var a=Object.assign({},this.formData);a.underTakeDeptId=this.formData.underTakeDeptName.map((function(t){return t.id})),a.directorId=this.formData.directorId,a.id=this.contractId,a.companyOrgId=this.formData.companyOrgId,a.signCompanyOrgId=this.formData.signCompanyOrgId,this.$refs[t].validate((function(t){if(!t)return!1;e.isTime?e.formRequestFn(a).then((function(){e.$message({message:"".concat(e.methodName,"成功"),type:"success"}),e.$emit("dialog"),e.$emit("async"),e.loadPage()})):e.$message.error("签订日期大于完结日期，不能保存！！！")}))},dealTime:function(t,e){var a=t.replace(/-/g,"/"),r=Date.parse(new Date(a)),n=e.replace(/-/g,"/"),o=Date.parse(new Date(n));o<r?(this.$message.error("签订日期不能大于完结日期！！！"),this.isTime=!1):this.isTime=!0},startChange:function(t){this.signTime=t,this.dealTime(t,this.finishTime)},endChange:function(t){this.finishTime=t,this.dealTime(this.signTime,t)},relationProject:function(){this.$refs["project"].open(this.formData.projectId,this.formData.projectName)},projectSuccess:function(t,e){this.formData.projectId=t,this.$set(this.formData,"projectName",e)}}},v=g,y=(a("5f53"),a("2877")),D=Object(y["a"])(v,r,n,!1,null,"8cef3460",null);e["default"]=D.exports},6361:function(t,e,a){"use strict";a("c1c2")},"65cd":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s}));var r=[{label:"联系人职务",prop:"contactPosition"},{label:"电话",prop:"telephoneNo"}],n=function(){return{contactName:"",contactPosition:"",telephoneNo:"",fax:"",qq:"",wechat:"",email:"",cellphone:"",address:"",clientConcern:"",other:"",clientContactId:"",clientIds:[0]}},o=function(t,e,a){if(""!==e){var r=/^1[3456789]\d{9}$/;r.test(e)||a(new Error("请输入有效的手机号码"))}a()},i=function(t,e,a){if(""!==e){var r=/^(\d{3,4}-)?\d{7,8}$/;r.test(e)||a(new Error("请输入有效的传真"))}a()},s={contactName:[{required:!0,message:"联系人姓名不能为空",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],contactPosition:[{required:!0,message:"联系人职务不能为空",trigger:"blur"},{max:20,message:"不能超过20个字符",trigger:"blur"}],cellphone:[{validator:o,trigger:"blur"}],address:[{message:"请填写地址",trigger:"blur"},{max:255,message:"长度不可超过255个字符",trigger:"blur"}],fax:[{validator:i,trigger:"blur"}],qq:[{max:11,message:"昵称，电话或者qq号",trigger:"blur"}],wechat:[{max:20,message:"长度不可超过20个字符",trigger:"blur"}],email:[{message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],clientConcern:[{max:255,message:"长度不可超过255个字符",trigger:"blur"}],other:[{max:255,message:"长度不可超过255个字符",trigger:"blur"}]}},"68f8":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return l})),a.d(e,"d",(function(){return d}));var r=a("b5c6"),n="/crm/contact";function o(t){return Object(r["a"])({url:"".concat(n,"/page"),method:"get",params:t})}function i(t){return Object(r["a"])({url:"".concat(n,"/create"),method:"post",data:t})}function s(t){return Object(r["a"])({url:"".concat(n,"/update"),method:"post",data:t})}function c(t){return Object(r["a"])({url:"".concat(n,"/delete/batch/").concat(t),method:"post"})}function l(t){return Object(r["a"])({url:"".concat(n,"/").concat(t),method:"get"})}function d(t){return Object(r["a"])({url:"".concat(n,"/associate"),method:"get",params:t})}},"6d1a":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"e",(function(){return c})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return n}));var r=[{label:"合同类型",prop:"contractType",type:"dict"},{label:"合同金额 (元)",prop:"contractAmount"},{label:"合同状态",prop:"contractStatusValue"},{label:"回款率",prop:"efficiency"}],n={contractType:{0:"内部合同",1:"外部合同"}},o=function(){return{contractName:"",contractExpl:"",businessType:"",tagKeyWords:[],signTime:"",finishTime:"",companyOrgId:null,signDeptOrgName:{id:null,name:null},signCompanyOrgId:null,signDeptOrgId:{id:"",name:""},underTakeDeptName:[],underTakeDeptId:[],directorId:"",Manager:"",contractAmount:"",contractLevel:"",contractStatus:"",deposit:"",contractFileList:[],contractType:1,id:"",contractId:"",projectName:"",projectId:""}},i=function(t,e,a){if(""===e)a(new Error("金额不能为空"));else{var r=/^\d{0,8}\.{0,1}(\d{1,2})?$/,n=/^\d{0,100}\.{0,1}(\d{1,2})?$/;n.test(e)?r.test(e)||a(new Error("金额不超过9位整数")):a(new Error("金额为数字类型且小数点后最多两位"))}a()},s=function(t,e,a){var r=/^\d{0,8}\.{0,1}(\d{1,2})?$/,n=/^\d{0,100}\.{0,1}(\d{1,2})?$/;n.test(e)?r.test(e)||a(new Error("金额不超过9位整数")):a(new Error("金额为数字类型且小数点后最多两位")),a()},c={contractName:[{required:!0,message:"请输入合同名称",trigger:"blur"},{min:2,max:20,message:"长度为2-20个字符",trigger:"blur"}],contractAmount:[{required:!0,validator:i,trigger:"blur"}],contractExpl:[{max:255,message:"长度不超过255个字符",trigger:"blur"}],businessType:[{required:!0,message:"请选择业务类型",trigger:"change"}],tagKeyWords:[{required:!0,message:"请选择或输入标签",trigger:"blur"}],companyOrgId:[{required:!0,message:"请选择委托单位",trigger:"change"}],signCompanyOrgId:[{required:!0,message:"请选择签属单位",trigger:"change"}],signTime:[{required:!0,message:"请选择签订日期",trigger:"change"}],finishTime:[{required:!0,message:"请选择完结日期",trigger:"change"}],underTakeDeptName:[{required:!0,message:"请选择承接部门",trigger:"change"}],contractLevel:[{required:!0,message:"请选择合同级别",trigger:"change"}],contractStatus:[{required:!0,message:"请选择合同级别",trigger:"change"}],deposit:[{validator:s,trigger:"change"}]},l=[{label:"项目名称",prop:"projectName"},{label:"项目预算",prop:"projectBudget"},{label:"发布人",prop:"publisherName"}]},"6e31":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("iep-to-dev")],1)},n=[],o=a("502e"),i=a("b5c6"),s="crm/customer";function c(t){return Object(i["a"])({url:"".concat(s,"/create"),method:"post",data:t})}var l={mixins:[o["a"]],data:function(){return{list:[],formData:{},rules:{},methodName:"",dialogShow:!1,pagedTable:[{title:"关于客户的咨询",date:" 2019-3-28 ",msg:"其实，我们行走于世间，每个人之寻求幸福，可真寻到么？可未寻到么？人人几成定律。但是，送你一枝幸福花的精神，却不断地延续了下来，并以超乎寻常之速度，为我们人类，在幸福的道路不断前行",tags:["one","two"]}]}},methods:{handleAdd:function(){this.$refs["InfoDialog"].dialogShow=!0,this.$refs["InfoDialog"].methodName="新增",this.$refs["InfoDialog"].submitFn=c},loadPage:function(){}},created:function(){this.loadPage()}},d=l,u=(a("0fcc"),a("2877")),m=Object(u["a"])(d,r,n,!1,null,"194381f0",null);e["default"]=m.exports},7091:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iep-drawer",{attrs:{"drawer-show":t.drawerShow,type:"drawer",title:"联系人"+t.methodName,width:"40%"},on:{close:t.loadPage}},[a("el-form",{attrs:{model:t.form,"label-width":"120px",size:"small",disabled:!0}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人姓名："}},[a("el-input",{model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人职务："}},[a("el-input",{model:{value:t.form.contactPosition,callback:function(e){t.$set(t.form,"contactPosition",e)},expression:"form.contactPosition"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话："}},[a("el-input",{model:{value:t.form.telephoneNo,callback:function(e){t.$set(t.form,"telephoneNo",e)},expression:"form.telephoneNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机："}},[a("el-input",{model:{value:t.form.cellphone,callback:function(e){t.$set(t.form,"cellphone",e)},expression:"form.cellphone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"传真："}},[a("el-input",{model:{value:t.form.fax,callback:function(e){t.$set(t.form,"fax",e)},expression:"form.fax"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"QQ："}},[a("el-input",{model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"微信："}},[a("el-input",{model:{value:t.form.wechat,callback:function(e){t.$set(t.form,"wechat",e)},expression:"form.wechat"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱："}},[a("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)],1),a("el-form-item",{attrs:{label:"地址："}},[a("el-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:"客户关注："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.clientConcern,callback:function(e){t.$set(t.form,"clientConcern",e)},expression:"form.clientConcern"}})],1),a("el-form-item",{attrs:{label:"其他："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.other,callback:function(e){t.$set(t.form,"other",e)},expression:"form.other"}})],1)],1)],1)},n=[],o=a("65cd"),i={data:function(){return{drawerShow:!1,methodName:"",form:Object(o["b"])()}},methods:{loadPage:function(){this.form=Object(o["b"])(),this.drawerShow=!1,this.$emit("load-page")}}},s=i,c=a("2877"),l=Object(c["a"])(s,r,n,!1,null,null,null);e["default"]=l.exports},7107:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return d}));var r=a("b5c6"),n="/mlms/contract",o="/crm/contract";function i(t){return Object(r["a"])({url:"".concat(n,"/MyClient/page"),method:"get",params:t})}function s(t){return Object(r["a"])({url:"".concat(o,"/create"),method:"post",data:t})}function c(t){return Object(r["a"])({url:"".concat(o,"/update"),method:"post",data:t})}function l(t){return Object(r["a"])({url:"".concat(o,"/").concat(t),method:"get"})}function d(t){return Object(r["a"])({url:"".concat(o,"/delete/batch"),method:"post",data:[t]})}},"7a5d":function(t,e,a){},"83b0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iep-dialog",{attrs:{"dialog-show":t.dialogShow,title:"关联项目",width:"50%"},on:{close:t.resetForm}},[a("iep-table",{attrs:{isLoadTable:t.isLoadTable,pagination:t.pagination,columnsMap:t.columnsMap,pagedTable:t.pagedTable},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("operation-wrapper",[a("iep-button",{attrs:{size:"small",type:t.projectId==e.row.id?"warning":"",plain:""},on:{click:function(a){return t.handleSelect(e.row)}}},[t._v(t._s(t.projectId==e.row.id?"已选中":"选择"))])],1)]}}])})],1),a("template",{slot:"footer"},[a("iep-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确定")]),a("iep-button",{on:{click:t.resetForm}},[t._v("取消")])],1)],2)},n=[],o=a("502e"),i=a("6d1a"),s=a("0a22"),c={mixins:[o["a"]],data:function(){return{dialogShow:!1,pagedTable:[],columnsMap:i["d"],projectId:"",projectName:""}},methods:{resetForm:function(){this.dialogShow=!1},open:function(t,e){this.dialogShow=!0,this.projectId=t,this.projectName=e,this.loadPage()},loadPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loadTable(t,s["f"])},handleSelect:function(t){this.projectId==t.id?(this.projectId="",this.projectName=""):(this.projectId=t.id,this.projectName=t.projectName)},submitForm:function(){this.$emit("project-success",this.projectId,this.projectName),this.dialogShow=!1}}},l=c,d=a("2877"),u=Object(d["a"])(l,r,n,!1,null,null,null);e["default"]=u.exports},"885a":function(t,e,a){},"8aa3":function(t,e,a){"use strict";a("ed02")},"8c6c":function(t,e,a){"use strict";a("533f")},a6e9:function(t,e,a){"use strict";a.d(e,"f",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"i",(function(){return l})),a.d(e,"j",(function(){return d})),a.d(e,"d",(function(){return u})),a.d(e,"a",(function(){return m})),a.d(e,"b",(function(){return f})),a.d(e,"c",(function(){return p})),a.d(e,"g",(function(){return h})),a.d(e,"h",(function(){return b}));var r=a("b5c6"),n=a("4328"),o=a.n(n),i="/crm/customer";function s(t){return Object(r["a"])({url:"".concat(i,"/page"),method:"get",params:t,paramsSerializer:function(t){return o.a.stringify(t,{indices:!1})}})}function c(t){return Object(r["a"])({url:"".concat(i,"/").concat(t),method:"get"})}function l(t){return Object(r["a"])({url:"".concat(i,"/create"),method:"post",data:t})}function d(t){return Object(r["a"])({url:"".concat(i,"/update"),method:"post",data:t})}function u(t){return Object(r["a"])({url:"".concat(i,"/delete/batch"),method:"post",data:t})}function m(t){return Object(r["a"])({url:"".concat(i,"/create/collaboration"),method:"post",data:t})}function f(t){return Object(r["a"])({url:"".concat(i,"/transfer"),method:"post",data:t})}function p(t){return Object(r["a"])({url:"".concat(i,"/nameExists"),method:"get",params:t})}function h(t){return Object(r["a"])({url:"".concat(i,"/clientMarket"),method:"get",params:t})}function b(t){return Object(r["a"])({url:"".concat(i,"/myorcoll/list"),method:"get",params:t})}},a893:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info"},[a("div",{staticClass:"info-block line"},[a("h3",{staticClass:"title"},[t._v("基本信息")]),a("div",{staticClass:"base"},[a("el-row",[a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("单位网址：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.companyUrl))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("联系地址：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.contractAddress))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("业务类型：")]),t._l(t.formData.businessTypeKey,(function(e,r){return a("div",{key:r,staticClass:"value customer"},[t._v(t._s(e.commonName))])})),a("div",[t._v(t._s(t.formData.specificBusinessType))])],2),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("单位职能：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.companyFunction))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("区域类型：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.districtTypeName))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("客户类型：")]),t._l(t.formData.clientTypeKey,(function(e,r){return a("div",{key:r,staticClass:"value customer"},[t._v(t._s(e.commonName))])}))],2),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("客户关系：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.clientRelaName))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("其他说明：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.otherDesc))])])],1)],1),a("div",{staticClass:"other"},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("合作项目：")]),a("div",{staticClass:"value"},t._l(t.formData.collaborations,(function(e,r){return a("div",{key:r,staticClass:"dot"},[t._v(t._s(e.name)),a("span",[t._v("（合同金额："+t._s(e.money)+"）")])])})),0)]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("客户标签：")]),a("div",{staticClass:"value"},[a("iep-tag-detail",{model:{value:t.formData.tagsName,callback:function(e){t.$set(t.formData,"tagsName",e)},expression:"formData.tagsName"}})],1)]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("相关产品：")]),a("div",{staticClass:"value"},t._l(t.formData.products,(function(e,r){return a("div",{key:r,staticClass:"dot"},[t._v(t._s(e))])})),0)]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("相关方案：")]),a("div",{staticClass:"value"},t._l(t.formData.programs,(function(e,r){return a("div",{key:r,staticClass:"dot"},[t._v(t._s(e.commonName))])})),0)]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("相似客户：")]),a("div",{staticClass:"value"},t._l(t.formData.similarClient,(function(e,r){return a("div",{key:r,staticClass:"dot"},[t._v(t._s(e.commonName))])})),0)]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("项目合作伙伴：")]),a("div",{staticClass:"value"},t._l(t.formData.partners,(function(e,r){return a("div",{key:r,staticClass:"dot"},[t._v(t._s(e)),a("span",[t._v("（市场经理："+t._s(e.marketManager)+"）")])])})),0)]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("市场经理：")]),a("div",{staticClass:"value"},[a("div",{staticClass:"dot"},[t._v(t._s(t.formData.marketManagerName))])])]),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("协作人：")]),a("div",{staticClass:"value"},t._l(t.formData.collaborations,(function(e,r){return a("div",{key:r,staticClass:"dot"},[t._v(t._s(e.commonName))])})),0)])])]),a("div",{staticClass:"info-block"},[a("h3",{staticClass:"title"},[t._v("系统信息")]),a("div",{staticClass:"other"},[a("el-row",[a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("发布人：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.creatorName))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("负责部门：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.deptName))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("前市场经理：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.preMarketManagerName))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("前所属部门：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.preDeptName))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("创建时间：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.createTime))])]),a("el-col",{staticClass:"item",attrs:{span:12}},[a("div",{staticClass:"label"},[t._v("更新于：")]),a("div",{staticClass:"value"},[t._v(t._s(t.formData.updateTime))])])],1)],1)])])},n=[],o={name:"detail",data:function(){return{tagsName:[]}},props:{formData:{type:Object,default:function(){}}}},i=o,s=(a("f491"),a("2877")),c=Object(s["a"])(i,r,n,!1,null,"7d220d08",null);e["default"]=c.exports},aab2:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("keep-alive",[a("iep-tabs",{attrs:{"tab-list":t.tabList},scopedSlots:t._u(["visit"===t.activeTab?{key:"visit",fn:function(){return[a("visit",{directives:[{name:"loading",rawName:"v-loading",value:"visit"!==t.activeTab,expression:"activeTab !=='visit'"}],attrs:{record:t.record},on:{async:t.async}})]},proxy:!0}:null,"contact"===t.activeTab?{key:"contact",fn:function(){return[a("contact",{directives:[{name:"loading",rawName:"v-loading",value:"contact"!==t.activeTab,expression:"activeTab !=='contact'"}],attrs:{record:t.record},on:{async:t.async}})]},proxy:!0}:null],null,!0),model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}})],1)],1)},n=[],o=a("6050"),i=a("ba58"),s={name:"contract",components:{Visit:o["default"],Contact:i["default"]},data:function(){return{activeTab:"visit",tabList:[{label:"拜访日志",value:"visit"},{label:"联系记录",value:"contact"}]}},props:{record:{type:Object,default:function(){}}},created:function(){},methods:{async:function(){this.$emit("load-page")},handleClick:function(t,e){console.log(t,e)}}},c=s,l=a("2877"),d=Object(l["a"])(c,r,n,!1,null,null,null);e["default"]=d.exports},abd7:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"f",(function(){return n}));var r=[{label:"联系主题",prop:"theme"},{label:"联系时间",prop:"visitTime"},{label:"联系记录",prop:"contactRecord"}],n=[{label:"拜访主题",prop:"title",width:400},{label:"拜访时间",prop:"meetingTime"}],o=function(){return{theme:"",visitTime:"",contactRecord:"",clientId:""}},i={meetingType:{0:"管理会议",1:"市场会议",2:"项目会议",3:"产品会议",4:"培训会议",5:"日常例会",6:"拜访纪要",7:"其他"},visitType:{0:"当面拜访",1:"电话拜访",2:"聊天软件拜访",3:"其他"}},s=function(){return{type:1,meetingType:"6",title:"",meetingContent:"",meetingCon:"",thoughtsProblem:"",meetingTime:"",meetingLocation:"",tagKeyWords:[],receiverIds:[],receiver:{orgs:[],users:[],unions:[]},attendee:{orgs:[],users:[],unions:[]},hostId:"",remark:"",visitType:1,visitingAddress:"",visitingUserId:[],status:0}},c={title:[{required:!0,message:"必填",trigger:"blur"},{max:50,message:"长度不可超过50个字符",trigger:"blur"}],meetingContent:[{required:!0,message:"必填",trigger:"blur"},{max:255,message:"长度不可超过255个字符",trigger:"blur"}],meetingTime:[{required:!0,message:"必填",trigger:"blur"}]}},abfa:function(t,e,a){"use strict";a("e65e")},b489d:function(t,e,a){},b99f:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"d",(function(){return n})),a.d(e,"c",(function(){return s}));var r={type:{1:"类型1",2:"类型2"},isYes:[{value:0,lable:"否"},{value:1,label:"是"}],isOpen:[{value:0,lable:"开放"},{value:1,label:"关闭"}],secrecyLevel:[{value:0,lable:"不保密"},{value:1,label:"保密"}]},n={materialName:[{required:!0,message:"必填",trigger:"blur"}],intro:[{required:!0,message:"必填",trigger:"blur"}],content:[{required:!0,message:"必填",trigger:"blur"}],firstClass:[{required:!0,message:"必填",trigger:"change"}],secondClass:[{required:!0,message:"必填",trigger:"change"}],materialType:[{required:!0,message:"必填",trigger:"change"}],tagKeyWords:[{required:!0,message:"必填",trigger:"change"}],isContri:[{required:!0,message:"必填",trigger:"change"}],downloadCost:[{required:!0,message:"必填",trigger:"change"}],uploader:[{required:!0,message:"必填",trigger:"change"}],isOpen:[{required:!0,message:"必填",trigger:"change"}],secrecyLevel:[{required:!0,message:"必填",trigger:"change"}],attachFileList:[{required:!0,message:"必填",trigger:"change"}]},o={materialName:"1、市场项目类文件：日期+项目名称/编号+文件描述+文件阶段标识，例如20190101丽水市信息化项目建设方案编制说明v1.0；<br/>2、政策规范制度类文件：日期+发布部门/单位+文件主题+文件阶段标识，例如20190101资产管理与投融资委员会发布关于国脉贝管理v1.0；<br/>3、学习资源类材料：文件主题+类型：如浙江省政府数字化转型的几点思考；<br/>备注：名称中切记出现特殊符号",uploader:"1、材料撰写者；<br/>2、系统默认读取上传人为作者，如代替上传请修改姓名。",intro:"1、材料内容主旨说明；<br/>2、字数在200字以内",firstClass:"根据材料主题准确选择分类，确保分类的准确性！",materialType:"根据材料实际性质进行选择，如方案，报告，清单等",downloadCost:"1、全体或多数国脉人知晓的公司制度、文件、新生必读等材料均不设定下载贝额；<br/>2、线上或线下分享培训类相关材料不可设定下载贝额；<br/>3、常规材料不高于10（普遍性公共性，比如方案、研究报告模板等），特殊领域应用不高于50贝。",tagKeyWords:"1、材料标签要突出材料主题，其中提及的合作项目简称，合作产品，客户简称等必须作为标签；<br/>2、标签次序按照重要性排序；<br/>3、标签数量必须3个以上。",attachFileList:"1、附件上传形式多样，如DOC、PPT、TXT、PDF、XLS；<br/>2、材料只支持1个文件上传，大小限制在200M以内。"},i=function(){return{atchUpload:"",avatar:"",programName:"",clientId:"",creator:"",realName:"",attachs:[],attach:"",materialId:""}},s=function(){return{uploader:"",type:0,id:"",materialName:"",intro:"",content:"",firstClass:"",secondClass:"",materialType:"",tagKeyWords:[],isContri:"",attachFileList:[],attachFile:"",isOpen:0,secrecyLevel:0}},c=[{label:"创建时间",prop:"createTime"},{label:"浏览次数",prop:"views",width:"100"}]},ba58:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("operation-wrapper",[a("iep-button",{staticClass:"btn",attrs:{type:"primary",plain:""},on:{click:t.handleAdd}},[a("i",{staticClass:"el-icon-plus"}),t._v("新增")])],1),a("iep-table",{attrs:{isLoadTable:t.isLoadTable,pagination:t.pagination,columnsMap:t.columnsMap,pagedTable:t.pagedTable},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[0!==t.record.collaborations.length?a("el-table-column",{attrs:{label:"创建人",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("div",{staticClass:"line"},[a("iep-img-avatar",{attrs:{size:30,src:e.row.avatar,alt:"头像"}})],1),a("div",{staticClass:"create-name line"},[t._v("\n            "+t._s(e.row.creatorName)+"\n          ")])])]}}],null,!1,2376687261)}):t._e(),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("operation-wrapper",[a("iep-button",{attrs:{type:"warning",plain:""},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v("查看")]),a("iep-button",{attrs:{disabled:e.row.creatorId!==t.userInfo.userId},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("iep-button",{attrs:{disabled:e.row.creatorId!==t.userInfo.userId},on:{click:function(a){return t.handleDeleteById(e.row)}}},[t._v("删除")])],1)]}}])})],1),a("edit-dialog",{ref:"EditDialog",on:{"load-page":t.loadPage}})],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("502e"),s=a("cdbd"),c=a("abd7"),l=a("c348"),d=a("2f62");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={mixins:[i["a"]],props:["record"],components:{EditDialog:l["default"]},data:function(){return{columnsMap:c["a"],id:this.record.id,userId:""}},created:function(){this.loadPage()},computed:m({},Object(d["c"])(["userInfo"])),methods:{loadPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(m({},this.searchForm),{},{id:this.id});this.$emit("async"),this.loadTable(t,s["e"])},handleAdd:function(){this.$refs["EditDialog"].dialogShow=!0,this.$refs["EditDialog"].methodName="新增",this.$refs["EditDialog"].submitFn=s["a"],this.$refs["EditDialog"].id=this.id,this.$refs["EditDialog"].disabled=!1},handleEdit:function(t){this.$refs["EditDialog"].formData=m({},t),this.$refs["EditDialog"].dialogShow=!0,this.$refs["EditDialog"].methodName="编辑",this.$refs["EditDialog"].submitFn=s["h"],this.$refs["EditDialog"].isShow=!0,this.$refs["EditDialog"].disabled=!1},handleDetail:function(t){this.$refs["EditDialog"].formData=m({},t),this.$refs["EditDialog"].dialogShow=!0,this.$refs["EditDialog"].disabled=!0,this.$refs["EditDialog"].isShow=!1},handleDeleteById:function(t){var e=this;this.$confirm("此操作将同时删除原件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(t.contactId).then((function(t){t.data.data?(e.$message({type:"success",message:"删除成功!"}),e.$emit("async")):e.$message({type:"info",message:"删除失败，".concat(t.data.msg)}),e.loadPage()}))}))}}},p=f,h=(a("8aa3"),a("2877")),b=Object(h["a"])(p,r,n,!1,null,"08ac3c36",null);e["default"]=b.exports},c1c2:function(t,e,a){},c348:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iep-dialog",{attrs:{"dialog-show":t.dialogShow,title:"联系记录",width:"40%"},on:{close:t.loadPage}},[a("el-form",{ref:"formName",staticClass:"contract",attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"100px",disabled:t.disabled}},[a("el-form-item",{attrs:{label:"联系主题：",prop:"theme"}},[a("el-input",{model:{value:t.formData.theme,callback:function(e){t.$set(t.formData,"theme",e)},expression:"formData.theme"}})],1),a("el-form-item",{attrs:{label:"联系时间：",prop:"visitTime"}},[a("time-selector",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.formData.visitTime,callback:function(e){t.$set(t.formData,"visitTime",e)},expression:"formData.visitTime"}})],1),a("el-form-item",{attrs:{label:"联系记录：",prop:"contactRecord"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.formData.contactRecord,callback:function(e){t.$set(t.formData,"contactRecord",e)},expression:"formData.contactRecord"}})],1)],1),a("template",{slot:"footer"},[t.isShow?a("iep-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formName")}}},[t._v("保存")]):t._e(),a("iep-button",{on:{click:t.resetForm}},[t._v("取消")])],1)],2)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("abd7"),s=a("1932");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={components:{TimeSelector:s["default"]},data:function(){return{dialogShow:!1,submitFn:function(){},methodName:"创建",formData:{},record:{},id:"",rules:{theme:[{required:!0,message:"请输入主题",trigger:"change"},{max:20,message:"长度不可超过20个字符",trigger:"blur"}],visitTime:[{required:!0,message:"请选择时间",trigger:"change"}],contactRecord:[{required:!0,message:"请填写拜访记录",trigger:"change"},{max:255,message:"长度不可超过255个字符",trigger:"blur"}]},disabled:!1,isShow:!0}},methods:{loadPage:function(){this.formData=Object(i["c"])(),this.dialogShow=!1,this.$emit("load-page")},resetForm:function(){this.formData=Object(i["c"])(),this.dialogShow=!1},submitForm:function(t){var e=this;this.formData.clientId=this.id,this.$refs[t].validate((function(t){if(!t)return!1;e.submitFn(l({},e.formData)).then((function(){e.$message({message:"".concat(e.methodName,"成功"),type:"success"}),e.dialogShow=!1,e.$emit("load-page")}))}))}}},u=d,m=(a("260e"),a("2877")),f=Object(m["a"])(u,r,n,!1,null,null,null);e["default"]=f.exports},c855:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"type"},[a("div",{staticClass:"tags"},t._l(t.list,(function(e,r){return a("el-tag",{key:r,attrs:{type:"info",closable:""},on:{close:function(a){return t.tagClose(e,r)}}},[t._v(t._s(e.label))])})),1),a("div",{staticClass:"first"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeValue},model:{value:t.type_one,callback:function(e){t.type_one=e},expression:"type_one"}},t._l(t.dictGroup.prms_business_type,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:e}})})),1)],1),a("div",{staticClass:"second"},[a("el-select",{attrs:{placeholder:"请选择",multiple:""},on:{change:t.changeMultiple,"remove-tag":t.removeTag},model:{value:t.type_two,callback:function(e){t.type_two=e},expression:"type_two"}},t._l(t.selectList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])},n=[],o=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("7f7f"),a("6b54"),a("8e6e"),a("ac6a"),a("456d"),a("28a5"),a("ade3")),i=a("2f62");function s(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=c(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function c(t,e){if(t){if("string"===typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={props:{value:{type:String,default:""}},computed:u(u({},Object(i["c"])(["dictGroup"])),{},{selectList:function(){return""===this.type_one?[]:this.dictGroup.prms_business_type[this.type_one].children}}),data:function(){return{list:[],type_one:"",type_two:[],secondList:[]}},methods:{changeValue:function(){var t=this;this.type_two=[],this.$nextTick((function(){var e,a=[],r=s(t.selectList);try{for(r.s();!(e=r.n()).done;){var n,o=e.value,i=s(t.list);try{for(i.s();!(n=i.n()).done;){var c=n.value;if(o.value==c.value){a.push(o);break}}}catch(m){i.e(m)}finally{i.f()}}}catch(m){r.e(m)}finally{r.f()}for(var l=0,d=a;l<d.length;l++){var u=d[l];t.type_two.push(u.value)}t.secondList=a}))},getTagsList:function(t){for(var e=0;e<this.dictGroup.prms_business_type.length;e++){var a=this.dictGroup.prms_business_type[e];if(a.children&&a.children.length>0)for(var r=0;r<a.children.length;r++){var n=a.children[r];if(n.value==t)return n}}},changeMultiple:function(t){if(t.length>this.secondList.length){var e=this.getTagsList([t[t.length-1]]);this.secondList.push(e),this.list.push(e)}else for(var a in this.secondList){var r,n=this.secondList[a],o=!1,i=s(t);try{for(i.s();!(r=i.n()).done;){var c=r.value;n.value==c&&(o=!0)}}catch(d){i.e(d)}finally{i.f()}if(!o)for(var l in this.secondList.splice(a,1),this.list)if(this.list[l].value==n.value)return void this.list.splice(l,1)}},removeTag:function(){},tagClose:function(t,e){for(var a in this.list.splice(e,1),this.type_two)this.type_two[a]==t.value&&this.type_two.splice(a,1);for(var r in this.secondList)this.secondList[r].value==t.value&&this.secondList.splice(r,1)}},watch:{value:function(t){var e,a=""===t?[]:t.split(","),r=[],n=s(a);try{for(n.s();!(e=n.n()).done;){var o=e.value;r.push(this.getTagsList(o))}}catch(i){n.e(i)}finally{n.f()}this.list=r},list:{handler:function(t){var e,a=[],r=s(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;a.push(n.value)}}catch(o){r.e(o)}finally{r.f()}this.$emit("input",a.toString())},deep:!0}}},f=m,p=(a("abfa"),a("2877")),h=Object(p["a"])(f,r,n,!1,null,"6c4e2468",null);e["default"]=h.exports},cd23:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iep-drawer",{attrs:{"drawer-show":t.drawerShow,type:"drawer",title:"方案详情",width:"40%"},on:{close:t.close}},[a("el-form",{staticClass:"form-detail",attrs:{model:t.detailForm,"label-width":"120px",size:"small"}},[t.hide?a("el-form-item",{attrs:{label:"方案名称："}},[a("span",[t._v(t._s(t.detailForm.programName))])]):t._e(),t.hide?a("el-form-item",{attrs:{label:"发布者："}},[a("span",[t._v(t._s(t.detailForm.realName))])]):t._e(),t.show?a("el-form-item",{attrs:{label:"材料名称："}},[a("span",[t._v(t._s(t.detailForm.materialName))])]):t._e(),t.show?a("el-form-item",{attrs:{label:"上传者："}},[a("span",[t._v(t._s(t.detailForm.uploader))])]):t._e(),t.show?a("el-form-item",{attrs:{label:"下载次数："}},[a("span",[t._v(t._s(t.detailForm.downloadCost))])]):t._e(),t.show?a("el-form-item",{attrs:{label:"创建时间："}},[a("span",[t._v(t._s(t.detailForm.createTime))])]):t._e(),a("el-form-item",{attrs:{label:"附件名称："}},t._l(t.detailForm.attachFileList,(function(e,r){return a("span",{key:r,staticClass:"file",on:{click:t.download}},[t._v(t._s(e.name))])})),0),t.show?a("el-form-item",{attrs:{label:"材料标签："}},t._l(t.detailForm.tagKeyWords,(function(e,r){return a("a-tag",{key:r,staticClass:"tags"},[t._v(t._s(e))])})),1):t._e(),t.hide?a("el-form-item",{attrs:{label:"保存至材料库："}},[a("span",[t._v("否")])]):t._e()],1)],1)},n=[],o=(a("7f7f"),a("0857")),i={data:function(){return{hide:!1,show:!1,drawerShow:!1,detailForm:{programName:"",materialName:"",uploader:"",downloadCost:"",createTime:"",attachFileList:"",tagKeyWords:[]}}},methods:{close:function(){this.hide=!1,this.show=!1,this.drawerShow=!1},download:function(){Object(o["a"])(this.detailForm.attachFileList[0].url,this.detailForm.attachFileList[0].name)}}},s=i,c=(a("0345"),a("2877")),l=Object(c["a"])(s,r,n,!1,null,"24c33acb",null);e["default"]=l.exports},cdbd:function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"h",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"f",(function(){return d})),a.d(e,"g",(function(){return u})),a.d(e,"b",(function(){return m})),a.d(e,"i",(function(){return f})),a.d(e,"d",(function(){return p})),a.d(e,"j",(function(){return h}));var r=a("b5c6"),n="/crm/visitingRecord",o="/crm/meeting";function i(t){return Object(r["a"])({url:"".concat(n,"/page"),method:"get",params:t})}function s(t){return Object(r["a"])({url:"".concat(n,"/update"),method:"post",data:t})}function c(t){return Object(r["a"])({url:"".concat(n,"/create"),method:"post",data:t})}function l(t){return Object(r["a"])({url:"".concat(n,"/delete/batch/").concat(t),method:"post",data:t})}function d(t){return Object(r["a"])({url:"/mlms/meeting/page/visitList",method:"get",params:t})}function u(t){return Object(r["a"])({url:"".concat(o,"/page"),method:"get",params:t})}function m(t){return Object(r["a"])({url:"".concat(o,"/create"),method:"post",data:t})}function f(t){return Object(r["a"])({url:"".concat(o,"/update"),method:"post",data:t})}function p(t){return Object(r["a"])({url:"".concat(o,"/delete/batch"),method:"post",data:[t]})}function h(t){return Object(r["a"])({url:"/mlms/meeting/send/".concat(t),method:"post"})}},d050:function(t,e,a){},d6db:function(t,e,a){},d6e6e:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("operation-wrapper",[a("iep-button",{staticClass:"btn",attrs:{type:"primary",plain:""},on:{click:t.handleAdd}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 添加方案")])],1),a("iep-table",{attrs:{isLoadTable:t.isLoadTable,pagination:t.pagination,pagedTable:t.pagedTable,"cell-style":t.mixinsCellPointerStyle},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"row-click":t.handleDetail}},[a("el-table-column",{attrs:{label:"方案名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-col",[a("div",{staticClass:"program-name"},[t._v(t._s(e.row.programName)+" "),""!=e.row.atchUpload?a("span",{staticClass:"fujian",on:{click:function(e){return e.stopPropagation(),t.lookFile.apply(null,arguments)}}},[a("i",{staticClass:"icon-fujian"})]):t._e()])])]}}])}),a("el-table-column",{attrs:{label:"附件",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{class:""==e.row.atchUpload?"cyan":"download",attrs:{disabled:""==e.row.atchUpload},on:{click:function(a){return t.download(e.row)}}},[t._v("下载"),a("i",{staticClass:"icon-download1"})])]}}])}),a("el-table-column",{attrs:{label:"创建人",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:" line"},[a("iep-img-avatar",{attrs:{size:30,src:e.row.avatar,alt:"头像"}})],1),a("div",{staticClass:"create-name line"},[t._v("\n          "+t._s(e.row.realName)+"\n        ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("operation-wrapper",[e.row.status?t._e():a("iep-button",{directives:[{name:"show",rawName:"v-show",value:e.row.creatorId===t.userInfo.userId,expression:"scope.row.creatorId===userInfo.userId"}],attrs:{type:"warning",plain:""},on:{click:function(a){return t.relateEdit(e.row)}}},[t._v("保存至材料库")]),e.row.creatorId===t.userInfo.userId?a("iep-button",{attrs:{type:"warning",plain:""},on:{click:function(a){0==e.row.status?t.localEdit(e.row):t.relateEdit(e.row)}}},[t._v("编辑")]):t._e(),e.row.creatorId===t.userInfo.userId?a("iep-button",{on:{click:function(a){return t.handleDeleteById(e.row)}}},[t._v("删除")]):t._e()],1)]}}])})],1),a("el-row",{staticClass:"recommend"},[a("el-col",{staticClass:"title"},[t._v("为您推荐以下参考材料： "),0==t.recommendList.length?a("span",[t._v("无")]):t._e()]),a("div",{staticClass:"meterial"},t._l(t.recommendList,(function(e,r){return a("span",{key:r,staticClass:"item",on:{click:t.toDetail}},[t._v(t._s(e))])})),0)],1),a("add-drawer",{ref:"AddDrawer",on:{"load-page":t.loadPage,add:t.add,"on-add":t.OnAdd}}),a("detail",{ref:"detail"})],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("ade3")),i=a("502e"),s=a("3fec"),c=a("da8d"),l=a("2f62"),d=a("da67"),u=a("cd23"),m=a("0857");function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h={name:"contacts",mixins:[i["a"]],components:{AddDrawer:d["default"],Detail:u["default"]},props:{record:{type:Object,default:function(){}}},data:function(){return{formData:{},rules:{},methodName:"",dialogShow:!1,dialogVisible:!1,deleteAll:"",id:"",dicData:[{value:1,label:"选项1"},{value:2,label:"选项2"}],recommendList:[],submitFn:function(){},tags:["政务网","智慧城市"]}},computed:p({},Object(l["c"])(["userInfo"])),created:function(){var t=this;this.loadPage(),Object(s["d"])({clientId:this.record.id}).then((function(e){t.recommendList=e.data.data}))},methods:{handleDetail:function(t,e){var a=this;if("方案名称"!=e.label)return!1;0===t.status?(this.$refs["detail"].hide=!0,this.$refs["detail"].drawerShow=!0,Object(s["e"])(t.programId).then((function(e){a.$refs["detail"].detailForm.programName=t.programName,a.$refs["detail"].detailForm.realName=t.realName,a.$refs["detail"].detailForm.attachFileList=e.data.data.attachs}))):(this.$refs["detail"].show=!0,this.$refs["detail"].drawerShow=!0,Object(c["d"])(t.materialId).then((function(t){a.$refs["detail"].detailForm=t.data.data})))},OnAdd:function(){this.$refs["AddDrawer"].drawerShow=!1,this.$emit("onEdit",{newAdd:!0})},loadPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.searchForm;this.$emit("load-page"),this.loadTable(p(p({},t),{},{clientId:this.record.id}),s["f"])},handleAdd:function(){this.$refs["AddDrawer"].formData.clientId=this.record.id,this.$refs["AddDrawer"].id=this.record.id,this.$refs["AddDrawer"].drawerShow=!0,this.$refs["AddDrawer"].methodName="新增",this.$refs["AddDrawer"].submitFn=s["b"],this.$refs["AddDrawer"].tabList=[{label:"关联材料库",value:"Meterials"},{label:"方案上传",value:"upload"}],this.$refs["AddDrawer"].activeTab="Meterials"},localEdit:function(t){var e=this;Object(s["e"])(t.programId).then((function(t){e.$refs["AddDrawer"].formData=t.data.data})),this.$refs["AddDrawer"].drawerShow=!0,this.$refs["AddDrawer"].methodName="编辑",this.$refs["AddDrawer"].submitFn=s["h"],this.$refs["AddDrawer"].tabList=[{label:"方案上传",value:"upload"}],this.$refs["AddDrawer"].activeTab="upload"},relateEdit:function(t){var e=this;0!==t.materialId?Object(c["d"])(t.materialId).then((function(a){e.$emit("onEdit",{data:a.data.data,programId:t.programId,save:!1})})):this.$emit("onEdit",{data:t,programId:t.programId,save:!0})},handleDeleteById:function(t){var e=this;t.status&&t.creatorId===this.userInfo.userId?this.$confirm("此操作将同时删除原件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["b"])(t.materialId).then((function(){})),Object(s["c"])(t.programId).then((function(t){t.data.data?(e.$message({type:"success",message:"删除成功!"}),e.$emit("load-page")):e.$message({type:"info",message:"删除失败，".concat(t.data.msg)}),e.loadPage()}))})):this.$confirm("此操作将删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(t.programId).then((function(t){t.data.data?(e.$message({type:"success",message:"删除成功!"}),e.$emit("load-page")):e.$message({type:"info",message:"删除失败，".concat(t.data.msg)}),e.loadPage()}))}))},download:function(t){Object(m["a"])(t.attachs[0].url,t.attachs[0].name)},add:function(t){var e=this;this.formData.programName=t.name,this.formData.clientId=this.record.id,this.formData.materialId=t.id,this.formData.realName=t.creatorRealName,this.formData.creator=t.creator,this.formData.atchUpload=t.attachFile,Object(s["b"])(this.formData).then((function(){e.$message({message:"添加方案成功",type:"success"}),e.loadPage(),e.$emit("load-page")}))},toDetail:function(){this.$message.success("功能开发中")},lookFile:function(){this.$message.success("功能开发中")}}},b=h,g=(a("8c6c"),a("2877")),v=Object(g["a"])(b,r,n,!1,null,"14e65471",null);e["default"]=v.exports},da17:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"iep-page-form"},[a("page-header",{attrs:{title:"本地上传",backOption:t.backOption}}),a("el-form",{ref:"form",staticStyle:{"margin-bottom":"50px"},attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称："}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        名称\n        "),a("iep-tip",{attrs:{content:t.tipContent.materialName}}),t._v("\n        ：\n      ")],1),a("el-input",{attrs:{maxlength:50},model:{value:t.formData.materialName,callback:function(e){t.$set(t.formData,"materialName",e)},expression:"formData.materialName"}})],1),a("el-form-item",{attrs:{label:"作者："}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        作者\n        "),a("iep-tip",{attrs:{content:t.tipContent.uploader}}),t._v("\n        ：\n      ")],1),a("el-input",{attrs:{maxlength:40,disabled:""},model:{value:t.formData.uploader,callback:function(e){t.$set(t.formData,"uploader",e)},expression:"formData.uploader"}})],1),a("el-form-item",{attrs:{label:"介绍：",prop:"intro"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        介绍\n        "),a("iep-tip",{attrs:{content:t.tipContent.intro}}),t._v("\n        ：\n      ")],1),a("el-input",{attrs:{type:"textarea",rows:"5",maxlength:200},model:{value:t.formData.intro,callback:function(e){t.$set(t.formData,"intro",e)},expression:"formData.intro"}})],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分类：",prop:"firstClass"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n            分类\n            "),a("iep-tip",{attrs:{content:t.tipContent.firstClass}}),t._v("\n            ：\n          ")],1),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.firstClassChange},model:{value:t.formData.firstClass,callback:function(e){t.$set(t.formData,"firstClass",e)},expression:"formData.firstClass"}},t._l(t.firstClass,(function(t){return a("el-option",{key:t.id,attrs:{label:t.levelName,value:""+t.id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"",prop:"secondClass","label-width":"50px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.secondClass,callback:function(e){t.$set(t.formData,"secondClass",e)},expression:"formData.secondClass"}},t._l(t.secondClass,(function(t){return a("el-option",{key:t.id,attrs:{label:t.levelName,value:""+t.id}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"类型："}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        类型\n        "),a("iep-tip",{attrs:{content:t.tipContent.materialType}}),t._v("\n        ：\n      ")],1),a("iep-dict-select",{attrs:{"dict-name":"mlms_material_type"},model:{value:t.formData.materialType,callback:function(e){t.$set(t.formData,"materialType",e)},expression:"formData.materialType"}})],1),a("el-form-item",{attrs:{label:"下载贝额：",prop:"downloadCost"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        下载贝额\n        "),a("iep-tip",{attrs:{content:t.tipContent.downloadCost}})],1),a("iep-dict-select",{attrs:{"dict-name":"mlms_download_cost"},model:{value:t.formData.downloadCost,callback:function(e){t.$set(t.formData,"downloadCost",e)},expression:"formData.downloadCost"}})],1),a("el-form-item",{attrs:{label:"标签：",prop:"tagKeyWords"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        标签\n        "),a("iep-tip",{attrs:{content:t.tipContent.tagKeyWords}}),t._v("\n        ：\n      ")],1),a("iep-tag",{model:{value:t.formData.tagKeyWords,callback:function(e){t.$set(t.formData,"tagKeyWords",e)},expression:"formData.tagKeyWords"}})],1),a("el-form-item",{attrs:{label:"是否开放：",prop:"isOpen"}},[a("el-switch",{attrs:{"active-value":t.dictsMap.isOpen[0].value,"inactive-value":t.dictsMap.isOpen[1].value},model:{value:t.formData.isOpen,callback:function(e){t.$set(t.formData,"isOpen",e)},expression:"formData.isOpen"}})],1),a("el-form-item",{attrs:{label:"是否保密：",prop:"secrecyLevel"}},[a("el-switch",{attrs:{"active-value":t.dictsMap.secrecyLevel[1].value,"inactive-value":t.dictsMap.secrecyLevel[0].value},model:{value:t.formData.secrecyLevel,callback:function(e){t.$set(t.formData,"secrecyLevel",e)},expression:"formData.secrecyLevel"}})],1),a("el-form-item",{attrs:{prop:"attachFileList"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n        附件\n        "),a("iep-tip",{attrs:{content:t.tipContent.attachFileList}}),t._v("\n        ：\n      ")],1),a("iep-upload",{attrs:{limit:t.limit},model:{value:t.formData.attachFileList,callback:function(e){t.$set(t.formData,"attachFileList",e)},expression:"formData.attachFileList"}})],1)],1),a("footer-tool-bar",[a("iep-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("保存")]),a("iep-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("重置")])],1)],1)},n=[],o=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("7f7f"),a("6b54"),a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("b99f"),s=a("da6a"),c=a("da8d"),l=a("3fec"),d=a("2f62");function u(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=m(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function m(t,e){if(t){if("string"===typeof t)return f(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={computed:h({},Object(d["c"])(["permissions","userInfo","dictGroup"])),props:{record:{type:Object,default:function(){}},data:{type:Object,default:function(){}}},data:function(){var t=this;return{tipContent:i["f"],methodName:"新增",formRequestFn:function(){},formData:Object(i["c"])(),rules:i["d"],secondClass:[],dictsMap:i["a"],limit:1,backOption:{isBack:!0,backPath:null,backFunction:function(){t.$emit("onGoBack")}},firstClass:"",schemeData:{atchUpload:"",avatar:"",programName:"",clientId:"",creator:"",realName:"",attachs:[],attach:"",materialId:""}}},created:function(){var t=this;Object(s["c"])().then((function(e){var a=e.data;t.firstClass=a.data})),this.formData.uploader=this.userInfo.realName,this.data.newAdd||(this.data&&this.data.save?(this.formData.attachFileList=[{name:this.data.data.atchUpload}],this.formData.creatorId=this.data.data.creatorId,this.formData.materialName=this.data.data.programName,this.formData.uploader=this.data.data.realName):(this.formData=this.data.data,Object(l["e"])(this.data.programId).then((function(e){t.schemeData=e.data.data,t.formData.attachFileList=e.data.data.attachs}))))},methods:{loadPage:function(){this.$emit("load-page")},resetForm:function(t){this.$refs[t].resetFields(),this.formData=Object(i["c"])()},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.formData.attachFileList.length>0&&(e.formData.attachFile=e.formData.attachFileList[0].url),e.formData.type=0,e.data.newAdd?Object(c["a"])(e.formData).then((function(t){if(!t.data||!1!==t.data.data)return e.schemeData.materialId=t.data.data,e.schemeData.programName=e.formData.materialName,e.schemeData.creator=e.userInfo.userId,e.schemeData.clientId=e.record.id,e.schemeData.attachs=e.formData.attachFileList,e.schemeData.atchUpload=e.formData.attachFile,Object(l["b"])(e.schemeData).then((function(){e.$message.success("恭喜您成功上传了一篇材料，继续努力！")})),e.$emit("onGoBack"),!1;e.$message.error(t.data.msg)})):e.data.save?(console.log(e.formData),Object(c["a"])(e.formData).then((function(t){t.data&&!1===t.data.data?e.$message.error(t.data.msg):(console.log(t.data.data),e.schemeData.materialId=t.data.data,e.schemeData.programName=e.formData.materialName,e.schemeData.programId=e.data.programId,e.schemeData.creator=e.userInfo.userId,e.schemeData.clientId=e.record.id,e.schemeData.attachs=e.formData.attachFileList,e.schemeData.atchUpload=e.formData.attachFile,Object(l["g"])(e.schemeData).then((function(){e.$message({message:"保存至材料库成功",type:"success"})})),e.$emit("onGoBack"))}))):(e.formData.attachFile,Object(c["l"])(e.formData).then((function(){e.schemeData.programName=e.formData.materialName,e.schemeData.creator=e.userInfo.userId,e.schemeData.clientId=e.record.id,e.schemeData.attachs=e.formData.attachFileList,e.schemeData.atchUpload=e.formData.attachFile,Object(l["h"])(e.schemeData).then((function(){e.$message({message:"编辑成功",type:"success"}),e.$emit("onGoBack")}))})))}))},firstClassChange:function(t){var e,a=u(this.firstClass);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.id==t)return this.secondClass=r.childrens,void(this.formData.secondClass="")}}catch(n){a.e(n)}finally{a.f()}}}},g=b,v=a("2877"),y=Object(v["a"])(g,r,n,!1,null,null,null);e["default"]=y.exports},da67:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iep-drawer",{attrs:{"drawer-show":t.drawerShow,type:"drawer",title:t.methodName+"方案",width:"40%"},on:{close:t.close}},[a("iep-tabs",{attrs:{"tab-list":t.tabList},scopedSlots:t._u(["Meterials"===t.activeTab?{key:"Meterials",fn:function(){return[a("div",{staticClass:"header"},[a("iep-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.handleAdd}},[a("i",{staticClass:"el-icon-plus"}),t._v("新增方案")]),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入内容",maxlength:100,size:"small"},model:{value:t.materialName,callback:function(e){t.materialName=e},expression:"materialName"}},[a("template",{slot:"append"},[a("el-button",{attrs:{size:"mini"},on:{click:t.search}},[t._v("搜索")])],1)],2)],1),a("iep-table",{attrs:{isLoadTable:t.isLoadTable,pagination:t.pagination,columnsMap:t.columnsMap,pagedTable:t.pagedTable},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("template",{slot:"before-columns"},[a("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"custom-name"},[t._v(t._s(e.row.name))]),a("el-col",{staticClass:"custom-tags"},t._l(e.row.code,(function(e,r){return a("el-tag",{key:r,attrs:{type:"info",size:"mini"}},[t._v(t._s(e))])})),1)]}}],null,!1,3636840394)})],1),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("operation-wrapper",[a("iep-button",{attrs:{type:"warning",plain:""},on:{click:function(a){return t.select(e.row)}}},[t._v("添加")])],1)]}}],null,!1,1844742797)})],2)]},proxy:!0}:null,"upload"===t.activeTab?{key:"upload",fn:function(){return[a("el-form",{ref:"formName",attrs:{model:t.formData,rules:t.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"方案名称：",prop:"programName"}},[a("el-input",{model:{value:t.formData.programName,callback:function(e){t.$set(t.formData,"programName",e)},expression:"formData.programName"}})],1),a("el-form-item",{attrs:{label:"附件上传：",prop:"attach"}},[a("iep-upload",{attrs:{limit:1},model:{value:t.formData.attachs,callback:function(e){t.$set(t.formData,"attachs",e)},expression:"formData.attachs"}},[a("span",[t._v("可上传任意类型的文件，每次上传数量不超过一个")])]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"msg",model:{value:t.formData.attach,callback:function(e){t.$set(t.formData,"attach",e)},expression:"formData.attach"}})],1)],1)]},proxy:!0}:null],null,!0),model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}}),"upload"===t.activeTab?a("template",{slot:"footer"},[a("iep-button",{staticClass:"btn",on:{click:t.close}},[t._v("取消")]),a("iep-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formName")}}},[t._v("提交")])],1):t._e()],2)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("b99f"),s=a("3fec"),c=a("502e"),l=a("2f62"),d=a("da8d");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={mixins:[c["a"]],data:function(){var t=this,e=function(e,a,r){""==a?r(new Error("方案名称不能为空")):Object(s["a"])({name:a,id:t.id}).then((function(t){if(t.data.data)return r(),!1;r(new Error("您输入的方案名称已存在，请重新输入！"))}))},a=function(t,e,a){if(""!=e)return a(),!1;a(new Error("请选择上传的文件"))};return{id:"",showMterial:!0,drawerShow:!1,submitFn:function(){},columnsMap:i["e"],methodName:"",formData:Object(i["b"])(),tabList:"",activeTab:"",materialName:"",demo:"",rules:{programName:[{required:!0,validator:e,trigger:"blur"}],attach:[{required:!0,validator:a,trigger:"blur"}]}}},computed:m({},Object(l["c"])(["userInfo"])),created:function(){this.formData.avatar=this.userInfo.avatar,this.formData.realName=this.userInfo.realName,this.loadPage()},methods:{handleAdd:function(){this.$emit("on-add")},close:function(){this.formData=Object(i["b"])(),this.drawerShow=!1},submitForm:function(t){var e=this;if(0===this.formData.attachs.length)return!1;this.$set(this.formData,"attach","已上传文件"),this.formData.atchUpload=this.formData.attachs[0].url,this.$refs[t].validate((function(t){if(!t)return!1;e.submitFn(e.formData).then((function(){e.$message({message:"".concat(e.methodName,"成功"),type:"success"}),e.$emit("load-page"),e.formData=Object(i["b"])(),e.drawerShow=!1}))}))},loadPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.searchForm;this.loadTable(t,d["h"])},select:function(t){var e=this;this.$confirm("此操作将关联该材料至方案, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])({name:t.materialName,id:e.formData.clientId}).then((function(a){console.log(a.data.data),a.data.data?(e.$emit("add",t),e.drawerShow=!1):e.$message.error("改则材料已经存在，无法添加！")}))}))},search:function(){this.loadTable({name:this.materialName},d["h"])}}},p=f,h=(a("6361"),a("2877")),b=Object(h["a"])(p,r,n,!1,null,"61c1bca0",null);e["default"]=b.exports},da6a:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"e",(function(){return l})),a.d(e,"b",(function(){return d}));var r=a("53ca"),n=a("b5c6"),o="/mlms/materiallevel";function i(t){return Object(n["a"])({url:"".concat(o,"/page"),method:"get",params:t})}function s(){return Object(n["a"])({url:"".concat(o,"/tree"),method:"get"})}function c(t){return Object(n["a"])({url:"".concat(o,"/create"),method:"post",data:t})}function l(t){return Object(n["a"])({url:"".concat(o,"/update"),method:"post",data:t})}function d(t){var e="object"===Object(r["a"])(t)?t:[t];return Object(n["a"])({url:"".concat(o,"/delete/batch"),method:"post",data:e})}},da8d:function(t,e,a){"use strict";a.d(e,"h",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"i",(function(){return c})),a.d(e,"a",(function(){return l})),a.d(e,"l",(function(){return d})),a.d(e,"b",(function(){return u})),a.d(e,"d",(function(){return m})),a.d(e,"c",(function(){return f})),a.d(e,"e",(function(){return p})),a.d(e,"g",(function(){return h})),a.d(e,"j",(function(){return b})),a.d(e,"k",(function(){return g}));var r=a("53ca"),n=a("b5c6"),o="/mlms/material";function i(t){return Object(n["a"])({url:"".concat(o,"/page"),method:"get",params:t})}function s(t){return Object(n["a"])({url:"".concat(o,"/page"),method:"get",params:t})}function c(t){return Object(n["a"])({url:"".concat(o,"/page/personal"),method:"get",params:t})}function l(t){return Object(n["a"])({url:"".concat(o,"/create"),method:"post",data:t})}function d(t){return Object(n["a"])({url:"".concat(o,"/update"),method:"post",data:t})}function u(t){var e="object"===Object(r["a"])(t)?t:[t];return Object(n["a"])({url:"".concat(o,"/delete/batch"),method:"post",data:e})}function m(t){return Object(n["a"])({url:"".concat(o,"/").concat(t),method:"get"})}function f(t){return Object(n["a"])({url:"".concat(o,"/getUpload/").concat(t),method:"get"})}function p(t){return Object(n["a"])({url:"".concat(o,"/excellent/list/").concat(t),method:"get"})}function h(t){return Object(n["a"])({url:"".concat(o,"/total/").concat(t),method:"get"})}function b(){return Object(n["a"])({url:"".concat(o,"/get/union"),method:"post"})}function g(t){return Object(n["a"])({url:"".concat(o,"/get/new/version"),method:"post",data:t})}},de5c:function(t,e,a){"use strict";a("569e")},deba:function(t,e,a){"use strict";a("7a5d")},e65e:function(t,e,a){},ed02:function(t,e,a){},ee0d:function(t,e,a){"use strict";a("d050")},ee33:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["list"==t.pageState?a("div",{staticClass:"scheme"},[a("operation-wrapper",[a("iep-button",{attrs:{type:"primary",plain:""},on:{click:t.handleAdd}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增")])],1),a("iep-table",{attrs:{isLoadTable:t.isLoadTable,pagination:t.pagination,columnsMap:t.columnsMap,"cell-style":t.mixinsCellPointerStyle,pagedTable:t.pagedTable,dictsMap:t.dictsMap},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"row-click":t.handleDetail}},[a("template",{slot:"before-columns"},[a("el-table-column",{attrs:{label:"合同名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"custom-name"},[t._v(t._s(e.row.contractName))]),a("el-col",{staticClass:"custom-tags"},t._l(e.row.tags,(function(e,r){return a("Tag",{key:r},[t._v(t._s(e))])})),1)]}}],null,!1,3437162588)})],1),0!==t.record.collaborations.length?a("el-table-column",{attrs:{label:"创建人",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("div",{staticClass:"line"},[a("iep-img-avatar",{attrs:{size:30,src:e.row.avatar,alt:"头像"}})],1),a("div",{staticClass:"create-name line"},[t._v("\n              "+t._s(e.row.realName)+"\n            ")])])]}}],null,!1,1945476635)}):t._e(),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("operation-wrapper",[a("iep-button",{attrs:{plain:"",size:"small",type:"warning",disabled:e.row.userId!==t.userInfo.userId},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("iep-button",{attrs:{size:"small",disabled:e.row.userId!==t.userInfo.userId},on:{click:function(a){return t.handleDeleteById(e.row)}}},[t._v("删除")])],1)]}}],null,!1,1525170029)})],2)],1):t._e(),"dialog"==t.pageState?a("edit",{ref:"EditDialog",attrs:{record:t.record,add:t.add},on:{"load-page":t.loadPage,dialog:t.isShow,async:t.async}}):t._e(),"detail"==t.pageState?a("detail",{ref:"DetailDialog",attrs:{add:t.add},on:{detail:t.isShow}}):t._e()],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("502e"),s=a("6d1a"),c=a("7107"),l=a("60e7"),d=a("24ce"),u=a("2f62");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"contract",components:{Edit:l["default"],Detail:d["default"]},mixins:[i["a"]],data:function(){return{dictsMap:s["b"],columnsMap:s["a"],formData:{},pageState:"list",id:this.record.id,add:{}}},props:{record:{type:Object,default:function(){}}},created:function(){this.loadPage()},computed:f({},Object(u["c"])(["userInfo"])),methods:{async:function(){this.$emit("load-page")},loadPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(f({},this.searchForm),{},{id:this.id});this.pageState="list",this.loadTable(t,c["c"])},handleAdd:function(){this.add={formRequestFn:c["d"],methodName:"新增",id:this.id},this.pageState="dialog"},handleEdit:function(t){this.add={formRequestFn:c["e"],methodName:"编辑",id:this.id,contractId:t.contractId},this.pageState="dialog"},handleDetail:function(t,e){if("操作"==e.label||"selection"==e.type||"index"==e.type)return!1;this.add={formRequestFn:c["e"],methodName:"详情",id:this.id,contractId:t.contractId},this.pageState="detail"},isShow:function(){this.pageState="list"},handleDeleteById:function(t){var e=this;this.$confirm("此操作将同时删除原件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["b"])(t.contractId).then((function(t){t.data.data?(e.$message({type:"success",message:"删除成功!"}),e.$emit("load-page")):e.$message({type:"info",message:"删除失败，".concat(t.data.msg)}),e.loadPage()}))}))}}},h=p,b=(a("3dea"),a("2877")),g=Object(b["a"])(h,r,n,!1,null,"b8e54664",null);e["default"]=g.exports},f491:function(t,e,a){"use strict";a("183f")},fd55:function(t,e,a){}}]);