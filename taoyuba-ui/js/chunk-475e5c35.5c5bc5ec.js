(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-475e5c35"],{"0aae":function(e,t,a){"use strict";a("f6d4")},"230b":function(e,t,a){"use strict";a("e880")},"2f9e":function(e,t,a){"use strict";a.d(t,"a",function(){return n});a("ac6a"),a("28a5"),a("a481");var r=a("b5c6");function n(e){var t=e.url,a=e.method,n=void 0===a?"post":a,i=e.data,c=void 0===i?{}:i,s=e.title,l=void 0===s?"":s;return new Promise(function(e){return Object(r["a"])({url:t,method:n,headers:{responseType:"arraybuffer"},data:c,responseType:"blob"}).then(function(t){o({title:l,response:t}).then(function(){e()})})})}function o(e){var t=e.title,a=void 0===t?"":t,r=e.response,n=i(r.headers["content-disposition"].replace(/"/g,""));return new Promise(function(e){var t=r.headers,o=new Blob([r.data],{type:t["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,a);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(o),i.download=a?"".concat(a,".").concat(n.suffix):n.filename,document.body.appendChild(i),i.style.display="none",i.click()}e()})}function i(e){var t={},a=e.split(";");return a.forEach(function(e){var a=e.replace(/^\s+|\s+$/g,""),r=a.split("=");r[1]?t[r[0]]=r[1]:t[r[0]]=r[0]}),t.suffix=t.filename.split(".")[1],t}},3522:function(e,t,a){},4917:function(e,t,a){"use strict";var r=a("cb7c"),n=a("9def"),o=a("0390"),i=a("5f1b");a("214f")("match",1,function(e,t,a,c){return[function(a){var r=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=c(a,e,this);if(t.done)return t.value;var s=r(e),l=String(this);if(!s.global)return i(s,l);var u=s.unicode;s.lastIndex=0;var d,m=[],p=0;while(null!==(d=i(s,l))){var f=String(d[0]);m[p]=f,""===f&&(s.lastIndex=o(l,n(s.lastIndex),u)),p++}return 0===p?null:m}]})},"498d":function(e,t,a){"use strict";a("8afb")},5612:function(e,t,a){"use strict";a.d(t,"i",function(){return i}),a.d(t,"j",function(){return c}),a.d(t,"l",function(){return s}),a.d(t,"m",function(){return l}),a.d(t,"r",function(){return u}),a.d(t,"c",function(){return d}),a.d(t,"t",function(){return m}),a.d(t,"u",function(){return p}),a.d(t,"d",function(){return f}),a.d(t,"e",function(){return h}),a.d(t,"g",function(){return b}),a.d(t,"v",function(){return g}),a.d(t,"f",function(){return v}),a.d(t,"z",function(){return y}),a.d(t,"k",function(){return w}),a.d(t,"n",function(){return O}),a.d(t,"h",function(){return x}),a.d(t,"p",function(){return j}),a.d(t,"x",function(){return $}),a.d(t,"y",function(){return k}),a.d(t,"w",function(){return I}),a.d(t,"b",function(){return _}),a.d(t,"q",function(){return N}),a.d(t,"a",function(){return C}),a.d(t,"s",function(){return S}),a.d(t,"o",function(){return q});var r=a("b5c6"),n=a("2f9e"),o="/tmlms/crew";function i(e){return Object(r["a"])({url:"".concat(o,"/Page"),method:"get",params:e})}function c(e){return Object(r["a"])({url:"".concat(o,"/findByShipId?shipId=").concat(e),method:"get",params:e})}function s(e){return Object(r["a"])({url:"".concat(o,"/getHistoryByShipId?shipId=").concat(e.shipId),method:"get",params:e})}function l(e){return Object(r["a"])({url:"".concat(o,"/pageWithShip"),method:"get",params:e})}function u(e){return Object(r["a"])({url:"".concat(o,"/shipLogPage"),method:"get",params:e})}function d(e){return Object(r["a"])({url:"".concat(o,"/checkMoreRelations"),method:"post",data:e})}function m(e,t){return Object(r["a"])({url:"".concat(o,"/create?type=").concat(t),method:"post",data:e})}function p(e,t){return Object(r["a"])({url:"".concat(o,"/batchCreate?type=").concat(t),method:"post",data:e,timeout:3e5})}function f(e){return Object(r["a"])({url:"".concat(o,"/delete?idcard=").concat(e),method:"post"})}function h(e,t){return Object(r["a"])({url:"".concat(o,"/deleteRelation?idcard=").concat(e,"&&shipId=").concat(t),method:"post"})}function b(e,t){return Object(r["a"])({url:"".concat(o,"/edit?type=").concat(t),method:"post",data:e})}function g(e,t){return Object(r["a"])({url:"".concat(o,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}function v(e){return Object(r["a"])({url:"".concat(o,"/getCrewByidcard?idcard=").concat(e),method:"get"})}function y(e){return Object(r["a"])({url:"admin/file/upload/avatar",method:"post",data:e})}function w(e){return Object(r["a"])({url:"".concat(o,"/idcardcheck?idcard=").concat(e),method:"get"})}function O(e){return Object(r["a"])({url:"".concat(o,"/idcardcheck?idcard=").concat(e),method:"get"})}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"船员信息";return Object(n["a"])({url:"tmlms/tybmlmsExcelExport/downloadCrew",data:e,title:t})}function j(e){return Object(r["a"])({url:"".concat(o,"/badPage"),method:"get",params:e})}function $(e){return Object(r["a"])({url:"".concat(o,"/badUpdateBatch"),method:"post",data:e})}function k(e){return Object(r["a"])({url:"".concat(o,"/uploadBaseImage"),method:"post",data:e})}function I(e){return Object(r["a"])({url:"".concat(o,"/updateCertByIdcard"),method:"post",params:e})}function _(e){return Object(r["a"])({url:"".concat(o,"/changeShip"),method:"post",data:e})}function N(e){return Object(r["a"])({url:"".concat(o,"/getShipRelationByIdcard"),method:"get",params:e})}function C(e){return Object(r["a"])({url:"/tmlms/tybship/pageForChange",method:"get",params:e})}function S(e){return Object(r["a"])({url:"/tmlms/importTask/lookTask",method:"get",params:{taksId:e}})}function q(e){return Object(r["a"])({url:"/tmlms/crew_cert/newPage",method:"get",params:e})}},6939:function(e,t,a){"use strict";a.d(t,"d",function(){return o}),a.d(t,"e",function(){return i}),a.d(t,"a",function(){return c}),a.d(t,"b",function(){return s}),a.d(t,"c",function(){return l}),a.d(t,"f",function(){return u});var r=a("b5c6"),n="/tmlms/agent";function o(e){return Object(r["a"])({url:"".concat(n,"/getPage"),method:"get",params:e})}function i(e,t){return Object(r["a"])({url:"".concat(n,"/create?type=").concat(t),method:"post",data:e})}function c(e){return Object(r["a"])({url:"".concat(n,"/remove?userId=").concat(e),method:"post"})}function s(e){return Object(r["a"])({url:"".concat(n,"/detail?userId=").concat(e),method:"get"})}function l(e,t){return Object(r["a"])({url:"".concat(n,"/edit?type=").concat(t),method:"post",data:e})}function u(e,t){return Object(r["a"])({url:"".concat(n,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}},"6c21":function(e,t,a){"use strict";a.d(t,"g",function(){return i}),a.d(t,"j",function(){return c}),a.d(t,"a",function(){return s}),a.d(t,"h",function(){return l}),a.d(t,"d",function(){return u}),a.d(t,"b",function(){return d}),a.d(t,"e",function(){return m}),a.d(t,"k",function(){return p}),a.d(t,"l",function(){return f}),a.d(t,"f",function(){return h}),a.d(t,"i",function(){return b}),a.d(t,"c",function(){return g});var r=a("b5c6"),n=a("2f9e"),o="/tmlms/ship_owner";function i(e){return Object(r["a"])({url:"".concat(o,"/page"),method:"get",params:e})}function c(e,t){return Object(r["a"])({url:"".concat(o,"/create?type=").concat(t),method:"post",data:e})}function s(e){return Object(r["a"])({url:"".concat(o,"/delete?idcard=").concat(e),method:"post"})}function l(e){return Object(r["a"])({url:"".concat(o,"/getDetail?idcard=").concat(e),method:"get"})}function u(e){return Object(r["a"])({url:"admin/region/wholeInfoList?areaCode=".concat(e),method:"get"})}function d(e,t){return Object(r["a"])({url:"".concat(o,"/edit?type=").concat(t),method:"post",data:e})}function m(e){return Object(r["a"])({url:"admin/region/wholeInfo?areaCode=".concat(e),method:"get"})}function p(e,t){return Object(r["a"])({url:"".concat(o,"/newReview?status=").concat(e,"&idcard=").concat(t),method:"post"})}function f(e){return Object(r["a"])({url:"admin/file/upload/avatar",method:"post",data:e})}function h(e){return Object(r["a"])({url:"".concat(o,"/idcardcheck"),method:"get",params:{idcard:e}})}function b(e,t){return Object(r["a"])({url:"".concat(o,"/newedit?type=").concat(t),method:"post",data:e})}function g(e){return Object(n["a"])({url:"tmlms/tybmlmsExcelExport/downloadOwner",data:e,title:"船东信息"})}},"6c9b":function(e,t,a){},7387:function(e,t,a){"use strict";a("3522")},"7b96":function(e,t,a){"use strict";a("6c9b")},"84aa8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bvillage_detail"},[a("basic-container",[a("h1",[e._v("完善基层信息")]),a("el-form",{ref:"form",attrs:{model:e.bvillage,"label-width":"150px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"基层名称:",prop:"villageName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.bvillage.villageName,callback:function(t){e.$set(e.bvillage,"villageName",t)},expression:"bvillage.villageName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人:",prop:"contactName"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.bvillage.contactName,callback:function(t){e.$set(e.bvillage,"contactName",t)},expression:"bvillage.contactName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.bvillage.phone,callback:function(t){e.$set(e.bvillage,"phone",t)},expression:"bvillage.phone"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"基层组织类型:",prop:"type"}},[a("el-radio-group",{model:{value:e.bvillage.type,callback:function(t){e.$set(e.bvillage,"type",t)},expression:"bvillage.type"}},[a("el-radio",{attrs:{label:1}},[e._v("公司")]),a("el-radio",{attrs:{label:2}},[e._v("服务站")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"amap-page-container",attrs:{label:"基层地址:",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.bvillage.address,callback:function(t){e.$set(e.bvillage,"address",t)},expression:"bvillage.address"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"介绍:",prop:"content"}},[a("el-input",{attrs:{type:"textarea",placeholder:""},model:{value:e.bvillage.content,callback:function(t){e.$set(e.bvillage,"content",t)},expression:"bvillage.content"}})],1)],1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:e.save}},[e._v("提交")])],1)],1)],1)},n=[],o=(a("96cf"),a("1da1")),i=(a("4917"),a("daa6")),c=a("7ded"),s=a("e420"),l={mixins:[s["a"]],data:function(){var e=function(e,t,a){""===t?a(new Error("请输入联系电话")):t.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)?a():a(new Error("请输入正确的手机号码!"))};return{bvillage:{address:"",phone:"",contactName:"",content:"",villageId:"",villageName:"",type:1},rules:{villageName:[{required:!0,message:"请输入基层组织名称",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{getData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["c"])().then(function(e){return e.data.data.sysUser.userId});case 2:this.uid=e.sent,Object(i["b"])(this.uid).then(function(e){t.bvillage=e.data.data});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;var a=2;Object(i["c"])(e.bvillage,a).then(function(){e.$message.success("提交成功！"),e.$router.go(-1)}).catch(function(){e.$message.success("提交失败！")})})}},computed:{},created:function(){this.getData()}},u=l,d=(a("7b96"),a("2877")),m=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=m.exports},"8afb":function(e,t,a){},a616:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"contract-box",staticStyle:{padding:"20px"}},[e.roles!==[2]?a("div",[a("h1",[e._v("编辑信息")]),a("el-tabs",{attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"个人信息"}},[a("v-info")],1),a("el-tab-pane",{attrs:{label:"修改密码"}},[a("v-code")],1),-1!==e.roles.indexOf(105)?a("el-tab-pane",{attrs:{label:"船员"}},[a("v-boat")],1):e._e(),-1!==e.roles.indexOf(108)?a("el-tab-pane",{attrs:{label:"船东"}},[a("v-shipowner")],1):e._e(),-1!==e.roles.indexOf(109)?a("el-tab-pane",{attrs:{label:"中介"}},[a("v-agent")],1):e._e(),-1!==e.roles.indexOf(112)?a("el-tab-pane",{attrs:{label:"基层"}},[a("v-bvillage")],1):e._e()],1)],1):a("h1",{staticStyle:{"margin-top":"20px","text-align":"center"}},[e._v("您还未加入任何角色")])]):e._e()},n=[],o=a("b36b"),i=a("ebe1"),c=a("b987"),s=a("daad"),l=a("84aa8"),u=a("e97b"),d=a("7ded"),m={data:function(){return{roles:[],show:!1}},methods:{},computed:{},created:function(){var e=this;Object(d["c"])().then(function(t){e.roles=t.data.data.roles,e.show=!0})},components:{vInfo:o["default"],vShipowner:c["default"],vAgent:s["default"],vBvillage:l["default"],vBoat:u["default"],vCode:i["default"]},filters:{}},p=m,f=(a("0aae"),a("2877")),h=Object(f["a"])(p,r,n,!1,null,"4c4882e5",null);t["default"]=h.exports},ae53:function(e,t,a){},b36b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"iep-page-form"},[a("basic-container",[a("page-header",{attrs:{title:"编辑个人信息",backOption:e.backOption}}),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名：",prop:"realName"}},[a("el-input",{model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号：",prop:"phone"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证：",prop:"idCard"}},[a("el-input",{attrs:{disabled:e.isIdCard},model:{value:e.form.idCard,callback:function(t){e.$set(e.form,"idCard",t)},expression:"form.idCard"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"头像：",prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccess,headers:e.headers,accept:"image/*"}},[e.form.avatar?a("img",{staticClass:"avatar",attrs:{src:e.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("el-form-item",{attrs:{label:""}},[a("operation-wrapper",[a("iep-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)],1)],1)},n=[],o=(a("96cf"),a("1da1")),i=(a("4917"),a("be94")),c=a("7ded"),s=a("e17e"),l=a("4360"),u=a("2f62"),d={data:function(){var e=this;return{form:{realName:"",avatar:"",idCard:"",phone:""},backOption:{isBack:!0,backPath:null,backFunction:function(){e.onGoBack()}},headers:{Authorization:"Bearer "+l["a"].getters.access_token},isIdCard:!1}},computed:Object(i["a"])({},Object(u["c"])(["userInfo"])),created:function(){var e=this;Object(c["c"])().then(function(t){e.form.userId=t.data.data.sysUser.userId,e.form.realName=t.data.data.sysUser.realName,e.form.phone=t.data.data.sysUser.phone,e.form.idCard=t.data.data.sysUser.idCard,e.form.idCard&&""!==e.form.idCard&&(e.isIdCard=!0),e.form.avatar=t.data.data.sysUser.avatar})},mounted:function(){},methods:{onGoBack:function(){this.$router.push({path:"/"})},handleAvatarSuccess:function(e){this.form.avatar=e.data.url},card:function(e){return console.log(e.match(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/)),!(!e||!e.match(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/))},handleSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.form.realName||(this.form.realName=this.userInfo.realName),this.form.avatar||(this.form.avatar=this.userInfo.avatar),e.next=4,this.card(this.form.idCard);case 4:t=e.sent,!0===t?Object(s["j"])(this.form).then(function(){a.$message.success("修改成功!"),a.$router.push({path:"/"})}).catch(function(e){a.$message({message:e,type:"error"})}):this.$message.error("请输入正确的身份证号码!");case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},m=d,p=(a("ff0b"),a("2877")),f=Object(p["a"])(m,r,n,!1,null,null,null);t["default"]=f.exports},b987:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contract-box"},[a("basic-container",[a("h1",[e._v("船东信息")]),a("el-form",{ref:"form",attrs:{model:e.shipowner,"label-width":"150px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"姓名:",prop:"realName"}},[e.$route.query.see?a("div",[e._v(e._s(e.shipowner.realName))]):a("el-input",{attrs:{placeholder:"",disabled:e.isManger},model:{value:e.shipowner.realName,callback:function(t){e.$set(e.shipowner,"realName",t)},expression:"shipowner.realName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"身份证号:",prop:"idcard"}},[e.$route.query.see?a("div",[e._v(e._s(e.shipowner.idcard))]):a("el-input",{attrs:{placeholder:"",disabled:e.isManger},model:{value:e.shipowner.idcard,callback:function(t){e.$set(e.shipowner,"idcard",t)},expression:"shipowner.idcard"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[e.$route.query.see?a("div",[e._v(e._s(e.shipowner.address))]):a("el-input",{attrs:{placeholder:""},model:{value:e.shipowner.address,callback:function(t){e.$set(e.shipowner,"address",t)},expression:"shipowner.address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[e.$route.query.see?a("div",[e._v(e._s(e.shipowner.phone))]):a("el-input",{attrs:{placeholder:"",disabled:e.isManger},model:{value:e.shipowner.phone,callback:function(t){e.$set(e.shipowner,"phone",t)},expression:"shipowner.phone"}})],1)],1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[e.$route.query.see?e._e():a("el-button",{on:{click:e.save}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.$router.push({name:"Shipowner"})}}},[e._v("返回")])],1)],1)],1)},n=[],o=(a("6762"),a("2fdb"),a("96cf"),a("1da1")),i=(a("4917"),a("6c21")),c=a("7ded"),s={data:function(){var e=function(e,t,a){""===t?a(new Error("请输入身份证号")):t.match(/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/)?a():a(new Error("请输入正确的身份证号码!"))},t=function(e,t,a){""===t?a(new Error("请输入联系电话")):t.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)?a():a(new Error("请输入正确的手机号码!"))};return{shipowner:{address:"",idcard:"",realName:""},rules:{realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],idcard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{validator:e,trigger:"blur"}],address:[{required:!0,message:"请输入联系地址",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:t,trigger:"blur"}]},manager:!1,isManger:!1,byCard:""}},methods:{save:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.shipowner.idcardPhoto.length>200)){e.next=3;break}return e.next=3,this.getIdcardFile();case 3:this.$refs["form"].validate(function(e){if(!e)return!1;var a="";a=t.manager?1:2,Object(i["i"])(t.shipowner,a).then(function(e){t.$message({message:e.data.msg,type:"success"}),t.$router.go(-1)}).catch(function(e){t.$message.error(e.message)})});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},computed:{},created:function(){var e=this;function t(){return a.apply(this,arguments)}function a(){return a=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["c"])().then(function(e){return e.data.data.sysUser.idCard});case 2:this.byCard=e.sent,Object(i["h"])(this.byCard).then(function(e){t.shipowner=e.data.data});case 4:case"end":return e.stop()}},e,this)})),a.apply(this,arguments)}t.call(this),Object(c["c"])().then(function(t){t.data.data.roles.includes(111)?e.manager=!0:e.manager=!1,-1!==t.data.data.roles.indexOf(111)?e.isManger=!1:-1!==t.data.data.roles.indexOf(112)?e.isManger=!1:e.isManger=!0,t.data.data.sysUser.userId})},mounted:function(){}},l=s,u=(a("230b"),a("2877")),d=Object(u["a"])(l,r,n,!1,null,"76f9a61b",null);t["default"]=d.exports},c533b:function(e,t,a){"use strict";a.d(t,"i",function(){return c}),a.d(t,"f",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"g",function(){return u}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"e",function(){return p}),a.d(t,"j",function(){return f}),a.d(t,"h",function(){return h}),a.d(t,"b",function(){return b});var r=a("b5c6"),n="tmlms/crew",o="admin/region",i="admin/dict";function c(e){return Object(r["a"])({url:"".concat(o,"/getinfo/")+e,method:"get"})}function s(e){return Object(r["a"])({url:"".concat(i,"/type/")+e,method:"get"})}function l(e){return Object(r["a"])({url:"".concat(o,"/area"),method:"get",params:{parentCode:e}})}function u(e){return Object(r["a"])({url:"".concat(n,"/Page"),method:"get",params:e})}function d(e){return Object(r["a"])({url:"".concat(n,"/delete"),method:"post",params:{userId:e}})}function m(e){return Object(r["a"])({url:"".concat(n,"/create"),method:"post",data:e,params:{type:1}})}function p(e){return Object(r["a"])({url:"".concat(n,"/getCrewByUserId"),method:"get",params:{userId:e}})}function f(e){return Object(r["a"])({url:"".concat(n,"/edit"),method:"post",params:{type:1},data:e})}function h(e){return Object(r["a"])({url:"/tybship/tybregion/parent/".concat(e),method:"get"})}function b(e,t,a){return Object(r["a"])({url:"".concat(n,"/upWork?idcard=").concat(t,"&workStatus=").concat(a),method:"post",data:e})}},daa6:function(e,t,a){"use strict";a.d(t,"f",function(){return o}),a.d(t,"g",function(){return i}),a.d(t,"i",function(){return c}),a.d(t,"a",function(){return s}),a.d(t,"c",function(){return l}),a.d(t,"b",function(){return u}),a.d(t,"k",function(){return d}),a.d(t,"h",function(){return m}),a.d(t,"d",function(){return p}),a.d(t,"e",function(){return f}),a.d(t,"j",function(){return h});var r=a("b5c6"),n="/tmlms/village";function o(e){return Object(r["a"])({url:"".concat(n,"/page"),method:"get",params:e})}function i(){return Object(r["a"])({url:"".concat(n,"/getVillageByOrg"),method:"get"})}function c(e,t){return Object(r["a"])({url:"".concat(n,"/create?type=").concat(t),method:"post",data:e})}function s(e){return Object(r["a"])({url:"".concat(n,"/delete?userId=").concat(e),method:"post"})}function l(e,t){return Object(r["a"])({url:"".concat(n,"/edit?type=").concat(t),method:"post",data:e})}function u(e){return Object(r["a"])({url:"".concat(n,"/detail?userId=").concat(e),method:"get"})}function d(e,t){return Object(r["a"])({url:"".concat(n,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}function m(e){return Object(r["a"])({url:"".concat(n,"/page/villageshipowner"),method:"get",params:e})}function p(e){return Object(r["a"])({url:"".concat(n,"/getByVillagename"),method:"get",params:e})}function f(e){return Object(r["a"])({url:"/tmlms/relationship/countRecordWithShip",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/tmlms/trainMeet/createTime?id=".concat(e.id,"&type=").concat(e.type),method:"post"})}},daad:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-add"},[a("basic-container",[a("h1",[e._v("完善中介信息")]),a("el-form",{ref:"form",attrs:{model:e.agent,"label-width":"150px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中介名称:",prop:"agentName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.agent.agentName,callback:function(t){e.$set(e.agent,"agentName",t)},expression:"agent.agentName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系人:",prop:"contactName"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.agent.contactName,callback:function(t){e.$set(e.agent,"contactName",t)},expression:"agent.contactName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.agent.phone,callback:function(t){e.$set(e.agent,"phone",t)},expression:"agent.phone"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.agent.address,callback:function(t){e.$set(e.agent,"address",t)},expression:"agent.address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"营业执照:",prop:"businessLicense"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:e.$route.query.see,action:"/api/admin/file/upload/avatar","show-file-list":!1,headers:e.headers,"on-success":e.handleAvatarSuccess}},[e.agent.businessLicense?a("img",{staticClass:"avatar",attrs:{src:e.agent.businessLicense}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:e.save}},[e._v("提交")])],1)],1)],1)},n=[],o=(a("96cf"),a("1da1")),i=(a("4917"),a("6939")),c=a("e420"),s=a("4360"),l=a("7ded"),u={mixins:[c["a"]],data:function(){var e=function(e,t,a){""===t?a(new Error("请输入联系电话")):t.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)?a():a(new Error("请输入正确的手机号码!"))};return{agent:{businessLicense:"",phone:"",contactName:""},headers:{Authorization:"Bearer "+s["a"].getters.access_token},rules:{agentName:[{required:!0,message:"请输入名称",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],address:[{required:!0,message:"请输入联系地址",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:e,trigger:"blur"}]},uid:""}},methods:{getData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["c"])().then(function(e){return e.data.data.sysUser.userId});case 2:this.uid=e.sent,Object(i["b"])(this.uid).then(function(e){t.agent=e.data.data});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;var a=2;Object(i["c"])(e.agent,a).then(function(){e.$message.success("提交成功！"),e.$router.go(-1)}).catch(function(){e.$message.success("提交失败！")})})},handleAvatarSuccess:function(e){this.agent.businessLicense=e.data.url}},computed:{},created:function(){this.getData()}},d=u,m=(a("7387"),a("2877")),p=Object(m["a"])(d,r,n,!1,null,null,null);t["default"]=p.exports},e420:function(e,t,a){"use strict";a("7f7f");var r=a("7ded");t["a"]={data:function(){return{haveInfo:{}}},methods:{getInformation:function(e,t){var a=this;Object(r["c"])().then(function(r){-1===r.data.data.roles.indexOf(1)&&-1===r.data.data.roles.indexOf(111)&&(r.data.data.sysUser.phone&&(a.$set(a.haveInfo,"phone",!0),a[e][t[0]]=r.data.data.sysUser.phone),r.data.data.sysUser.realName&&(a.$set(a.haveInfo,"realName",!0),a[e][t[1]]=r.data.data.sysUser.realName),r.data.data.sysUser.idCard&&[t[2]]&&(a.$set(a.haveInfo,"idcard",!0),a[e].idcard=r.data.data.sysUser.idCard))})}}}},e880:function(e,t,a){},e97b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-add"},[a("basic-container",[a("h1",[e._v("完善船员信息")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"个人姓名：",prop:"realName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{label:1},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("男")]),a("el-radio",{attrs:{label:2},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("女")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号码：",prop:"idcard"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.idcard,callback:function(t){e.$set(e.form,"idcard",t)},expression:"form.idcard"}})],1)],1),a("el-col",{attrs:{span:12}},[a("iep-form-item",{staticClass:"form-half",attrs:{prop:"birthday","label-name":"出生日期"}},[a("iep-date-picker",{attrs:{type:"date",placeholder:"选择日期",readonly:""},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"籍贯地区：",prop:"districtId"}},[a("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"省级地区"},on:{change:function(t){return e.choseProvince(e.form.provinceId)}},model:{value:e.form.provinceId,callback:function(t){e.$set(e.form,"provinceId",t)},expression:"form.provinceId"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"provinceId"}})}),1),a("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"市级地区"},on:{change:function(t){return e.choseCity(e.form.cityId)}},model:{value:e.form.cityId,callback:function(t){e.$set(e.form,"cityId",t)},expression:"form.cityId"}},e._l(e.city,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"cityId"}})}),1),a("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"区级地区"},model:{value:e.form.districtId,callback:function(t){e.$set(e.form,"districtId",t)},expression:"form.districtId"}},e._l(e.district,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"districtId"}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"国籍",prop:"nationality"}},[a("el-input",{model:{value:e.form.nationality,callback:function(t){e.$set(e.form,"nationality",t)},expression:"form.nationality"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"民族",prop:"nation"}},[a("el-select",{attrs:{placeholder:"请输入民族"},model:{value:e.form.nation,callback:function(t){e.$set(e.form,"nation",t)},expression:"form.nation"}},e._l(e.nationals,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"家庭地址：",prop:"address"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"家庭联系人：",prop:"contactName"}},[a("el-input",{model:{value:e.form.contactName,callback:function(t){e.$set(e.form,"contactName",t)},expression:"form.contactName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"家庭联系电话",prop:"contactPhone"}},[a("el-input",{model:{value:e.form.contactPhone,callback:function(t){e.$set(e.form,"contactPhone",t)},expression:"form.contactPhone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"职位：",prop:"positionId"}},[a("el-select",{attrs:{placeholder:"职位"},model:{value:e.form.positionId,callback:function(t){e.$set(e.form,"positionId",t)},expression:"form.positionId"}},e._l(e.position,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否需要培训",prop:"isTrain"}},[a("el-radio-group",{model:{value:e.form.isTrain,callback:function(t){e.$set(e.form,"isTrain",t)},expression:"form.isTrain"}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请类别",prop:"applyType"}},[a("el-select",{attrs:{placeholder:"请输入申请类别"},model:{value:e.form.applyType,callback:function(t){e.$set(e.form,"applyType",t)},expression:"form.applyType"}},e._l(e.applyTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"特长：",prop:"speciality"}},[a("el-input",{model:{value:e.form.speciality,callback:function(t){e.$set(e.form,"speciality",t)},expression:"form.speciality"}})],1)],1)],1),a("iep-form-item",{staticClass:"form-half",attrs:{prop:"remark","label-name":"备注信息",tip:"请输入备注信息"}},[a("iep-input-area",{model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("h1",{staticStyle:{"font-size":"18px"}},[e._v("资质证书: ")]),e._l(e.form.certList,function(t,r){return a("div",{key:r},[a("el-form",{attrs:{"label-width":"150px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"证书编码：",prop:"certNo"}},[a("el-input",{model:{value:t.certNo,callback:function(a){e.$set(t,"certNo",a)},expression:"item.certNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证书类型：",prop:"certType"}},[a("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_type"},model:{value:t.certType,callback:function(a){e.$set(t,"certType",a)},expression:"item.certType"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"证书等级：",prop:"certLevel"}},[a("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_level"},model:{value:t.certLevel,callback:function(a){e.$set(t,"certLevel",a)},expression:"item.certLevel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证书职务：",prop:"certTitle"}},[a("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_title"},model:{value:t.certTitle,callback:function(a){e.$set(t,"certTitle",a)},expression:"item.certTitle"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证书起始日期：",prop:"certDateIssue"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.certDateIssue,callback:function(a){e.$set(t,"certDateIssue",a)},expression:"item.certDateIssue"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证书结束日期：",prop:"certDateExpire"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.certDateExpire,callback:function(a){e.$set(t,"certDateExpire",a)},expression:"item.certDateExpire"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"扫描件：",prop:"certFile"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccessFile,limit:1,headers:e.headers,accept:"image/*"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.fileUpload(r)}}},[e._v("点击上传")]),t.certFile?a("img",{staticClass:"certAvatar",attrs:{src:t.certFile}}):a("i",{staticClass:"el-icon-picture-outline"})],1)],1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.remove(r)}}},[e._v("删除")])],1)],1)],1)],1)}),a("div",{staticStyle:{"text-align":"center"}},[a("iep-button",{staticStyle:{width:"86%","margin-top":"5px","margin-bottom":"8px"},attrs:{icon:"el-icon-plus",plain:""},on:{click:e.newMember}},[e._v("新增")])],1)],2),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("提交")])],1)],1)],1)},n=[],o=(a("a481"),a("6b54"),a("ac6a"),a("96cf"),a("1da1")),i=(a("4917"),a("c533b")),c=a("5612"),s=a("e9bd"),l=a("7ded"),u=a("e420"),d=a("4360"),m={mixins:[u["a"]],data:function(){var e=function(e,t,a){""===t?a(new Error("请输入联系电话")):t.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)?a():a(new Error("请输入正确的手机号码!"))};return{certificateColumns:s["a"],form:{address:"",idcard:"",realName:"",birthday:"",nation:"",gender:1,isTrain:0,districtId:"",remark:"",positionId:"",nationality:"中国",speciality:"",photoFront:"",photoReverse:"",idcardPhoto:"",facePhoto:"",cityId:"",contactPhone:"",contactName:"",phone:"",applyType:"",certList:[]},position:[],province:[],city:[],district:[],nationals:[{id:1,name:"汉族"},{id:2,name:"蒙古族"},{id:3,name:"回族"},{id:4,name:"藏族"},{id:5,name:"维吾尔族"},{id:6,name:"苗族"},{id:7,name:"彝族"},{id:8,name:"壮族"},{id:9,name:"布依族"},{id:10,name:"朝鲜族"},{id:11,name:"满族"},{id:12,name:"侗族"},{id:13,name:"瑶族"},{id:14,name:"白族"},{id:15,name:"土家族"},{id:16,name:"哈尼族"},{id:17,name:"哈萨克族"},{id:18,name:"傣族"},{id:19,name:"黎族"},{id:20,name:"傈僳族"},{id:21,name:"佤族"},{id:22,name:"畲族"},{id:23,name:"高山族"},{id:24,name:"拉祜族"},{id:25,name:"水族"},{id:26,name:"东乡族"},{id:27,name:"纳西族"},{id:28,name:"景颇族"},{id:29,name:"柯尔克孜族"},{id:30,name:"土族"},{id:31,name:"达翰尔族"},{id:32,name:"么佬族"},{id:33,name:"羌族"},{id:34,name:"布朗族"},{id:35,name:"撒拉族"},{id:36,name:"毛南族"},{id:37,name:"仡佬族"},{id:38,name:"锡伯族"},{id:39,name:"阿昌族"},{id:40,name:"普米族"},{id:41,name:"塔吉克族"},{id:42,name:"怒族"},{id:43,name:"乌孜别克族"},{id:44,name:"俄罗斯族"},{id:45,name:"鄂温克族"},{id:46,name:"德昂族"},{id:47,name:"保安族"},{id:48,name:"裕固族"},{id:49,name:"京族"},{id:50,name:"塔塔尔族"},{id:51,name:"独龙族"},{id:52,name:"鄂伦春族"},{id:53,name:"赫哲族"},{id:54,name:"门巴族"},{id:55,name:"珞巴族"},{id:56,name:"基诺族"},{id:57,name:"穿青人"}],rules:{realName:[{required:!0,message:"请填写个人姓名",trigger:"blur"}],contactName:[{required:!0,message:"请填联系人",trigger:"blur"}],gender:[{required:!0,message:"请填写性别",trigger:"blur"}],idcard:[{required:!0,message:"请填写身份证信息",trigger:"blur"}],birthday:[{required:!0,message:"请填写生日信息",trigger:"blur"}],districtId:[{required:!0,message:"请填写地区",trigger:"blur"}],nationality:[{required:!0,message:"请填写国籍",trigger:"blur"}],contactPhone:[{required:!0,message:"请填写联系电话",trigger:"blur"}],positionId:[{required:!0,message:"请填写职位",trigger:"blur"}],applyType:[{required:!0,message:"请填写申请类别",trigger:"blur"}],address:[{required:!0,message:"请填写地址",trigger:"blur"}],phone:[{required:!0,message:"请填写联系电话",trigger:"blur"},{validator:e,trigger:"blur"}]},applyTypes:[{id:1,name:"以旧换新"},{id:2,name:"普通船员"},{id:3,name:"职务船员"},{id:4,name:"证书换发"},{id:5,name:"证书补发"},{id:6,name:"其他"}],headers:{Authorization:"Bearer "+d["a"].getters.access_token},isIdcard:!1,idx:"",userCard:""}},methods:{getData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["c"])().then(function(e){return e.data.data.sysUser.idCard});case 2:return this.userCard=e.sent,e.next=5,Object(c["f"])(this.userCard).then(function(e){return e.data.data});case 5:t=e.sent,this.choseProvince(t.provinceId),this.choseCity(t.cityId),t.certList&&(a=0,t.certList.forEach(function(e){e.id=a,a++})),this.form=t,Object(i["d"])(0).then(function(e){var t=e.data;r.province=t.data}),Object(i["f"])("tyb_resume_position").then(function(e){var t=e.data;r.position=t.data});case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;var a=2;Object(c["g"])(e.form,a).then(function(){e.$message.success("提交成功！"),e.$router.go(-1)}).catch(function(){e.message.error("提交失败！")})})},choseProvince:function(e){var t=this;this.form.cityId="",this.form.districtId="",this.form.villageId="",this.district=[],Object(i["d"])(e).then(function(e){var a=e.data;t.city=a.data})},setData:function(e){this.form.certList=e},choseCity:function(e){var t=this;Object(i["d"])(e).then(function(e){var a=e.data;t.district=a.data})},newMember:function(){this.form.certList||this.$set(this.form,"certList",[]);var e=this.form.certList.length;e<2?this.form.certList.push({id:e?(parseInt(this.form.certList[e-1].id)+1).toString():"0"}):this.$message({message:"最多两个证书",type:"warning"})},remove:function(e){var t=this;this.$confirm("此操作将永久删除该证书, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(2===t.form.certList.length){var a=t.form.certList.filter(function(t){return t.id!=e});t.form.certList=a}else if(1===t.form.certList.length){var r=t.form.certList.filter(function(e){return 2==e.id});t.form.certList=r}t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleAvatarSuccessFile:function(e){this.$set(this.form.certList[this.idx],"certFile",e.data.url)},fileUpload:function(e){this.idx=e}},created:function(){this.getData()},mounted:function(){},computed:{},watch:{"form.idcard":{handler:function(e){if(void 0!==e&&18===e.length){var t=e.substr(6,8).replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3");this.form.birthday=t}},deep:!0}}},p=m,f=(a("498d"),a("2877")),h=Object(f["a"])(p,r,n,!1,null,null,null);t["default"]=h.exports},e9bd:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=[{prop:"certNo",label:"证书编码"},{prop:"certType",label:"证书类型",type:"dict",dictName:"tyb_crew_cert_type"},{prop:"certLevel",label:"证书等级",type:"dict",dictName:"tyb_crew_cert_level"},{prop:"certTitle",label:"证书职务",type:"dict",dictName:"tyb_crew_cert_title"},{prop:"certDateIssue",label:"有效期至",type:"date"},{prop:"certDateExpire",label:"结束日期",type:"date"},{prop:"annex",label:"扫描件",type:"file"}]},ebe1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"iep-page-form"},[a("basic-container",[a("page-header",{attrs:{title:"修改个人密码"}}),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px",size:"small",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"原密码：",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"新密码：",prop:"newpassword1"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.form.newpassword1,callback:function(t){e.$set(e.form,"newpassword1",t)},expression:"form.newpassword1"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"确认密码：",prop:"newpassword2"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.form.newpassword2,callback:function(t){e.$set(e.form,"newpassword2",t)},expression:"form.newpassword2"}})],1)],1)],1),a("el-form-item",{attrs:{label:""}},[a("operation-wrapper",[a("iep-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)],1)],1)},n=[],o=a("be94"),i=a("2f62"),c=a("e17e"),s={data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.form.checkPass&&e.$refs.form.validateField("checkPass"),r())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.form.newpassword1?r(new Error("两次输入密码不一致!")):r()};return{form:{username:"",password:"",newpassword1:"",newpassword2:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}],newpassword1:[{required:!0,validator:t,trigger:"blur"}],newpassword2:[{required:!0,validator:a,trigger:"blur"}]}}},computed:Object(o["a"])({},Object(i["e"])({userInfo:function(e){return e.user.userInfo}})),methods:Object(o["a"])({},Object(i["b"])(["GetUserInfo","LogOut"]),{save:function(){var e=this;this.form.username=this.userInfo.username,this.$refs["form"].validate(function(t){t&&Object(c["b"])(e.form).then(function(){e.$message.success("密码修改成功，请重新登陆"),e.GetUserInfo(),e.LogOut().then(function(){location.reload()})}).catch(function(){e.$message.error("修改失败！")})})}})},l=s,u=a("2877"),d=Object(u["a"])(l,r,n,!1,null,null,null);t["default"]=d.exports},f6d4:function(e,t,a){},ff0b:function(e,t,a){"use strict";a("ae53")}}]);