(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94f396c6"],{"26c0":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"iep-page-form"},[r("basic-container",[r("page-header",{attrs:{title:e.methodName+"建议"}},[r("iep-button",{on:{click:e.back}},[e._v("返回建议列表")])],1),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px",size:"small"}},[r("iep-form-item",{staticClass:"form-half",attrs:{"label-name":"建议主题",prop:"theme"}},[r("el-input",{model:{value:e.form.theme,callback:function(t){e.$set(e.form,"theme",t)},expression:"form.theme"}})],1),r("iep-form-item",{staticClass:"form-half",attrs:{prop:"proposeContent","label-name":"建议内容"}},[r("iep-input-area",{model:{value:e.form.proposeContent,callback:function(t){e.$set(e.form,"proposeContent",t)},expression:"form.proposeContent"}})],1),r("iep-form-item",{attrs:{prop:"attendeeId","label-name":"接收对象"}},[r("iep-select",{attrs:{autocomplete:"off","prefix-url":"admin/org/all",placeholder:"请选择组织"},model:{value:e.form.attendeeId,callback:function(t){e.$set(e.form,"attendeeId",t)},expression:"form.attendeeId"}})],1),r("iep-form-item",{staticClass:"form-half",attrs:{prop:"annexList","label-name":"附件"}},[r("iep-upload",{attrs:{limit:e.limit},model:{value:e.form.annexList,callback:function(t){e.$set(e.form,"annexList",t)},expression:"form.annexList"}})],1),r("el-form-item",{attrs:{label:""}},[r("operation-wrapper",[r("iep-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")]),r("iep-button",{on:{click:e.handlePublish}},[e._v("保存并发布")]),r("iep-button",{on:{click:e.onGoBack}},[e._v("取消")])],1)],1)],1)],1)],1)},a=[],o=r("6a8a"),i=r("2934"),c=r("b9b5"),u={data:function(){var e=this;return{limit:1,back:function(){e.$router.push("/hrms_spa/suggestion_list")},rules:c["e"],form:Object(c["d"])()}},computed:{id:function(){return+this.$route.params.id},methodName:function(){return this.id?"编辑":"新增"}},created:function(){var e=this;this.id&&Object(o["c"])(this.id).then((function(t){var r=t.data;e.form=e.$mergeByFirst(Object(c["d"])(),r.data)}))},methods:{onGoBack:function(){this.$router.history.go(-1)},handlePublish:function(){this.form.status="1",this.handleSubmit(!0)},handleSubmit:function(e){var t=this,r=this.id?o["g"]:o["f"];this.$refs["form"].validate((function(n){if(n){var a=!0===e;t.form.annexList.length>0&&(t.form.annex=t.form.annexList[0].url),r(Object(c["c"])(t.form),a).then((function(e){var r=e.data;r.data&&(t.$message({message:"".concat(t.methodName,"建议成功"),type:"success"}),t.back())}))}}))},handleDownload:function(e){Object(i["a"])(e)}}},s=u,l=r("2877"),d=Object(l["a"])(s,n,a,!1,null,null,null);t["default"]=d.exports},"6a8a":function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return s})),r.d(t,"h",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return f}));var n=r("b5c6"),a="/cpms/suggestion";function o(e){return Object(n["a"])({url:"".concat(a,"/pageIssue"),method:"get",params:e})}function i(e){return Object(n["a"])({url:"".concat(a,"/pageReceived"),method:"get",params:e})}function c(e){return Object(n["a"])({url:"".concat(a,"/").concat(e),method:"get"})}function u(e){return Object(n["a"])({url:"".concat(a,"/create"),method:"post",data:e})}function s(e){return Object(n["a"])({url:"".concat(a,"/update"),method:"post",data:e})}function l(e){return Object(n["a"])({url:"".concat(a,"/feedback"),method:"post",data:e})}function d(e){return Object(n["a"])({url:"".concat(a,"/delete/batch"),method:"post",data:[e]})}function f(e){return Object(n["a"])({url:"".concat(a,"/delete/batch"),method:"post",data:e})}},b9b5:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"e",(function(){return l}));r("8e6e"),r("ac6a"),r("456d");var n=r("ade3");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i={status:{0:"草稿",1:"未处理",2:"以采纳",3:"已驳回"}},c=[{prop:"status",label:"状态",type:"dict"},{prop:"sendTime",label:"发送时间"}],u=function(){return{id:"",userId:"",theme:"",status:"",proposeContent:"",attendeeList:"",attendeeId:"",feedbackOpinion:"",gratuity:"",disabled:"",annexList:[],fileName:"",proposeRelatioList:""}},s=function(e){var t=o({},e);return t},l={theme:[{required:!0,message:"请填写建议主题",trigger:"blur"}],proposeContent:[{required:!0,message:"请填写建议内容",trigger:"blur"}],attendeeId:[{required:!0,message:"请填写接收对象",trigger:"blur"}],feedbackStatus:[{required:!0,message:"请填写处理意见",trigger:"blur"}],feedbackOpinion:[{required:!0,message:"请填写反馈意见",trigger:"blur"}],gratuity:[{required:!0,message:"请输入打赏金额",trigger:"blur"}]}}}]);