(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89eeb51e"],{6281:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract-box"},[a("basic-container",[a("page-header",{attrs:{title:"渔船变更"}}),a("div",{staticClass:"shipowner_title"},[t.ship_change_add?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:t.addShipowner}},[t._v("新增")]):t._e()],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.shipChangeList,stripe:""}},[t._l(t.options.columns,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.value,label:t.text}})}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["未审核"===e.row.status&&t.ship_change_aud?a("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.handleAudit(e.row.id)}}},[t._v("审核\n            ")]):t._e(),"未审核"===e.row.status&&t.ship_change_edit&&t.manager?a("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.handleEdit(e.row.id)}}},[t._v("编辑\n            ")]):t._e(),a("el-button",{attrs:{type:"text",icon:"el-icon-view",size:"mini"},on:{click:function(a){return t.handleView(e.row.id)}}},[t._v("查看\n            ")]),"未审核"===e.row.status&&t.ship_change_del?a("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.handleDel(e.row.id)}}},[t._v("删除\n            ")]):t._e()]}}])})],2),a("div",{staticStyle:{"text-align":"center",margin:"20px 0"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",total:t.total,"page-size":t.params.size},on:{"current-change":t.currentChange}})],1),a("el-dialog",{attrs:{title:"提示",visible:t.audDialog,width:"30%","before-close":t.audClose},on:{"update:visible":function(e){t.audDialog=e}}},[a("span",[t._v("是否同意审核")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.agreeAudit}},[t._v("同 意")]),a("el-button",{attrs:{type:"primary"},on:{click:t.cancelAudit}},[t._v("拒 绝")])],1)])],1)],1)},i=[],s=(a("6762"),a("2fdb"),a("ac6a"),a("be94")),c=a("8a97"),o=a("7ded"),u=a("2f62"),r={data:function(){return{shipChangeList:[],total:10,params:{current:1,size:10,deptName:"",contactName:"",phone:"",address:""},options:{expandAll:!1,columns:[{text:"变更类型",value:"type"},{text:"船名号",value:"shipName"},{text:"渔船编码",value:"shipNo"},{text:"船舶所有人",value:"shipownerName"},{text:"联系电话",value:"shipownerPhone"},{text:"审核状态",value:"status"}]},ship_change_add:!1,ship_change_edit:!1,ship_change_del:!1,ship_change_aud:!1,manager:!0,statusList:[{label:"未审核",value:0},{label:"已审核",value:1},{label:"审核未通过",value:2}],typeList:[{label:"变更船名",value:1},{label:"变更持证人",value:2},{label:"变更服务公司",value:3}],audDialog:!1,aid:""}},computed:Object(s["a"])({},Object(u["c"])(["permissions"])),methods:{currentChange:function(t){this.params.current=t,this.getData()},addShipowner:function(){this.$router.push({path:"/hrms_spa/shipChange_Detial/0",query:{add:0}})},handleEdit:function(t){this.$router.push({path:"/hrms_spa/shipChange_Detial/".concat(t),query:{edit:t}})},handleView:function(t){this.$router.push({path:"/hrms_spa/shipChange_Detial/".concat(t),query:{see:t}})},handleAudit:function(t){this.audDialog=!0,this.aid=t},getData:function(){var t=this;Object(c["d"])(this.params).then(function(e){t.shipChangeList=e.data.data.records,t.total=e.data.data.total,t.shipChangeList.forEach(function(e){t.statusList.forEach(function(t){e.status===t.value&&(e.status=t.label)}),t.typeList.forEach(function(t){e.type===t.value&&(e.type=t.label)})})})},handleDel:function(t){var e=this;this.$confirm("此操作将永久删除该渔船变更数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c["a"])(t).then(function(t){e.$message({type:"success",message:t.data.msg}),e.getData()}).catch(function(t){e.$message.error(t.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},audClose:function(){this.audDialog=!1},agreeAudit:function(){var t=this,e=1;Object(c["e"])({id:this.aid,status:e}).then(function(){t.$message.success("审核通过！"),t.getData(),t.audDialog=!1}).catch(function(e){t.message.error(e.msg)})},cancelAudit:function(){var t=this,e=2;Object(c["e"])({id:this.aid,status:e}).then(function(){t.$message.success("审核不通过！"),t.getData(),t.audDialog=!1}).catch(function(e){t.message.error(e.msg)})}},created:function(){var t=this;this.getData(),this.ship_change_add=this.permissions["ship_change_add"],this.ship_change_edit=this.permissions["ship_change_edit"],this.ship_change_see=this.permissions["ship_change_see"],this.ship_change_del=this.permissions["ship_change_del"],this.ship_change_aud=this.permissions["ship_change_aud"],Object(o["c"])().then(function(e){e.data.data.roles.includes(111)?t.manager=!1:t.manager=!0})}},l=r,h=(a("d6b1"),a("2877")),d=Object(h["a"])(l,n,i,!1,null,"2ca53b2b",null);e["default"]=d.exports},"6d22":function(t,e,a){},"8a97":function(t,e,a){"use strict";a.d(e,"d",function(){return s}),a.d(e,"f",function(){return c}),a.d(e,"a",function(){return o}),a.d(e,"c",function(){return u}),a.d(e,"b",function(){return r}),a.d(e,"e",function(){return l});var n=a("b5c6"),i="/tybship/tybshipchange";function s(t){return Object(n["a"])({url:"".concat(i,"/page"),method:"get",params:t})}function c(t){return Object(n["a"])({url:"".concat(i,"/save"),method:"post",data:t})}function o(t){return Object(n["a"])({url:"".concat(i,"/del/").concat(t),method:"post"})}function u(t){return Object(n["a"])({url:"".concat(i,"/update"),method:"post",data:t})}function r(t){return Object(n["a"])({url:"".concat(i,"/").concat(t),method:"get"})}function l(t){return Object(n["a"])({url:"".concat(i,"/review"),method:"post",params:t})}},d6b1:function(t,e,a){"use strict";a("6d22")}}]);