(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1839d8b7"],{"3fad":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"iep-page-form"},[a("basic-container",[a("page-header",{attrs:{title:"建议详情"}},[a("iep-button",{on:{click:function(e){return t.onGoBack()}}},[t._v("返回建议列表")])],1),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px",size:"small"}},[a("iep-form-item",{attrs:{prop:"theme","label-name":"建议主题"}},[a("div",{staticClass:"content"},[t._v(t._s(t.form.theme))])]),a("iep-form-item",{attrs:{prop:"proposeContent","label-name":"建议内容"}},[a("div",{staticClass:"content"},[t._v(t._s(t.form.proposeContent))])]),a("iep-form-item",{attrs:{prop:"attendeeList","label-name":"接收对象"}},t._l(t.form.attendeeList,function(e,r){return a("div",{key:r,staticClass:"content",staticStyle:{"margin-right":"5px"}},[t._v(t._s(e))])}),0),a("hr"),a("iep-form-item",{attrs:{prop:"status","label-name":"处理意见"}},[a("el-radio",{attrs:{disabled:t.isEdit,label:"2"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v("采纳")]),a("el-radio",{attrs:{disabled:t.isEdit,label:"3"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v("驳回")])],1),a("iep-form-item",{attrs:{prop:"proposeRelatioList[0].feedbackOpinion","label-name":"反馈意见"}},[a("iep-input-area",{attrs:{disabled:t.isEdit},model:{value:t.form.proposeRelatioList[0].feedbackOpinion,callback:function(e){t.$set(t.form.proposeRelatioList[0],"feedbackOpinion",e)},expression:"form.proposeRelatioList[0].feedbackOpinion"}})],1),a("iep-form-item",{attrs:{prop:"proposeRelatioList[0].gratuity","label-name":"打赏"}},[a("el-input",{attrs:{disabled:t.isEdit,value:t.val,maxlength:"4",size:"small"},model:{value:t.form.proposeRelatioList[0].gratuity,callback:function(e){t.$set(t.form.proposeRelatioList[0],"gratuity",t._n(e))},expression:"form.proposeRelatioList[0].gratuity"}},[a("template",{slot:"append"},[t._v("贝")])],2)],1),a("hr"),a("iep-form-item",{attrs:{"label-name":"附件"}},[t.form.annexList.length>0?a("div",t._l(t.form.annexList,function(e){return a("a-tag",{key:e.url,on:{click:function(a){return t.handleDownload(e)}}},[a("a-icon",{attrs:{type:"paper-clip"}}),t._v(t._s(e.name))],1)}),1):a("span",[t._v("无附件")])]),a("el-form-item",{attrs:{label:""}},[a("operation-wrapper",[a("iep-button",{attrs:{type:"primary",disabled:t.isEdit},on:{click:t.handlePublish}},[t._v("确定")]),a("iep-button",{on:{click:t.onGoBack}},[t._v("取消")])],1)],1)],1)],1)],1)},n=[],o=a("be94"),i=a("6a8a"),s=a("b9b5"),u=a("2934"),c=a("2f62"),l={data:function(){return{rules:s["e"],id:this.$route.params.id,pageLoading:!0,disabled:!1,form:Object(s["d"])()}},computed:Object(o["a"])({},Object(c["c"])(["userInfo"]),{isEdit:function(){return this.userInfo.userId===this.form.userId||this.disabled}}),created:function(){this.loadPage()},methods:{onGoBack:function(){this.$router.history.go(-1)},handlePublish:function(){var t=this;this.$refs["form"].validate(function(e){e&&(t.form.annexList.length>0&&(t.form.annex=t.form.annexList[0].url),t.form.proposeRelatioList.length>0&&(t.form.feedbackOpinion=t.form.proposeRelatioList[0].feedbackOpinion,t.form.gratuity=t.form.proposeRelatioList[0].gratuity),Object(i["h"])(Object(s["c"])(t.form),!0).then(function(e){var a=e.data;a.data?(t.$message({message:"回复建议成功",type:"success"}),t.onGoBack()):t.$message({message:a.msg})}))})},handleDownload:function(t){Object(u["a"])(t)},loadPage:function(){var t=this;this.pageLoading=!0,Object(i["c"])(this.id).then(function(e){var a=e.data;t.form=t.$mergeByFirst(Object(s["d"])(),a.data),t.disabled="2"===t.form.status||"3"===t.form.status,t.pageLoading=!1})}}},d=l,p=(a("e07d"),a("2877")),f=Object(p["a"])(d,r,n,!1,null,"221226c0",null);e["default"]=f.exports},"6a8a":function(t,e,a){"use strict";a.d(e,"d",function(){return o}),a.d(e,"e",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"f",function(){return u}),a.d(e,"g",function(){return c}),a.d(e,"h",function(){return l}),a.d(e,"b",function(){return d}),a.d(e,"a",function(){return p});var r=a("b5c6"),n="/cpms/suggestion";function o(t){return Object(r["a"])({url:"".concat(n,"/pageIssue"),method:"get",params:t})}function i(t){return Object(r["a"])({url:"".concat(n,"/pageReceived"),method:"get",params:t})}function s(t){return Object(r["a"])({url:"".concat(n,"/").concat(t),method:"get"})}function u(t){return Object(r["a"])({url:"".concat(n,"/create"),method:"post",data:t})}function c(t){return Object(r["a"])({url:"".concat(n,"/update"),method:"post",data:t})}function l(t){return Object(r["a"])({url:"".concat(n,"/feedback"),method:"post",data:t})}function d(t){return Object(r["a"])({url:"".concat(n,"/delete/batch"),method:"post",data:[t]})}function p(t){return Object(r["a"])({url:"".concat(n,"/delete/batch"),method:"post",data:t})}},b9b5:function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"a",function(){return o}),a.d(e,"d",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"e",function(){return u});var r=a("be94"),n={status:{0:"草稿",1:"未处理",2:"以采纳",3:"已驳回"}},o=[{prop:"status",label:"状态",type:"dict"},{prop:"sendTime",label:"发送时间"}],i=function(){return{id:"",userId:"",theme:"",status:"",proposeContent:"",attendeeList:"",attendeeId:"",feedbackOpinion:"",gratuity:"",disabled:"",annexList:[],fileName:"",proposeRelatioList:""}},s=function(t){var e=Object(r["a"])({},t);return e},u={theme:[{required:!0,message:"请填写建议主题",trigger:"blur"}],proposeContent:[{required:!0,message:"请填写建议内容",trigger:"blur"}],attendeeId:[{required:!0,message:"请填写接收对象",trigger:"blur"}],feedbackStatus:[{required:!0,message:"请填写处理意见",trigger:"blur"}],feedbackOpinion:[{required:!0,message:"请填写反馈意见",trigger:"blur"}],gratuity:[{required:!0,message:"请输入打赏金额",trigger:"blur"}]}},e07d:function(t,e,a){"use strict";a("e799")},e799:function(t,e,a){}}]);