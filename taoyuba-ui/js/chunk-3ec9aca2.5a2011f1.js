(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ec9aca2"],{"0521":function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"k",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"j",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"l",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"i",(function(){return f})),a.d(t,"d",(function(){return h}));var r=a("b5c6");function n(e){return Object(r["a"])({url:"tmlms/exam_examination/oldPage",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/tmlms/exam_examination/".concat(e),method:"get",data:e})}function i(e){return Object(r["a"])({url:"tmlms/exam_examination/save",method:"post",data:e})}function s(e){return Object(r["a"])({url:"tmlms/exam_examination/update",method:"post",data:e})}function l(e){return Object(r["a"])({url:"tmlms/exam_question/kinds",method:"get",data:e})}function c(e){return Object(r["a"])({url:"tmlms/exam_question/levels?kind=".concat(e),method:"get",data:e})}function u(e){return Object(r["a"])({url:"tmlms/exam_question/page",method:"get",params:e})}function m(e){return Object(r["a"])({url:"tmlms/exam_question/batch_save",method:"post",data:e})}function d(e){return Object(r["a"])({url:"tmlms/exam_question/update",method:"post",data:e})}function p(e){return Object(r["a"])({url:"tmlms/exam_question/delete?id=".concat(e),method:"post",data:e})}function f(e){return Object(r["a"])({url:"tmlms/exam_question/".concat(e),method:"get",data:e})}function h(e){return Object(r["a"])({url:"tmlms/exam_question/batchDelete",method:"post",data:e})}},"0bad":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"iep-page-form"},[a("basic-container",[a("page-header",{attrs:{title:e.methodName+"试题",backOption:e.backOption}}),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"单题输入",name:"first"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"题型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择",size:"medium"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"考试分类",prop:"kind"}},[a("el-select",{attrs:{placeholder:"请选择",size:"medium"},on:{change:e.getLevel},model:{value:e.form.kind,callback:function(t){e.$set(e.form,"kind",t)},expression:"form.kind"}},e._l(e.kindList,(function(e){return a("el-option",{key:e.kind,attrs:{label:e.kind,value:e.kind}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职务等级",prop:"level"}},[a("el-select",{attrs:{placeholder:"请选择",size:"medium"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},e._l(e.levelList,(function(e){return a("el-option",{key:e.level,attrs:{value:e.level}})})),1)],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"题目：",prop:"title"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),a("el-row",[e._l(e.testOptions,(function(t,r){return a("div",{key:r},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"选项"+e.testOptions[r].key}},[a("el-input",{attrs:{size:"medium"},model:{value:e.testOptions[r].value,callback:function(t){e.$set(e.testOptions[r],"value",t)},expression:"testOptions[index].value"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{size:"medium"},on:{click:function(a){return e.deleteItem(t,r)}}},[e._v("删除")])],1)],1)],1)})),a("el-row",[a("el-form-item",["GAPFILLING"!=e.form.type&&"ESSAYQUESTION"!=e.form.type?a("el-button",{on:{click:e.addItem}},[e._v("添加选项")]):e._e()],1)],1),a("el-form-item",{attrs:{label:"答案：",prop:"answer"}},[a("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",placeholder:"请输入内容"},model:{value:e.form.answer,callback:function(t){e.$set(e.form,"answer",t)},expression:"form.answer"}})],1),a("el-form-item",{attrs:{label:"上传图片："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("div",{staticClass:"demo-image__preview"},[e._l(e.imgList,(function(t,r){return[a("span",{key:r,staticClass:"demo-image__preview-boss"},[a("div",{staticClass:"chacha",on:{click:function(t){return e.deleteImg(r)}}},[a("i",{staticClass:"el-icon-error"})]),a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t,"preview-src-list":e.imgList}})],1)]}))],2)],1)],2),a("el-form-item",{attrs:{label:""}},[a("operation-wrapper",[a("iep-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("form")}}},[e._v("保存")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"批量导入",name:"second"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:"/api/tmlms/word/import","on-error":e.handleError,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.handleImport,multiple:"",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("批量导入题目")])],1)],1)],1)],1)],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=(a("7f7f"),a("0521")),s=a("b0e4"),l=a("4360");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={data:function(){return{backOption:{isBack:!0,backPath:this.$route.query.redirect},rules:s["b"],testFrom:{examQuestionList:[]},testOptions:[],form:{title:"",kind:"",level:"",options:"",answer:"",tag:"1",type:"RADIO"},typeList:[{label:"单选题",value:"RADIO"},{label:"判断题",value:"CHECKED"},{label:"复选题",value:"CHECKBOX"},{label:"填空题",value:"GAPFILLING"},{label:"简答题",value:"ESSAYQUESTION"}],activeName:"second",init:!1,headers:{Authorization:"Bearer "+l["a"].getters.access_token},isShow:!1,methodName:"",trainList:"",isTrain:!1,kindList:[],levelList:[],fileList:[],imgList:[]}},computed:{},mounted:function(){this.methodName=this.$route.query.edit?"编辑":"发布"},created:function(){this.$route.query.edit&&(this.activeName="first",this.getDetail()),this.getKindLevel()},methods:{handleAvatarSuccess:function(e){this.imgList.push(e.data.url)},addItem:function(){var e;this.testOptions.length?(e=this.testOptions[this.testOptions.length-1].key,this.testOptions.push({key:String.fromCharCode(e.charCodeAt()+1),value:""})):(e="A",this.testOptions.push({key:String.fromCharCode(e.charCodeAt()),value:""}))},handleError:function(e){var t=JSON.parse(e.message);this.$message({showClose:!0,message:t.msg,type:"error",duration:6e3})},deleteImg:function(e){this.imgList.splice(e,1)},deleteItem:function(e,t){this.testOptions.splice(t,1)},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return console.log(t),this.$confirm("确定移除 ".concat(e.name,"？"))},handleImport:function(e){var t=this;this.$confirm("上传成功，是否继续上传","提示",{confirmButtonText:"否",cancelButtonText:"是",type:"warning"}).then((function(){t.$router.go(-1)})),console.log("handleImport",e)},getKindLevel:function(){var e=this;Object(i["e"])().then((function(t){e.kindList=t.data.data}))},getDetail:function(){var e=this;Object(i["i"])(this.$route.query.edit).then((function(t){e.getLevel(t.data.data.kind),e.form=t.data.data,t.data.data.url&&(e.imgList=JSON.parse(t.data.data.url)),console.log(e.form.options),e.testOptions=JSON.parse(e.form.options)}))},getLevel:function(e){var t=this;this.form.level="",Object(i["f"])(e).then((function(e){t.levelList=e.data.data}))},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(t.form.options=JSON.stringify(t.testOptions),!e)return!1;if(t.$route.query.edit)Object(i["l"])(u(u({},t.form),{},{url:JSON.stringify(t.imgList)})).then((function(e){e.data.data?(t.$message({message:"".concat(t.methodName,"成功"),type:"success"}),t.$router.go(-1)):t.$message({message:"".concat(t.methodName,"失败"),type:"error"})})).catch((function(e){t.$message({message:e,type:"error"})}));else{t.testFrom.examQuestionList=[];var a=u(u({},t.form),{},{url:JSON.stringify(t.imgList)});t.testFrom.examQuestionList.push(a),Object(i["b"])(u({},t.testFrom)).then((function(e){e.data.data?(t.$message({message:"".concat(t.methodName,"成功"),type:"success"}),t.$router.go(-1)):t.$message({message:"".concat(t.methodName,"失败"),type:"error"})}))}console.log("aaa")}))}},watch:{}},d=m,p=(a("5539"),a("2877")),f=Object(p["a"])(d,r,n,!1,null,"07738a54",null);t["default"]=f.exports},5539:function(e,t,a){"use strict";a("cea9")},b0e4:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var r=[{label:"试题名称",prop:"title",width:"400"},{label:"试题分类",prop:"kind"},{label:"职务等级",prop:"level"},{label:"创建者",prop:"createByName"},{label:"创建时间",prop:"createTime"}],n={title:[{required:!0,message:"必填",trigger:"blur"}],kind:[{required:!0,message:"必填"}],type:[{required:!0,message:"必填",trigger:"blur"}],answer:[{required:!0,message:"必填",trigger:"change"}]}},cea9:function(e,t,a){}}]);