(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98891f4c"],{"1a94":function(e,t,a){"use strict";a("1e21")},"1e21":function(e,t,a){},"2f9e":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("ac6a"),a("28a5"),a("a481");var r=a("b5c6");function n(e){var t=e.url,a=e.method,n=void 0===a?"post":a,i=e.data,_=void 0===i?{}:i,c=e.title,s=void 0===c?"":c;return new Promise((function(e){return Object(r["a"])({url:t,method:n,headers:{responseType:"arraybuffer"},data:_,responseType:"blob"}).then((function(t){o({title:s,response:t}).then((function(){e()}))}))}))}function o(e){var t=e.title,a=void 0===t?"":t,r=e.response,n=i(r.headers["content-disposition"].replace(/"/g,""));return new Promise((function(e){var t=r.headers,o=new Blob([r.data],{type:t["content-type"]});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,a);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(o),i.download=a?"".concat(a,".").concat(n.suffix):n.filename,document.body.appendChild(i),i.style.display="none",i.click()}e()}))}function i(e){var t={},a=e.split(";");return a.forEach((function(e){var a=e.replace(/^\s+|\s+$/g,""),r=a.split("=");r[1]?t[r[0]]=r[1]:t[r[0]]=r[0]})),t.suffix=t.filename.split(".")[1],t}},"41e2":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_3__),E_taoyuba_ui_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("53ca"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("34ef"),core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_typed_uint8_array__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_9__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_10__),E_taoyuba_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("1da1"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("4917"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_12__),_api_post_admin__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("c533b"),_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("5612"),_api_hrms_databuspayload__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("b440"),_views_hrms_ComponentsNew_options__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("e9bd"),_api_login__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("7ded"),_api_post_cert__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("4525"),_mixins_information__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("e420"),vue_socket_io__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("5132"),vue_socket_io__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(vue_socket_io__WEBPACK_IMPORTED_MODULE_20__),vue__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("2b0e"),_store__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("4360"),lodash_debounce__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("b047"),lodash_debounce__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_23__);vue__WEBPACK_IMPORTED_MODULE_21__["default"].use(new vue_socket_io__WEBPACK_IMPORTED_MODULE_20___default.a({debug:!1,connection:"http://localhost:5000"})),__webpack_exports__["a"]={mixins:[_mixins_information__WEBPACK_IMPORTED_MODULE_19__["a"]],data:function(){this.getidcardList=lodash_debounce__WEBPACK_IMPORTED_MODULE_23___default()(this.getidcardList,800);var e=function(e,t,a){""===t?a(new Error("请输入联系电话")):t.match(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-9]|18[0-9]|14[0-9]|19[0-9]|16[0-9])[0-9]{8}$/)?a():a(new Error("请输入正确的手机号码!"))};return{certificateColumns:_views_hrms_ComponentsNew_options__WEBPACK_IMPORTED_MODULE_16__["a"],form:{address:"",idcard:"",realName:"",birthday:"",nation:"",gender:1,isTrain:0,districtId:"",remark:"",positionId:"",nationality:"中国",speciality:"",photoFront:"",photoReverse:"",idcardPhoto:"",facePhoto:"",cityId:"",certList:[]},agent:{businessLicense:""},position:[],province:[],city:[],district:[],nationals:[{id:1,name:"汉族"},{id:2,name:"蒙古族"},{id:3,name:"回族"},{id:4,name:"藏族"},{id:5,name:"维吾尔族"},{id:6,name:"苗族"},{id:7,name:"彝族"},{id:8,name:"壮族"},{id:9,name:"布依族"},{id:10,name:"朝鲜族"},{id:11,name:"满族"},{id:12,name:"侗族"},{id:13,name:"瑶族"},{id:14,name:"白族"},{id:15,name:"土家族"},{id:16,name:"哈尼族"},{id:17,name:"哈萨克族"},{id:18,name:"傣族"},{id:19,name:"黎族"},{id:20,name:"傈僳族"},{id:21,name:"佤族"},{id:22,name:"畲族"},{id:23,name:"高山族"},{id:24,name:"拉祜族"},{id:25,name:"水族"},{id:26,name:"东乡族"},{id:27,name:"纳西族"},{id:28,name:"景颇族"},{id:29,name:"柯尔克孜族"},{id:30,name:"土族"},{id:31,name:"达翰尔族"},{id:32,name:"么佬族"},{id:33,name:"羌族"},{id:34,name:"布朗族"},{id:35,name:"撒拉族"},{id:36,name:"毛南族"},{id:37,name:"仡佬族"},{id:38,name:"锡伯族"},{id:39,name:"阿昌族"},{id:40,name:"普米族"},{id:41,name:"塔吉克族"},{id:42,name:"怒族"},{id:43,name:"乌孜别克族"},{id:44,name:"俄罗斯族"},{id:45,name:"鄂温克族"},{id:46,name:"德昂族"},{id:47,name:"保安族"},{id:48,name:"裕固族"},{id:49,name:"京族"},{id:50,name:"塔塔尔族"},{id:51,name:"独龙族"},{id:52,name:"鄂伦春族"},{id:53,name:"赫哲族"},{id:54,name:"门巴族"},{id:55,name:"珞巴族"},{id:56,name:"基诺族"},{id:57,name:"穿青人"}],rules:{realName:[{required:!0,message:"请填写个人姓名",trigger:"blur"}],contactName:[{required:!0,message:"请填联系人",trigger:"blur"}],gender:[{required:!0,message:"请填写性别",trigger:"blur"}],idcard:[{required:!0,message:"请填写身份证信息",trigger:"blur"}],birthday:[{required:!0,message:"请填写生日信息",trigger:"blur"}],districtId:[{required:!0,message:"请填写地区",trigger:"blur"}],nationality:[{required:!0,message:"请填写国籍",trigger:"blur"}],contactPhone:[{required:!0,message:"请填写联系电话",trigger:"blur"}],positionId:[{required:!0,message:"请填写职位",trigger:"blur"}],applyType:[{required:!0,message:"请填写申请类别",trigger:"blur"}],address:[{required:!0,message:"请填写地址",trigger:"blur"}],phone:[{required:!0,message:"请填写联系电话",trigger:"blur"},{validator:e,trigger:"blur"}]},options:[],applyTypes:[{id:1,name:"以旧换新"},{id:2,name:"普通船员"},{id:3,name:"职务船员"},{id:4,name:"证书换发"},{id:5,name:"证书补发"},{id:6,name:"其他"}],dataLoad:[],sn:"",manager:!1,headers:{Authorization:"Bearer "+_store__WEBPACK_IMPORTED_MODULE_22__["a"].getters.access_token},isIdcard:!1,idx:"",loading:!1,idcards:[],isPhone:!1,isManger:!1,cards:"",isDate:!1,nameA:"",idcardB:""}},methods:{save:function(){var e=Object(E_taoyuba_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.form.idcardPhoto.length>200)){e.next=3;break}return e.next=3,this.getIdcardFile();case 3:if(!(this.form.facePhoto.length>200)){e.next=6;break}return e.next=6,this.getFaceFile();case 6:console.log(this.form),this.$refs["form"].validate((function(e){if(!e)return!1;var a=t.form,r=2;if(!0===t.isDate){var n=JSON.parse(JSON.stringify(a));Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["g"])(n,r).then((function(e){t.$message({message:e.data.msg,type:"success"}),t.$router.go(-1)})).catch((function(e){t.$message.error(e.message)}))}else{var o=JSON.parse(JSON.stringify(a));Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["t"])(o,r).then((function(e){t.$message({message:e.data.msg,type:"success"}),t.$router.go(-1)})).catch((function(e){t.$message.error(e.message)}))}}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),choseProvince:function(e){var t=this;this.form.cityId="",this.form.districtId="",this.form.villageId="",this.district=[],Object(_api_post_admin__WEBPACK_IMPORTED_MODULE_13__["d"])(e).then((function(e){var a=e.data;t.city=a.data}))},setData:function(e){this.form.certList=e},choseCity:function(e){var t=this;Object(_api_post_admin__WEBPACK_IMPORTED_MODULE_13__["d"])(e).then((function(e){var a=e.data;t.district=a.data}))},handleSave:function(){},collect:function(){var e=this;this.sn="",Object(_api_hrms_databuspayload__WEBPACK_IMPORTED_MODULE_15__["a"])({sn:this.sn}).then((function(t){Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["k"])(t.data.data.identityNumber).then((function(a){!0!==a.data.data?(e.choseProvince(a.data.data.provinceId),e.choseCity(a.data.data.cityId),e.form=a.data.data,e.$set(e.form,"certList",[]),e.isIdcard=!0,Object(_api_post_cert__WEBPACK_IMPORTED_MODULE_18__["g"])(t.data.data.identityNumber).then((function(t){t.data.data.forEach((function(t){if(e.form.certList.push(t),e.form.certList){var a=0;e.form.certList.forEach((function(e){e.id=a,a++}))}}))}))):0===t.data.code&&(e.form.address=t.data.data.address,e.form.idcard=t.data.data.identityNumber,e.form.realName=t.data.data.name,e.form.nation=t.data.data.nation,e.form.idcardPhoto="data:image/png;base64,"+t.data.data.photo,e.form.facePhoto="data:image/png;base64,"+t.data.data.picture)}))})).catch((function(t){e.$message.error(t.message)}))},handleAvatarSuccessFront:function(e){this.form.photoFront=e.data.url},handleAvatarSuccessReverse:function(e){this.form.photoReverse=e.data.url},getIdcardFile:function(){var e=Object(E_taoyuba_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(){var t,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.dataURLtoFile(this.form.idcardPhoto),a=new FormData,a.append("file",t),e.next=5,Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["z"])(a).then((function(e){return r.form.idcardPhoto=e.data.data.url}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFaceFile:function(){var e=Object(E_taoyuba_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(){var t,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.dataURLtoFile(this.form.facePhoto),a=new FormData,a.append("file",t),e.next=5,Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["z"])(a).then((function(e){return r.form.facePhoto=e.data.data.url}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),dataURLtoFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"img";console.log(e);var a=e.split(","),r=a[0].match(/:(.*?);/)[1],n=r.split("/")[1],o=atob(a[1]),i=o.length,_=new Uint8Array(i);while(i--)_[i]=o.charCodeAt(i);return new File([_],"".concat(t,".").concat(n),{type:r})},newMember:function(){this.form.certList||this.$set(this.form,"certList",[]);var e=this.form.certList.length;e<2?this.form.certList.push({id:e?(parseInt(this.form.certList[e-1].id)+1).toString():"0"}):this.$message({message:"最多两个证书",type:"warning"})},remove:function(e){var t=this;this.$confirm("此操作将永久删除该证书, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(2===t.form.certList.length){var a=t.form.certList.filter((function(t){return t.id!=e}));t.form.certList=a}else if(1===t.form.certList.length){var r=t.form.certList.filter((function(e){return 2==e.id}));t.form.certList=r}t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleAvatarSuccessFile:function(e){this.$set(this.form.certList[this.idx],"certFile",e.data.url)},fileUpload:function(e){this.idx=e},idcardChange:function(e){"object"===Object(E_taoyuba_ui_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_4__["a"])(e)?this.refreshCard(e):this.refreshCard({idcard:e}),this.idcards=[]},refreshCard:function(e){if(null!==e){var t=e.idcard,a=void 0===t?"":t;this.form.idcard=a}else this.form.idcard=""},getidcardList:function(e){var t=this;this.loading=!1,""!==e?Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["k"])(e).then((function(a){if(0!==a.data.data.userId)return t.$message.error("该船员已存在，请重新填写！"),void(t.form={});!0!==a.data.data?(t.choseProvince(a.data.data.provinceId),t.choseCity(a.data.data.cityId),t.form=a.data.data,t.$set(t.form,"certList",[]),t.isIdcard=!0,Object(_api_post_cert__WEBPACK_IMPORTED_MODULE_18__["g"])(e).then((function(e){e.data.data.forEach((function(e){if(t.form.certList.push(e),t.form.certList){var a=0;t.form.certList.forEach((function(e){e.id=a,a++}))}}))})),""===t.form.phone?t.isPhone=!1:t.isPhone=!0):(t.form.realName="",t.form.positionId="",t.form.birthday="",t.form.provinceId="",t.form.cityId="",t.form.districtId="",t.form.address="",t.form.phone="",t.form.contactName="",t.form.contactPhone="",t.form.applyType="",t.form.remark="",t.form.nation="",t.form.speciality="",t.form.photoFront="",t.form.photoReverse="",t.form.idcardPhoto="",t.form.facePhoto="",t.form.certList=[])})):this.idcards=[],this.loading=!1}},beforeDestroy:function(){this.sockets.unsubscribe("card message")},created:function(){var e=this;function t(){return a.apply(this,arguments)}function a(){return a=Object(E_taoyuba_ui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_11__["a"])(regeneratorRuntime.mark((function e(){var t,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_api_login__WEBPACK_IMPORTED_MODULE_17__["c"])().then((function(e){return r.nameA=e.data.data.sysUser.realName,r.idcardB=e.data.data.sysUser.idCard,e.data.data.roles.includes(111)?r.manager=!0:r.manager=!1,e.data.data.sysUser.userId,e.data.data.sysUser.idCard}));case 2:return this.cards=e.sent,e.next=5,Object(_api_tmlms_boatMan__WEBPACK_IMPORTED_MODULE_14__["f"])(this.cards).then((function(e){return console.log(e.data.data),0!==Object.keys(e.data.data).length&&(r.isDate=!0),console.log(r.isDate),!0===r.isDate?(e.data.data.realName=r.nameA,e.data.data.idcard=r.idcardB,e.data.data):(e.data.data=r.form,e.data.data.realName=r.nameA,e.data.data.idcard=r.idcardB,e.data.data)}));case 5:if(t=e.sent,!t.provinceId){e.next=9;break}return e.next=9,this.choseProvince(t.provinceId);case 9:if(!t.cityId){e.next=12;break}return e.next=12,this.choseCity(t.cityId);case 12:t.certList&&(a=0,t.certList.forEach((function(e){e.id=a,a++}))),this.form=t,""!==this.form.phone&&(this.isPhone=!0);case 15:case"end":return e.stop()}}),e,this)}))),a.apply(this,arguments)}Object(_api_post_admin__WEBPACK_IMPORTED_MODULE_13__["d"])(0).then((function(t){var a=t.data;e.province=a.data})),Object(_api_post_admin__WEBPACK_IMPORTED_MODULE_13__["f"])("tyb_resume_position").then((function(t){var a=t.data;e.position=a.data})),(this.$route.query.edit||this.$route.query.see||this.$route.query.userId)&&t.call(this),Object(_api_login__WEBPACK_IMPORTED_MODULE_17__["c"])().then((function(t){t.data.data.roles.includes(111)?e.manager=!0:e.manager=!1,-1!==t.data.data.roles.indexOf(111)||-1!==t.data.data.roles.indexOf(112)?e.isManger=!1:e.isManger=!0,t.data.data.sysUser.userId}))},mounted:function mounted(){var _this11=this;function Base64(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.decode=function(a){var r,n,o,i,_,c,s,d="",l=0;a=a.replace(/[^A-Za-z0-9+/=]/g,"");while(l<a.length)i=e.indexOf(a.charAt(l++)),_=e.indexOf(a.charAt(l++)),c=e.indexOf(a.charAt(l++)),s=e.indexOf(a.charAt(l++)),r=i<<2|_>>4,n=(15&_)<<4|c>>2,o=(3&c)<<6|s,d+=String.fromCharCode(r),64!=c&&(d+=String.fromCharCode(n)),64!=s&&(d+=String.fromCharCode(o));return d=t(d),d};var t=function(e){var t="",a=0,r=0,n=0,o=0;while(a<e.length)r=e.charCodeAt(a),r<128?(t+=String.fromCharCode(r),a++):r>191&&r<224?(n=e.charCodeAt(a+1),t+=String.fromCharCode((31&r)<<6|63&n),a+=2):(n=e.charCodeAt(a+1),o=e.charCodeAt(a+2),t+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&o),a+=3);return t}}this.$socket.emit("connect"),this.$socket.emit("startRead"),this.sockets.subscribe("card message",(function(msg){var base=new Base64,result1=base.decode(msg),data=eval("("+result1+")");_this11.form.realName=data.name,_this11.form.birthday=data.born.slice(0,4)+"-"+data.born.slice(4,6)+"-"+data.born.slice(6),_this11.form.idcard=data.cardno,_this11.form.address=data.address,_this11.form.nation=data.nation,_this11.form.gender="男"==data.sex?1:2,_this11.form.nationality="中国"}))},computed:{type:function(){return this.$route.query.see?1:2}},watch:{"form.idcard":{handler:function(e){if(void 0!==e&&18===e.length){var t=e.substr(6,8).replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3");this.form.birthday=t}},deep:!0}}}},4525:function(e,t,a){"use strict";a.d(t,"h",(function(){return o})),a.d(t,"i",(function(){return i})),a.d(t,"b",(function(){return _})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return s})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"a",(function(){return m}));var r=a("b5c6"),n="tmlms/crew_cert";function o(e){return Object(r["a"])({url:"".concat(n,"/create"),method:"post",data:e})}function i(e){return Object(r["a"])({url:"".concat(n,"/edit"),method:"post",data:e})}function _(e){return Object(r["a"])({url:"".concat(n,"/remove"),method:"post",params:{certId:e}})}function c(e){return Object(r["a"])({url:"".concat(n,"/detail"),method:"get",params:{certId:e}})}function s(e){return Object(r["a"])({url:"".concat(n,"/myCerts"),method:"get",params:{userId:e}})}function d(e,t){return Object(r["a"])({url:"".concat(n,"/getPage"),method:"get",params:e,data:t})}function l(e){return Object(r["a"])({url:"".concat(n,"/")+e,method:"post",data:e})}function u(e){return Object(r["a"])({url:"".concat(n,"/mycertlist"),method:"get",params:{idcard:e}})}function m(e){return Object(r["a"])({url:"".concat(n,"/certStandard/")+e,method:"get"})}},5612:function(e,t,a){"use strict";a.d(t,"i",(function(){return i})),a.d(t,"j",(function(){return _})),a.d(t,"l",(function(){return c})),a.d(t,"m",(function(){return s})),a.d(t,"r",(function(){return d})),a.d(t,"c",(function(){return l})),a.d(t,"t",(function(){return u})),a.d(t,"u",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"g",(function(){return h})),a.d(t,"v",(function(){return b})),a.d(t,"f",(function(){return E})),a.d(t,"z",(function(){return g})),a.d(t,"k",(function(){return O})),a.d(t,"n",(function(){return y})),a.d(t,"h",(function(){return v})),a.d(t,"p",(function(){return P})),a.d(t,"x",(function(){return M})),a.d(t,"y",(function(){return D})),a.d(t,"w",(function(){return I})),a.d(t,"b",(function(){return C})),a.d(t,"q",(function(){return w})),a.d(t,"a",(function(){return k})),a.d(t,"s",(function(){return L})),a.d(t,"o",(function(){return T}));var r=a("b5c6"),n=a("2f9e"),o="/tmlms/crew";function i(e){return Object(r["a"])({url:"".concat(o,"/Page"),method:"get",params:e})}function _(e){return Object(r["a"])({url:"".concat(o,"/findByShipId?shipId=").concat(e),method:"get",params:e})}function c(e){return Object(r["a"])({url:"".concat(o,"/getHistoryByShipId?shipId=").concat(e.shipId),method:"get",params:e})}function s(e){return Object(r["a"])({url:"".concat(o,"/pageWithShip"),method:"get",params:e})}function d(e){return Object(r["a"])({url:"".concat(o,"/shipLogPage"),method:"get",params:e})}function l(e){return Object(r["a"])({url:"".concat(o,"/checkMoreRelations"),method:"post",data:e})}function u(e,t){return Object(r["a"])({url:"".concat(o,"/create?type=").concat(t),method:"post",data:e})}function m(e,t){return Object(r["a"])({url:"".concat(o,"/batchCreate?type=").concat(t),method:"post",data:e,timeout:3e5})}function p(e){return Object(r["a"])({url:"".concat(o,"/delete?idcard=").concat(e),method:"post"})}function f(e,t){return Object(r["a"])({url:"".concat(o,"/deleteRelation?idcard=").concat(e,"&&shipId=").concat(t),method:"post"})}function h(e,t){return Object(r["a"])({url:"".concat(o,"/edit?type=").concat(t),method:"post",data:e})}function b(e,t){return Object(r["a"])({url:"".concat(o,"/review?status=").concat(e,"&userId=").concat(t),method:"post"})}function E(e){return Object(r["a"])({url:"".concat(o,"/getCrewByidcard?idcard=").concat(e),method:"get"})}function g(e){return Object(r["a"])({url:"admin/file/upload/avatar",method:"post",data:e})}function O(e){return Object(r["a"])({url:"".concat(o,"/idcardcheck?idcard=").concat(e),method:"get"})}function y(e){return Object(r["a"])({url:"".concat(o,"/idcardcheck?idcard=").concat(e),method:"get"})}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"船员信息";return Object(n["a"])({url:"tmlms/tybmlmsExcelExport/downloadCrew",data:e,title:t})}function P(e){return Object(r["a"])({url:"".concat(o,"/badPage"),method:"get",params:e})}function M(e){return Object(r["a"])({url:"".concat(o,"/badUpdateBatch"),method:"post",data:e})}function D(e){return Object(r["a"])({url:"".concat(o,"/uploadBaseImage"),method:"post",data:e})}function I(e){return Object(r["a"])({url:"".concat(o,"/updateCertByIdcard"),method:"post",params:e})}function C(e){return Object(r["a"])({url:"".concat(o,"/changeShip"),method:"post",data:e})}function w(e){return Object(r["a"])({url:"".concat(o,"/getShipRelationByIdcard"),method:"get",params:e})}function k(e){return Object(r["a"])({url:"/tmlms/tybship/pageForChange",method:"get",params:e})}function L(e){return Object(r["a"])({url:"/tmlms/importTask/lookTask",method:"get",params:{taksId:e}})}function T(e){return Object(r["a"])({url:"/tmlms/crew_cert/newPage",method:"get",params:e})}},"5abb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-add"},[a("basic-container",[e.$route.query.userId?e._e():a("h1",[e._v(e._s(e.$route.query.see?"查看":e.$route.query.edit?"编辑":"新增")+"船员信息")]),e.$route.query.userId?a("h1",[e._v("完善个人信息")]):e._e(),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px",size:"small",disabled:1===e.type}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"个人姓名：",prop:"realName"}},[a("el-input",{attrs:{disabled:e.isManger},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio",{attrs:{label:1},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("男")]),a("el-radio",{attrs:{label:2},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[e._v("女")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号码：",prop:"idcard"}},[a("el-select",{attrs:{disabled:e.isManger,placeholder:"请选择",filterable:"",remote:"",maxlength:"20",loading:e.loading,"allow-create":"",clearable:"","remote-method":e.getidcardList},on:{change:e.idcardChange},model:{value:e.form.idcard,callback:function(t){e.$set(e.form,"idcard",t)},expression:"form.idcard"}},e._l(e.idcards,(function(e){return a("el-option",{key:e.id,attrs:{label:e.idcard+"(手机号："+e.phone+")",value:e}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("iep-form-item",{staticClass:"form-half",attrs:{prop:"birthday","label-name":"出生日期"}},[a("iep-date-picker",{attrs:{type:"date",placeholder:"选择日期",readonly:""},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"籍贯地区：",prop:"districtId"}},[a("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"省级地区"},on:{change:function(t){return e.choseProvince(e.form.provinceId)}},model:{value:e.form.provinceId,callback:function(t){e.$set(e.form,"provinceId",t)},expression:"form.provinceId"}},e._l(e.province,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"provinceId"}})})),1),a("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"市级地区"},on:{change:function(t){return e.choseCity(e.form.cityId)}},model:{value:e.form.cityId,callback:function(t){e.$set(e.form,"cityId",t)},expression:"form.cityId"}},e._l(e.city,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"cityId"}})})),1),a("el-select",{staticStyle:{width:"33%!important"},attrs:{placeholder:"区级地区"},model:{value:e.form.districtId,callback:function(t){e.$set(e.form,"districtId",t)},expression:"form.districtId"}},e._l(e.district,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.areaCode,prop:"districtId"}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"国籍",prop:"nationality"}},[a("el-input",{model:{value:e.form.nationality,callback:function(t){e.$set(e.form,"nationality",t)},expression:"form.nationality"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"民族",prop:"nation"}},[a("el-select",{attrs:{placeholder:"请输入民族"},model:{value:e.form.nation,callback:function(t){e.$set(e.form,"nation",t)},expression:"form.nation"}},e._l(e.nationals,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"家庭地址：",prop:"address"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"家庭联系人：",prop:"contactName"}},[a("el-input",{model:{value:e.form.contactName,callback:function(t){e.$set(e.form,"contactName",t)},expression:"form.contactName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"家庭联系电话",prop:"contactPhone"}},[a("el-input",{model:{value:e.form.contactPhone,callback:function(t){e.$set(e.form,"contactPhone",t)},expression:"form.contactPhone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"职位：",prop:"positionId"}},[a("el-select",{attrs:{placeholder:"职位"},model:{value:e.form.positionId,callback:function(t){e.$set(e.form,"positionId",t)},expression:"form.positionId"}},e._l(e.position,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否需要培训",prop:"isTrain"}},[a("el-radio-group",{model:{value:e.form.isTrain,callback:function(t){e.$set(e.form,"isTrain",t)},expression:"form.isTrain"}},[a("el-radio",{attrs:{label:0}},[e._v("否")]),a("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请类别",prop:"applyType"}},[a("el-select",{attrs:{placeholder:"请输入申请类别"},model:{value:e.form.applyType,callback:function(t){e.$set(e.form,"applyType",t)},expression:"form.applyType"}},e._l(e.applyTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"特长：",prop:"speciality"}},[a("el-input",{model:{value:e.form.speciality,callback:function(t){e.$set(e.form,"speciality",t)},expression:"form.speciality"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[e.manager?a("el-form-item",{attrs:{label:"身份证正面照片：",prop:"photoFront"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccessFront,headers:e.headers,accept:"image/*"}},[e.form.photoFront?a("img",{staticClass:"avatar",attrs:{src:e.form.photoFront}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1):e._e()],1),a("el-col",{attrs:{span:12}},[e.manager?a("el-form-item",{attrs:{label:"身份证反面照片：",prop:"photoReverse"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccessReverse,headers:e.headers,accept:"image/*"}},[e.form.photoReverse?a("img",{staticClass:"avatar",attrs:{src:e.form.photoReverse}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[e.manager?a("el-form-item",{attrs:{label:"身份证头像：",prop:"idcardPhoto"}},[e.form.idcardPhoto?a("img",{attrs:{src:e.form.idcardPhoto}}):a("i",{staticClass:"el-icon-picture-outline"})]):e._e()],1),a("el-col",{attrs:{span:12}},[e.manager?a("el-form-item",{attrs:{label:"人脸照：",prop:"facePhoto"}},[e.form.facePhoto?a("img",{staticStyle:{width:"350px",height:"200px"},attrs:{src:e.form.facePhoto}}):a("i",{staticClass:"el-icon-picture-outline"})]):e._e()],1)],1),e.$route.query.userId?e._e():a("iep-form-item",{staticClass:"form-half",attrs:{prop:"remark","label-name":"备注信息",tip:"请输入备注信息"}},[a("iep-input-area",{model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("h1",{staticStyle:{"font-size":"18px"}},[e._v("资质证书: ")]),e._l(e.form.certList,(function(t,r){return a("div",{key:r},[a("el-form",{attrs:{"label-width":"150px",size:"small",disabled:1===e.type}},[a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"证书编码：",prop:"certNo"}},[a("el-input",{model:{value:t.certNo,callback:function(a){e.$set(t,"certNo",a)},expression:"item.certNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证书类型：",prop:"certType"}},[a("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_type"},model:{value:t.certType,callback:function(a){e.$set(t,"certType",a)},expression:"item.certType"}})],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"证书等级：",prop:"certLevel"}},[a("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_level"},model:{value:t.certLevel,callback:function(a){e.$set(t,"certLevel",a)},expression:"item.certLevel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证书职务：",prop:"certTitle"}},[a("iep-dict-select",{attrs:{"dict-name":"tyb_crew_cert_title"},model:{value:t.certTitle,callback:function(a){e.$set(t,"certTitle",a)},expression:"item.certTitle"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证书起始日期：",prop:"certDateIssue"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.certDateIssue,callback:function(a){e.$set(t,"certDateIssue",a)},expression:"item.certDateIssue"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证书结束日期：",prop:"certDateExpire"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.certDateExpire,callback:function(a){e.$set(t,"certDateExpire",a)},expression:"item.certDateExpire"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"扫描件：",prop:"certFile"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/admin/file/upload/avatar","show-file-list":!1,"on-success":e.handleAvatarSuccessFile,limit:1,headers:e.headers,accept:"image/*"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.fileUpload(r)}}},[e._v("点击上传")]),t.certFile?a("img",{staticClass:"certAvatar",attrs:{src:t.certFile}}):a("i",{staticClass:"el-icon-picture-outline"})],1)],1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[e.manager||!e.$route.query.edit?a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){return e.remove(r)}}},[e._v("删除")]):e._e()],1)],1)],1)],1)})),a("div",{staticStyle:{"text-align":"center"}},[a("iep-button",{staticStyle:{width:"86%","margin-top":"5px","margin-bottom":"8px"},attrs:{icon:"el-icon-plus",plain:""},on:{click:e.newMember}},[e._v("新增")])],1)],2),a("div",{staticStyle:{"text-align":"center"}},[e.$route.query.see?e._e():a("el-button",{on:{click:e.save}},[e._v("提交")]),e.manager?a("el-button",{on:{click:function(t){return e.$router.push({name:"boatMan"})}}},[e._v("返回")]):e._e(),e.manager?e._e():a("el-button",{on:{click:function(t){return e.$router.push({path:"/"})}}},[e._v("返回")]),e.manager&&!e.$route.query.see?a("el-button",{on:{click:e.collect}},[e._v("数据读取")]):e._e()],1)],1)],1)},n=[],o=a("41e2"),i=o["a"],_=(a("1a94"),a("2877")),c=Object(_["a"])(i,r,n,!1,null,null,null);t["default"]=c.exports},b440:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("b5c6"),n="/tybhrms/databuspayload";function o(e){return Object(r["a"])({url:"".concat(n,"/getlast"),method:"get",params:e})}},c533b:function(e,t,a){"use strict";a.d(t,"i",(function(){return _})),a.d(t,"f",(function(){return c})),a.d(t,"d",(function(){return s})),a.d(t,"g",(function(){return d})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return m})),a.d(t,"j",(function(){return p})),a.d(t,"h",(function(){return f})),a.d(t,"b",(function(){return h}));var r=a("b5c6"),n="tmlms/crew",o="admin/region",i="admin/dict";function _(e){return Object(r["a"])({url:"".concat(o,"/getinfo/")+e,method:"get"})}function c(e){return Object(r["a"])({url:"".concat(i,"/type/")+e,method:"get"})}function s(e){return Object(r["a"])({url:"".concat(o,"/area"),method:"get",params:{parentCode:e}})}function d(e){return Object(r["a"])({url:"".concat(n,"/Page"),method:"get",params:e})}function l(e){return Object(r["a"])({url:"".concat(n,"/delete"),method:"post",params:{userId:e}})}function u(e){return Object(r["a"])({url:"".concat(n,"/create"),method:"post",data:e,params:{type:1}})}function m(e){return Object(r["a"])({url:"".concat(n,"/getCrewByUserId"),method:"get",params:{userId:e}})}function p(e){return Object(r["a"])({url:"".concat(n,"/edit"),method:"post",params:{type:1},data:e})}function f(e){return Object(r["a"])({url:"/tybship/tybregion/parent/".concat(e),method:"get"})}function h(e,t,a){return Object(r["a"])({url:"".concat(n,"/upWork?idcard=").concat(t,"&workStatus=").concat(a),method:"post",data:e})}},e420:function(e,t,a){"use strict";a("7f7f");var r=a("7ded");t["a"]={data:function(){return{haveInfo:{}}},methods:{getInformation:function(e,t){var a=this;Object(r["c"])().then((function(r){-1===r.data.data.roles.indexOf(1)&&-1===r.data.data.roles.indexOf(111)&&(r.data.data.sysUser.phone&&(a.$set(a.haveInfo,"phone",!0),a[e][t[0]]=r.data.data.sysUser.phone),r.data.data.sysUser.realName&&(a.$set(a.haveInfo,"realName",!0),a[e][t[1]]=r.data.data.sysUser.realName),r.data.data.sysUser.idCard&&[t[2]]&&(a.$set(a.haveInfo,"idcard",!0),a[e].idcard=r.data.data.sysUser.idCard))}))}}}},e9bd:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=[{prop:"certNo",label:"证书编码"},{prop:"certType",label:"证书类型",type:"dict",dictName:"tyb_crew_cert_type"},{prop:"certLevel",label:"证书等级",type:"dict",dictName:"tyb_crew_cert_level"},{prop:"certTitle",label:"证书职务",type:"dict",dictName:"tyb_crew_cert_title"},{prop:"certDateIssue",label:"有效期至",type:"date"},{prop:"certDateExpire",label:"结束日期",type:"date"},{prop:"annex",label:"扫描件",type:"file"}]}}]);